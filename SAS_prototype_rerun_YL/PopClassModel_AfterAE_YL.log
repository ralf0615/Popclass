1                                        The WPS System      23:19 Friday, October 26, 2018     

NOTE: (c) Copyright World Programming Limited 2002-2018.  All rights reserved.
NOTE: World Programming System 4.00 (04.00.01.00.006515)
      Licensed to Truven Health Analytics, DR Licence for L13147
NOTE: This session is executing on the AIX platform and is running in 64 bit mode

NOTE: AUTOEXEC processing beginning; file is /opt/WPS/wps-4.0.1/autoexec.sas
NOTE: Library arch1990 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/1990/

NOTE: Library arch1991 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/1991/

NOTE: Library arch1992 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/1992/

NOTE: Library arch1993 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/1993/

NOTE: Library arch1994 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/1994/

NOTE: Library arch1995 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/1995/

NOTE: Library arch1996 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/1996/

NOTE: Library arch1997 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/1997/

NOTE: Library arch1998 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/1998/

NOTE: Library arch1999 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/1999/

NOTE: Library arch2000 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2000/

NOTE: Library arch2001 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2001/
2                                        The WPS System      23:19 Friday, October 26, 2018     


NOTE: Library arch2002 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2002/

NOTE: Library arch2003 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2003/

NOTE: Library arch2004 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2004/

NOTE: Library arch2005 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2005/

NOTE: Library arch2006 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2006/

NOTE: Library arch2007 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2007/

NOTE: Library arch2008 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2008/

NOTE: Library arch2009 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2009/

NOTE: Library arch2010 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2010/

NOTE: Library arch2011 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2011/

NOTE: Library arch2012 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2012/

NOTE: Library arch2013 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan2/data/archive/2013/

NOTE: Library arch2014 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan2/data/archive/2014/

3                                        The WPS System      23:19 Friday, October 26, 2018     

NOTE: Library arch2015 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan2/data/archive/2015/

NOTE: Library arch2016 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan2/data/archive/2016/

NOTE: Library arch2017 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan2/data/archive/2017/

NOTE: Library meg1996 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/1996/meg/

NOTE: Library meg1997 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/1997/meg/

NOTE: Library meg1998 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/1998/meg/

NOTE: Library meg1999 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/1999/meg/

NOTE: Library meg2000 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2000/meg/

NOTE: Library meg2001 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2001/meg/

NOTE: Library meg2002 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2002/meg/

NOTE: Library meg2003 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2003/meg/

NOTE: Library meg2004 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2004/meg/

NOTE: Library meg2005 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2005/meg/

NOTE: Library meg2006 assigned as follows:
4                                        The WPS System      23:19 Friday, October 26, 2018     

      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2006/meg/

NOTE: Library meg2007 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2007/meg/

NOTE: Library meg2008 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2008/meg/

NOTE: Library meg2009 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2009/meg/

NOTE: Library meg2010 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2010/meg/

NOTE: Library meg2011 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2011/meg/

NOTE: Library meg2012 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2012/meg/

NOTE: Library meg2013 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan2/data/archive/2013/meg/

NOTE: Library meg2014 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan2/data/archive/2014/meg/

NOTE: Library meg2015 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan2/data/archive/2015/meg/

NOTE: Library meg2016 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan2/data/archive/2016/meg/

NOTE: Library meg2017 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan2/data/archive/2017/meg/

NOTE: Library mdcd1999 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/1999/

NOTE: Library mdcd2000 assigned as follows:
      Engine:        SAS7BDAT
5                                        The WPS System      23:19 Friday, October 26, 2018     

      Physical Name: /mscan/data/medicaid/2000/

NOTE: Library mdcd2001 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2001/

NOTE: Library mdcd2002 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2002/

NOTE: Library mdcd2003 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2003/

NOTE: Library mdcd2004 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2004/

NOTE: Library mdcd2005 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2005/

NOTE: Library mdcd2006 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2006/

NOTE: Library mdcd2007 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2007/

NOTE: Library mdcd2008 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2008/

NOTE: Library mdcd2009 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2009/

NOTE: Library mdcd2010 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2010/

NOTE: Library mdcd2011 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2011/

NOTE: Library mdcd2012 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2012/

NOTE: Library mdcd2013 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2013/
6                                        The WPS System      23:19 Friday, October 26, 2018     


NOTE: Library mdcd2014 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2014/

NOTE: Library mdcd2015 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2015/

NOTE: Library mdcd2016 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2016/

NOTE: Library mdcd2017 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2017/

NOTE: Library eview assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/earlyview/

NOTE: Library eviewmon assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan2/data/earlyview_monthly/

NOTE: Library mslab assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/lab/

NOTE: Library msn1 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /msn1/data/marketscan_one/

NOTE: Library msprov assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/marketscan_provider/

NOTE: Library redbook assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/redbook/

NOTE: Library bpd assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/bpd/

NOTE: Library loincdb assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/loincdb/

NOTE: Library library assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /hic/data/formats/

7                                        The WPS System      23:19 Friday, October 26, 2018     

NOTE: Library mdcdfmt assigned as follows:
      Engine:        WPD
      Physical Name: /mscan/data/medicaid/formats

NOTE: Library mdcdproc assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/procedures

NOTE: Library arch2014 assigned as follows:
      Engine:        WPD
      Physical Name: /mscan4/data/archive/2014/

NOTE: Library arch2015 assigned as follows:
      Engine:        WPD
      Physical Name: /mscan4/data/archive/2015/

NOTE: Library arch2016 assigned as follows:
      Engine:        WPD
      Physical Name: /mscan4/data/archive/2016/

NOTE: Library arch2017 assigned as follows:
      Engine:        WPD
      Physical Name: /mscan4/data/archive/2017/

NOTE: Library meg2014 assigned as follows:
      Engine:        WPD
      Physical Name: /mscan4/data/archive/2014/meg/

NOTE: Library meg2015 assigned as follows:
      Engine:        WPD
      Physical Name: /mscan4/data/archive/2015/meg/

NOTE: Library meg2016 assigned as follows:
      Engine:        WPD
      Physical Name: /mscan4/data/archive/2016/meg/

NOTE: Library meg2017 assigned as follows:
      Engine:        WPD
      Physical Name: /mscan4/data/archive/2017/meg/

NOTE: Library library assigned as follows:
      Engine:        WPD
      Physical Name: /hic/data/formats/wps

NOTE: AUTOEXEC processing completed

1         /*** connect to the nike server - trvlapp1465.tsh.thomson.com ***/
2         
3         %include '/opt/SAS94/SASFoundation/9.4/autoexec.sas';
NOTE: Library arch1990 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/1990/

8                                        The WPS System      23:19 Friday, October 26, 2018     

NOTE: Library arch1991 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/1991/

NOTE: Library arch1992 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/1992/

NOTE: Library arch1993 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/1993/

NOTE: Library arch1994 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/1994/

NOTE: Library arch1995 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/1995/

NOTE: Library arch1996 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/1996/

NOTE: Library arch1997 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/1997/

NOTE: Library arch1998 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/1998/

NOTE: Library arch1999 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/1999/

NOTE: Library arch2000 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2000/

NOTE: Library arch2001 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2001/

NOTE: Library arch2002 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2002/

NOTE: Library arch2003 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2003/

NOTE: Library arch2004 assigned as follows:
9                                        The WPS System      23:19 Friday, October 26, 2018     

      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2004/

NOTE: Library arch2005 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2005/

NOTE: Library arch2006 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2006/

NOTE: Library arch2007 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2007/

NOTE: Library arch2008 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2008/

NOTE: Library arch2009 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2009/

NOTE: Library arch2010 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2010/

NOTE: Library arch2011 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2011/

NOTE: Library arch2012 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2012/

NOTE: Library arch2013 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan2/data/archive/2013/

NOTE: Library arch2014 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan2/data/archive/2014/

NOTE: Library arch2015 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan2/data/archive/2015/

NOTE: Library arch2016 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan2/data/archive/2016/

NOTE: Library arch2017 assigned as follows:
      Engine:        SAS7BDAT
10                                       The WPS System      23:19 Friday, October 26, 2018     

      Physical Name: /mscan2/data/archive/2017/

NOTE: Library meg1996 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/1996/meg/

NOTE: Library meg1997 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/1997/meg/

NOTE: Library meg1998 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/1998/meg/

NOTE: Library meg1999 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/1999/meg/

NOTE: Library meg2000 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2000/meg/

NOTE: Library meg2001 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2001/meg/

NOTE: Library meg2002 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2002/meg/

NOTE: Library meg2003 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2003/meg/

NOTE: Library meg2004 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2004/meg/

NOTE: Library meg2005 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2005/meg/

NOTE: Library meg2006 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2006/meg/

NOTE: Library meg2007 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2007/meg/

NOTE: Library meg2008 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2008/meg/
11                                       The WPS System      23:19 Friday, October 26, 2018     


NOTE: Library meg2009 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2009/meg/

NOTE: Library meg2010 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2010/meg/

NOTE: Library meg2011 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2011/meg/

NOTE: Library meg2012 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2012/meg/

NOTE: Library meg2013 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan2/data/archive/2013/meg/

NOTE: Library meg2014 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan2/data/archive/2014/meg/

NOTE: Library meg2015 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan2/data/archive/2015/meg/

NOTE: Library meg2016 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan2/data/archive/2016/meg/

NOTE: Library meg2017 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan2/data/archive/2017/meg/

NOTE: Library mdcd1999 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/1999/

NOTE: Library mdcd2000 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2000/

NOTE: Library mdcd2001 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2001/

NOTE: Library mdcd2002 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2002/

12                                       The WPS System      23:19 Friday, October 26, 2018     

NOTE: Library mdcd2003 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2003/

NOTE: Library mdcd2004 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2004/

NOTE: Library mdcd2005 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2005/

NOTE: Library mdcd2006 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2006/

NOTE: Library mdcd2007 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2007/

NOTE: Library mdcd2008 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2008/

NOTE: Library mdcd2009 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2009/

NOTE: Library mdcd2010 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2010/

NOTE: Library mdcd2011 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2011/

NOTE: Library mdcd2012 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2012/

NOTE: Library mdcd2013 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2013/

NOTE: Library mdcd2014 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2014/

NOTE: Library mdcd2015 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2015/

NOTE: Library mdcd2016 assigned as follows:
13                                       The WPS System      23:19 Friday, October 26, 2018     

      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2016/

NOTE: Library mdcd2017 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2017/

NOTE: Library eview assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/earlyview/

NOTE: Library eviewmon assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan2/data/earlyview_monthly/

NOTE: Library mslab assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/lab/

NOTE: Library msn1 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /msn1/data/marketscan_one/

NOTE: Library msprov assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/marketscan_provider/

NOTE: Library redbook assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/redbook/

NOTE: Library bpd assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/bpd/

NOTE: Library loincdb assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/loincdb/

NOTE: Library library assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /hic/data/formats/

NOTE: Library mdcdfmt assigned as follows:
      Engine:        WPD
      Physical Name: /mscan/data/medicaid/formats

NOTE: Library mdcdproc assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/procedures

389       
390       Options obs=max mprint mlogic;
14                                       The WPS System      23:19 Friday, October 26, 2018     

391       
392       %Let Prevyear=2014;
393       %Let     year=2015;
394       %Let Nextyear=2016;
395       %Let MSversionPrev=143;
396       %Let MSversion    =153;
397       %Let MSversionNext=162;
398       %Let StartDate='31DEC2015'd; /* always choose the end of month */
399       %let version=31DEC2015Enrolids200_10252018;
400       %Let AEoutpath=/rpscan/u071439/AEout/&version.;
401       %Let outpath=/rpscan/u071439/output/&version.;
402       %Let username=u071439;
403       %Let createMScopy=0;  /* set this to 1 if we want to create the MarketScan version */
404       %Let skipImport=1; /* set this to 1 if we create directly the SAS dataset SamplewClass
404     ! ification and we want to skip the import */
405       
406       x "mkdir -p /rpscan/u071439/temp/&version.";
407       x "mkdir -p /rpscan/u071439/AEout/&version.";
408       x "mkdir -p /rpscan/u071439/output/&version.";
409       libname temp "/rpscan/u071439/temp/&version.";
NOTE: Library temp assigned as follows:
      Engine:        WPD
      Physical Name: /rpscan/u071439/temp/31DEC2015Enrolids200_10252018

410       
411       %macro libsetup;
412       %if &createMScopy.=1 %then %do;
413       libname arch&year. "/rpscan/u071439/temp/&version.";
414       libname arch&Nextyear. "/rpscan/u071439/temp/&version.";
415       %end;
416       %mend libsetup;
417       
418       *** exclusions for what not is considered to be a specialist (Anne);
419       %Let SpecExclusionList=200,202,204,206,240,245,320,400;
420       *** exclusions for what counts as a visit based on SvcCat and Procedure (Amy);
421       %Let SvcCatExclusionList="30","32","37","38","51","52","53","54","55","56","59","61","
421     ! 62","63","64","65","66","67","68","69";
422       %Let ProcExclusionList="36415","G0001","36400","36405","36406","36410","36416";
423       *** CPT codes for Oxygen;
424       %let OxygenCPTList="E0431","E0434","E0439","E0441","E0442","E0443","E0444","E1390","E1
424     ! 392","K0738";
425       *** Therapeutic Intermediate Classes for Opiates;
426       %let OpiatesTCLS=60,61;
427       %let OpiatesGNID=108156,118478,124984,124986,124988,128184,128947,129199,129311,129314
427     ! ,129315,130023,131028,131029,131146,131486;
428       %let SvcCatMHSA='PSY02','PSY03','PSY80';
429       %let SvcCatGYN='GYN01','GYN02','GYN03','GYN06','GYN09','GYN10','GYN12','GYN27','GYN29'
429     ! ,'GYN30';
430       *** Rebalance;
431       %let ConditionDxCat='CVS11','CVS10';
432       %let ConditionDxCatStage=3;
433       %let ConditionDxCatER='PSY';
434       %let ConditionDRG='280','281','282','283','284','285','239','241','474','475','476','6
15                                       The WPS System      23:19 Friday, October 26, 2018     

434     ! 16','617','618','619','620','621','003','004','011','012','013','240';
435       
436       %let ConditionAdminType='4';
437       
438       %let ConditionProcGRP='0090','0095','2370','1045','4580','4585';
439       *** NeoNates;
440       %let NeonatesDRGList=790,791,792,793,794,795;
441       
442       
443       * Beginning of Ujwal's modification;
444       * Import a list of 200 enrolid;
445       PROC IMPORT
446       DATAFILE='/rpscan/u071439/data/enrolids_200.csv'
447       OUT=enrolids
448       DBMS=CSV
449       REPLACE;
450       GETNAMES=YES;
451       GUESSINGROWS=MAX;
452       RUN;
NOTE: Procedure IMPORT step took :
      real time : 0.026
      cpu time  : 0.001


453       data enrolids;
454         infile '/rpscan/u071439/data/enrolids_200.csv' delimiter=',' MISSOVER DSD firstobs=2
454     !  LRECL=32760;
455         informat 'ENROLID'n BEST32.;
456         format 'ENROLID'n BEST12.;
457         label 'ENROLID'n = 'ENROLID';
458         input    'ENROLID'n
459         ;
460         run;

NOTE: The file '/rpscan/u071439/data/enrolids_200.csv' is:
      File Name=/rpscan/u071439/data/enrolids_200.csv,
      Access Permissions=-rw-r--r--, Number of Links=1,
      Owner Name=u071439, Group Name=devl,
      File Size=2307, Last Modified=16:26:39 Oct 25 2018,
      Created=16:26:39 Oct 25 2018, Lrecl=32760, Recfm=V

NOTE: 200 records were read from file '/rpscan/u071439/data/enrolids_200.csv'
      The minimum record length was 8
      The maximum record length was 10
NOTE: Data set "WORK.enrolids" has 200 observation(s) and 1 variable(s)
NOTE: The data step took :
      real time : 0.039
      cpu time  : 0.003


461       FILENAME ##IMPORT CLEAR;
462       
463       data ccaea;
16                                       The WPS System      23:19 Friday, October 26, 2018     

464       infile '/rpscan/u071439/data/ccaea.csv' delimiter=',' MISSOVER DSD firstobs=2 LRECL=32
464     ! 760;
465       informat 'ENROLID'n BEST32.;
466       informat 'AGE'n BEST32.;
467       informat 'SEX'n $1.;
468       informat 'MSA'n BEST32.;
469       informat 'RX'n $1.;
470       informat 'ENRIND1'n BEST32.;
471       informat 'ENRIND2'n BEST32.;
472       informat 'ENRIND3'n BEST32.;
473       informat 'ENRIND4'n BEST32.;
474       informat 'ENRIND5'n BEST32.;
475       informat 'ENRIND6'n BEST32.;
476       informat 'ENRIND7'n BEST32.;
477       informat 'ENRIND8'n BEST32.;
478       informat 'ENRIND9'n BEST32.;
479       informat 'ENRIND10'n BEST32.;
480       informat 'ENRIND11'n BEST32.;
481       informat 'ENRIND12'n BEST32.;
482       informat 'PLNTYP1'n BEST32.;
483       informat 'PLNTYP2'n BEST32.;
484       informat 'PLNTYP3'n BEST32.;
485       informat 'PLNTYP4'n BEST32.;
486       informat 'PLNTYP5'n BEST32.;
487       informat 'PLNTYP6'n BEST32.;
488       informat 'PLNTYP7'n BEST32.;
489       informat 'PLNTYP8'n BEST32.;
490       informat 'PLNTYP9'n BEST32.;
491       informat 'PLNTYP10'n BEST32.;
492       informat 'PLNTYP11'n BEST32.;
493       informat 'PLNTYP12'n BEST32.;
494       format 'ENROLID'n BEST12.;
495       format 'AGE'n BEST12.;
496       format 'SEX'n $1.;
497       format 'MSA'n BEST12.;
498       format 'RX'n $1.;
499       format 'ENRIND1'n BEST12.;
500       format 'ENRIND2'n BEST12.;
501       format 'ENRIND3'n BEST12.;
502       format 'ENRIND4'n BEST12.;
503       format 'ENRIND5'n BEST12.;
504       format 'ENRIND6'n BEST12.;
505       format 'ENRIND7'n BEST12.;
506       format 'ENRIND8'n BEST12.;
507       format 'ENRIND9'n BEST12.;
508       format 'ENRIND10'n BEST12.;
509       format 'ENRIND11'n BEST12.;
510       format 'ENRIND12'n BEST12.;
511       format 'PLNTYP1'n BEST12.;
512       format 'PLNTYP2'n BEST12.;
513       format 'PLNTYP3'n BEST12.;
514       format 'PLNTYP4'n BEST12.;
515       format 'PLNTYP5'n BEST12.;
17                                       The WPS System      23:19 Friday, October 26, 2018     

516       format 'PLNTYP6'n BEST12.;
517       format 'PLNTYP7'n BEST12.;
518       format 'PLNTYP8'n BEST12.;
519       format 'PLNTYP9'n BEST12.;
520       format 'PLNTYP10'n BEST12.;
521       format 'PLNTYP11'n BEST12.;
522       format 'PLNTYP12'n BEST12.;
523       label 'ENROLID'n = 'ENROLID';
524       label 'AGE'n = 'AGE';
525       label 'SEX'n = 'SEX';
526       label 'MSA'n = 'MSA';
527       label 'RX'n = 'RX';
528       label 'ENRIND1'n = 'ENRIND1';
529       label 'ENRIND2'n = 'ENRIND2';
530       label 'ENRIND3'n = 'ENRIND3';
531       label 'ENRIND4'n = 'ENRIND4';
532       label 'ENRIND5'n = 'ENRIND5';
533       label 'ENRIND6'n = 'ENRIND6';
534       label 'ENRIND7'n = 'ENRIND7';
535       label 'ENRIND8'n = 'ENRIND8';
536       label 'ENRIND9'n = 'ENRIND9';
537       label 'ENRIND10'n = 'ENRIND10';
538       label 'ENRIND11'n = 'ENRIND11';
539       label 'ENRIND12'n = 'ENRIND12';
540       label 'PLNTYP1'n = 'PLNTYP1';
541       label 'PLNTYP2'n = 'PLNTYP2';
542       label 'PLNTYP3'n = 'PLNTYP3';
543       label 'PLNTYP4'n = 'PLNTYP4';
544       label 'PLNTYP5'n = 'PLNTYP5';
545       label 'PLNTYP6'n = 'PLNTYP6';
546       label 'PLNTYP7'n = 'PLNTYP7';
547       label 'PLNTYP8'n = 'PLNTYP8';
548       label 'PLNTYP9'n = 'PLNTYP9';
549       label 'PLNTYP10'n = 'PLNTYP10';
550       label 'PLNTYP11'n = 'PLNTYP11';
551       label 'PLNTYP12'n = 'PLNTYP12';
552       input    'ENROLID'n
553       'AGE'n
554       'SEX'n $
555       'MSA'n
556       'RX'n $
557       'ENRIND1'n
558       'ENRIND2'n
559       'ENRIND3'n
560       'ENRIND4'n
561       'ENRIND5'n
562       'ENRIND6'n
563       'ENRIND7'n
564       'ENRIND8'n
565       'ENRIND9'n
566       'ENRIND10'n
567       'ENRIND11'n
568       'ENRIND12'n
18                                       The WPS System      23:19 Friday, October 26, 2018     

569       'PLNTYP1'n
570       'PLNTYP2'n
571       'PLNTYP3'n
572       'PLNTYP4'n
573       'PLNTYP5'n
574       'PLNTYP6'n
575       'PLNTYP7'n
576       'PLNTYP8'n
577       'PLNTYP9'n
578       'PLNTYP10'n
579       'PLNTYP11'n
580       'PLNTYP12'n;
581       run;

NOTE: The file '/rpscan/u071439/data/ccaea.csv' is:
      File Name=/rpscan/u071439/data/ccaea.csv,
      Access Permissions=-rwxr-xr--, Number of Links=1,
      Owner Name=u071366, Group Name=users,
      File Size=7035526, Last Modified=15:52:28 Oct 23 2018,
      Created=15:52:28 Oct 23 2018, Lrecl=32760, Recfm=V

NOTE: 100403 records were read from file '/rpscan/u071439/data/ccaea.csv'
      The minimum record length was 54
      The maximum record length was 71
NOTE: Data set "WORK.ccaea" has 100403 observation(s) and 29 variable(s)
NOTE: The data step took :
      real time : 1.261
      cpu time  : 0.690


582       
583       %Let lastmonth=%sysfunc(month(&StartDate.),2.);
584       proc sql;
585       Create Table temp.SamplewClassification as select a.enrolid,
586       ' ' as AssignmentFinal
587       from ccaea a
588       inner join enrolids e  On e.enrolid = a.enrolid
589       where a.enrind&lastmonth.=1;
NOTE: Data set "TEMP.SamplewClassification" has 179 observation(s) and 2 variable(s)
590       quit;
NOTE: Procedure sql step took :
      real time : 0.046
      cpu time  : 0.014


591       
592       
593       
594       
595       *** importing the MetaData;
596       %macro ImportMeta(inputdata,sasoutput);
597       %if &sasoutput.=SamplewClassification and &skipImport.=1 %then %return;
598       PROC IMPORT
19                                       The WPS System      23:19 Friday, October 26, 2018     

599       datafile="/rpscan/u071439/data/&inputdata."
600       out=temp.&sasoutput.
601       replace;
602       getnames=YES;
603       guessingrows=MAX;
604       run;
605       %mend ImportMeta;
606       
607       *** Modified;
608       *** sample of 100 patients with classification;
609       *** %ImportMeta(AllClientSample&version..csv,SamplewClassification);
610       
611       
612       *** Crossmap from HCPC codes to Procedure Groups --- not used anymore;
613       %ImportMeta(HCPCcrossmapPROCGRP16r2.csv,HcpcXwalkGRP);*/
MLOGIC(IMPORTMETA): Beginning execution
MLOGIC(IMPORTMETA): Parameter INPUTDATA has value HCPCcrossmapPROCGRP16r2.csv
MLOGIC(IMPORTMETA): Parameter SASOUTPUT has value HcpcXwalkGRP
MLOGIC(IMPORTMETA): %IF condition &sasoutput.=SamplewClassification and &skipImport.=1  evaluate
                    d to FALSE
MPRINT(IMPORTMETA):  PROC IMPORT datafile="/rpscan/u071439/data/HCPCcrossmapPROCGRP16r2.csv"
                     out=temp.HcpcXwalkGRP replace;
MPRINT(IMPORTMETA):  getnames=YES;
MPRINT(IMPORTMETA):  guessingrows=MAX;
MPRINT(IMPORTMETA):  run;
NOTE: Procedure IMPORT step took :
      real time : 0.182
      cpu time  : 0.097


MPRINT(IMPORTMETA):  data temp.HcpcXwalkGRP;
614       data temp.HcpcXwalkGRP;
MPRINT(IMPORTMETA):  infile '/rpscan/u071439/data/HCPCcrossmapPROCGRP16r2.csv' delimiter=','
                     MISSOVER DSD firstobs=2 LRECL=32760;
615         infile '/rpscan/u071439/data/HCPCcrossmapPROCGRP16r2.csv' delimiter=',' MISSOVER DSD
615     !  firstobs=2 LRECL=32760;
MPRINT(IMPORTMETA):  informat 'HCPC'n $5.;
616         informat 'HCPC'n $5.;
MPRINT(IMPORTMETA):  informat 'ProcGRP'n BEST32.;
617         informat 'ProcGRP'n BEST32.;
MPRINT(IMPORTMETA):  informat 'csc'n $15.;
618         informat 'csc'n $15.;
MPRINT(IMPORTMETA):  informat 'atg'n $14.;
619         informat 'atg'n $14.;
MPRINT(IMPORTMETA):  informat 'atg_priority'n BEST32.;
620         informat 'atg_priority'n BEST32.;
MPRINT(IMPORTMETA):  informat 'procgrp_intensity'n BEST32.;
621         informat 'procgrp_intensity'n BEST32.;
MPRINT(IMPORTMETA):  informat 'hcpcs_intensity'n BEST32.;
622         informat 'hcpcs_intensity'n BEST32.;
MPRINT(IMPORTMETA):  informat 'imputed_rel_wgt'n BEST32.;
623         informat 'imputed_rel_wgt'n BEST32.;
MPRINT(IMPORTMETA):  informat 'status_ind'n $3.;
20                                       The WPS System      23:19 Friday, October 26, 2018     

624         informat 'status_ind'n $3.;
MPRINT(IMPORTMETA):  informat 'procgrp_ver'n BEST32.;
625         informat 'procgrp_ver'n BEST32.;
MPRINT(IMPORTMETA):  informat 'release'n BEST32.;
626         informat 'release'n BEST32.;
MPRINT(IMPORTMETA):  format 'HCPC'n $5.;
627         format 'HCPC'n $5.;
MPRINT(IMPORTMETA):  format 'ProcGRP'n BEST12.;
628         format 'ProcGRP'n BEST12.;
MPRINT(IMPORTMETA):  format 'csc'n $15.;
629         format 'csc'n $15.;
MPRINT(IMPORTMETA):  format 'atg'n $14.;
630         format 'atg'n $14.;
MPRINT(IMPORTMETA):  format 'atg_priority'n BEST12.;
631         format 'atg_priority'n BEST12.;
MPRINT(IMPORTMETA):  format 'procgrp_intensity'n BEST12.;
632         format 'procgrp_intensity'n BEST12.;
MPRINT(IMPORTMETA):  format 'hcpcs_intensity'n BEST12.;
633         format 'hcpcs_intensity'n BEST12.;
MPRINT(IMPORTMETA):  format 'imputed_rel_wgt'n BEST12.;
634         format 'imputed_rel_wgt'n BEST12.;
MPRINT(IMPORTMETA):  format 'status_ind'n $3.;
635         format 'status_ind'n $3.;
MPRINT(IMPORTMETA):  format 'procgrp_ver'n BEST12.;
636         format 'procgrp_ver'n BEST12.;
MPRINT(IMPORTMETA):  format 'release'n BEST12.;
637         format 'release'n BEST12.;
MPRINT(IMPORTMETA):  label 'HCPC'n = 'HCPC';
638         label 'HCPC'n = 'HCPC';
MPRINT(IMPORTMETA):  label 'ProcGRP'n = 'ProcGRP';
639         label 'ProcGRP'n = 'ProcGRP';
MPRINT(IMPORTMETA):  label 'csc'n = 'csc';
640         label 'csc'n = 'csc';
MPRINT(IMPORTMETA):  label 'atg'n = 'atg';
641         label 'atg'n = 'atg';
MPRINT(IMPORTMETA):  label 'atg_priority'n = 'atg_priority';
642         label 'atg_priority'n = 'atg_priority';
MPRINT(IMPORTMETA):  label 'procgrp_intensity'n = 'procgrp_intensity';
643         label 'procgrp_intensity'n = 'procgrp_intensity';
MPRINT(IMPORTMETA):  label 'hcpcs_intensity'n = 'hcpcs_intensity';
644         label 'hcpcs_intensity'n = 'hcpcs_intensity';
MPRINT(IMPORTMETA):  label 'imputed_rel_wgt'n = 'imputed_rel_wgt';
645         label 'imputed_rel_wgt'n = 'imputed_rel_wgt';
MPRINT(IMPORTMETA):  label 'status_ind'n = 'status_ind';
646         label 'status_ind'n = 'status_ind';
MPRINT(IMPORTMETA):  label 'procgrp_ver'n = 'procgrp_ver';
647         label 'procgrp_ver'n = 'procgrp_ver';
MPRINT(IMPORTMETA):  label 'release'n = 'release';
648         label 'release'n = 'release';
649         input    'HCPC'n $
650           'ProcGRP'n
651           'csc'n $
652           'atg'n $
21                                       The WPS System      23:19 Friday, October 26, 2018     

653           'atg_priority'n
654           'procgrp_intensity'n
655           'hcpcs_intensity'n
656           'imputed_rel_wgt'n
657           'status_ind'n $
MPRINT(IMPORTMETA):  input 'HCPC'n $   'ProcGRP'n  'csc'n $   'atg'n $   'atg_priority'n 
                     'procgrp_intensity'n  'hcpcs_intensity'n  'imputed_rel_wgt'n  'status_ind'n
                     $   'procgrp_ver'n  'release'n  ;
658           'procgrp_ver'n
659           'release'n
MPRINT(IMPORTMETA):  run;
660         ;
661         run;

NOTE: The file '/rpscan/u071439/data/HCPCcrossmapPROCGRP16r2.csv' is:
      File Name=/rpscan/u071439/data/HCPCcrossmapPROCGRP16r2.csv,
      Access Permissions=-rwxrwxr--, Number of Links=1,
      Owner Name=u071439, Group Name=devl,
      File Size=1310814, Last Modified=13:34:52 Oct 16 2018,
      Created=15:53:16 Oct 23 2018, Lrecl=32760, Recfm=V

NOTE: 19423 records were read from file '/rpscan/u071439/data/HCPCcrossmapPROCGRP16r2.csv'
      The minimum record length was 42
      The maximum record length was 82
NOTE: Data set "TEMP.HcpcXwalkGRP" has 19423 observation(s) and 11 variable(s)
NOTE: The data step took :
      real time : 0.145
      cpu time  : 0.073


MPRINT(IMPORTMETA):  FILENAME ##IMPORT CLEAR;
662       FILENAME ##IMPORT CLEAR;
MLOGIC(IMPORTMETA): Ending execution
663       *** List of DxCat and HCPC that define cancer treamtent;
664       %ImportMeta(JanetMetadata_CancerTreatment.csv,CancerTreatment);
MLOGIC(IMPORTMETA): Beginning execution
MLOGIC(IMPORTMETA): Parameter INPUTDATA has value JanetMetadata_CancerTreatment.csv
MLOGIC(IMPORTMETA): Parameter SASOUTPUT has value CancerTreatment
MLOGIC(IMPORTMETA): %IF condition &sasoutput.=SamplewClassification and &skipImport.=1  evaluate
                    d to FALSE
MPRINT(IMPORTMETA):  PROC IMPORT
                     datafile="/rpscan/u071439/data/JanetMetadata_CancerTreatment.csv"
                     out=temp.CancerTreatment replace;
MPRINT(IMPORTMETA):  getnames=YES;
MPRINT(IMPORTMETA):  guessingrows=MAX;
MPRINT(IMPORTMETA):  run;
NOTE: Procedure IMPORT step took :
      real time : 0.008
      cpu time  : 0.000


MPRINT(IMPORTMETA):  data temp.CancerTreatment;
665       data temp.CancerTreatment;
22                                       The WPS System      23:19 Friday, October 26, 2018     

MPRINT(IMPORTMETA):  infile '/rpscan/u071439/data/JanetMetadata_CancerTreatment.csv'
                     delimiter=',' MISSOVER DSD firstobs=2 LRECL=32760;
666         infile '/rpscan/u071439/data/JanetMetadata_CancerTreatment.csv' delimiter=',' MISSOV
666     ! ER DSD firstobs=2 LRECL=32760;
MPRINT(IMPORTMETA):  informat 'DxCAT'n $5.;
667         informat 'DxCAT'n $5.;
MPRINT(IMPORTMETA):  informat 'Type'n $10.;
668         informat 'Type'n $10.;
MPRINT(IMPORTMETA):  informat 'Procedure'n $6.;
669         informat 'Procedure'n $6.;
MPRINT(IMPORTMETA):  informat 'GroupDescription'n $46.;
670         informat 'GroupDescription'n $46.;
MPRINT(IMPORTMETA):  format 'DxCAT'n $5.;
671         format 'DxCAT'n $5.;
MPRINT(IMPORTMETA):  format 'Type'n $10.;
672         format 'Type'n $10.;
MPRINT(IMPORTMETA):  format 'Procedure'n $6.;
673         format 'Procedure'n $6.;
MPRINT(IMPORTMETA):  format 'GroupDescription'n $46.;
674         format 'GroupDescription'n $46.;
MPRINT(IMPORTMETA):  label 'DxCAT'n = 'DxCAT';
675         label 'DxCAT'n = 'DxCAT';
MPRINT(IMPORTMETA):  label 'Type'n = 'Type';
676         label 'Type'n = 'Type';
MPRINT(IMPORTMETA):  label 'Procedure'n = 'Procedure';
677         label 'Procedure'n = 'Procedure';
MPRINT(IMPORTMETA):  label 'GroupDescription'n = 'GroupDescription';
678         label 'GroupDescription'n = 'GroupDescription';
679         input    'DxCAT'n $
680           'Type'n $
681           'Procedure'n $
MPRINT(IMPORTMETA):  input 'DxCAT'n $   'Type'n $   'Procedure'n $   'GroupDescription'n $   ;
682           'GroupDescription'n $
MPRINT(IMPORTMETA):  run;
683         ;
684         run;

NOTE: The file '/rpscan/u071439/data/JanetMetadata_CancerTreatment.csv' is:
      File Name=/rpscan/u071439/data/JanetMetadata_CancerTreatment.csv,
      Access Permissions=-rwxrwxr--, Number of Links=1,
      Owner Name=u071439, Group Name=devl,
      File Size=7464, Last Modified=13:34:46 Oct 16 2018,
      Created=15:53:16 Oct 23 2018, Lrecl=32760, Recfm=V

NOTE: 138 records were read from file '/rpscan/u071439/data/JanetMetadata_CancerTreatment.csv'
      The minimum record length was 33
      The maximum record length was 62
NOTE: Data set "TEMP.CancerTreatment" has 138 observation(s) and 4 variable(s)
NOTE: The data step took :
      real time : 0.020
      cpu time  : 0.002


23                                       The WPS System      23:19 Friday, October 26, 2018     

MPRINT(IMPORTMETA):  FILENAME ##IMPORT CLEAR;
685       FILENAME ##IMPORT CLEAR;
MLOGIC(IMPORTMETA): Ending execution
686       *** DxCat mapping into chronic or acute;
687       %ImportMeta(JanetMetadata_GeneralAssignments.csv,GeneralAssignments);
MLOGIC(IMPORTMETA): Beginning execution
MLOGIC(IMPORTMETA): Parameter INPUTDATA has value JanetMetadata_GeneralAssignments.csv
MLOGIC(IMPORTMETA): Parameter SASOUTPUT has value GeneralAssignments
MLOGIC(IMPORTMETA): %IF condition &sasoutput.=SamplewClassification and &skipImport.=1  evaluate
                    d to FALSE
MPRINT(IMPORTMETA):  PROC IMPORT
                     datafile="/rpscan/u071439/data/JanetMetadata_GeneralAssignments.csv"
                     out=temp.GeneralAssignments replace;
MPRINT(IMPORTMETA):  getnames=YES;
MPRINT(IMPORTMETA):  guessingrows=MAX;
MPRINT(IMPORTMETA):  run;
NOTE: Procedure IMPORT step took :
      real time : 0.009
      cpu time  : 0.001


MPRINT(IMPORTMETA):  data temp.GeneralAssignments;
688       data temp.GeneralAssignments;
MPRINT(IMPORTMETA):  infile '/rpscan/u071439/data/JanetMetadata_GeneralAssignments.csv'
                     delimiter=',' MISSOVER DSD firstobs=2 LRECL=32760;
689         infile '/rpscan/u071439/data/JanetMetadata_GeneralAssignments.csv' delimiter=',' MIS
689     ! SOVER DSD firstobs=2 LRECL=32760;
MPRINT(IMPORTMETA):  informat 'DxCat'n $5.;
690         informat 'DxCat'n $5.;
MPRINT(IMPORTMETA):  informat 'Description'n $77.;
691         informat 'Description'n $77.;
MPRINT(IMPORTMETA):  informat 'Category'n $7.;
692         informat 'Category'n $7.;
MPRINT(IMPORTMETA):  format 'DxCat'n $5.;
693         format 'DxCat'n $5.;
MPRINT(IMPORTMETA):  format 'Description'n $77.;
694         format 'Description'n $77.;
MPRINT(IMPORTMETA):  format 'Category'n $7.;
695         format 'Category'n $7.;
MPRINT(IMPORTMETA):  label 'DxCat'n = 'DxCat';
696         label 'DxCat'n = 'DxCat';
MPRINT(IMPORTMETA):  label 'Description'n = 'Description';
697         label 'Description'n = 'Description';
MPRINT(IMPORTMETA):  label 'Category'n = 'Category';
698         label 'Category'n = 'Category';
699         input    'DxCat'n $
700           'Description'n $
MPRINT(IMPORTMETA):  input 'DxCat'n $   'Description'n $   'Category'n $   ;
701           'Category'n $
MPRINT(IMPORTMETA):  run;
702         ;
703         run;

24                                       The WPS System      23:19 Friday, October 26, 2018     

NOTE: The file '/rpscan/u071439/data/JanetMetadata_GeneralAssignments.csv' is:
      File Name=/rpscan/u071439/data/JanetMetadata_GeneralAssignments.csv,
      Access Permissions=-rwxrwxr--, Number of Links=1,
      Owner Name=u071439, Group Name=devl,
      File Size=24670, Last Modified=13:34:46 Oct 16 2018,
      Created=15:53:16 Oct 23 2018, Lrecl=32760, Recfm=V

NOTE: 565 records were read from file
      '/rpscan/u071439/data/JanetMetadata_GeneralAssignments.csv'
      The minimum record length was 17
      The maximum record length was 76
NOTE: Data set "TEMP.GeneralAssignments" has 565 observation(s) and 3 variable(s)
NOTE: The data step took :
      real time : 0.021
      cpu time  : 0.003


MPRINT(IMPORTMETA):  FILENAME ##IMPORT CLEAR;
704       FILENAME ##IMPORT CLEAR;
MLOGIC(IMPORTMETA): Ending execution
705       *** Import the Mapping of Procedure Group (OPEG) to ATG;
706       %ImportMeta(FromOPEG_ProcedureGroup_lookup_v2015_2.csv,OPEGLookup);
MLOGIC(IMPORTMETA): Beginning execution
MLOGIC(IMPORTMETA): Parameter INPUTDATA has value FromOPEG_ProcedureGroup_lookup_v2015_2.csv
MLOGIC(IMPORTMETA): Parameter SASOUTPUT has value OPEGLookup
MLOGIC(IMPORTMETA): %IF condition &sasoutput.=SamplewClassification and &skipImport.=1  evaluate
                    d to FALSE
MPRINT(IMPORTMETA):  PROC IMPORT
                     datafile="/rpscan/u071439/data/FromOPEG_ProcedureGroup_lookup_v2015_2.csv"
                     out=temp.OPEGLookup replace;
MPRINT(IMPORTMETA):  getnames=YES;
MPRINT(IMPORTMETA):  guessingrows=MAX;
MPRINT(IMPORTMETA):  run;
NOTE: Procedure IMPORT step took :
      real time : 0.152
      cpu time  : 0.083


MPRINT(IMPORTMETA):  data temp.OPEGLookup;
707       data temp.OPEGLookup;
MPRINT(IMPORTMETA):  infile '/rpscan/u071439/data/FromOPEG_ProcedureGroup_lookup_v2015_2.csv'
                     delimiter=',' MISSOVER DSD firstobs=2 LRECL=32760;
708         infile '/rpscan/u071439/data/FromOPEG_ProcedureGroup_lookup_v2015_2.csv' delimiter='
708     ! ,' MISSOVER DSD firstobs=2 LRECL=32760;
MPRINT(IMPORTMETA):  informat 'ProcedureName'n $51.;
709         informat 'ProcedureName'n $51.;
MPRINT(IMPORTMETA):  informat 'ProcedureGroup'n BEST32.;
710         informat 'ProcedureGroup'n BEST32.;
MPRINT(IMPORTMETA):  informat 'atg'n $12.;
711         informat 'atg'n $12.;
MPRINT(IMPORTMETA):  informat 'acg'n $15.;
712         informat 'acg'n $15.;
MPRINT(IMPORTMETA):  informat 'hcpcs'n $5.;
25                                       The WPS System      23:19 Friday, October 26, 2018     

713         informat 'hcpcs'n $5.;
MPRINT(IMPORTMETA):  informat 'cpttitle'n $128.;
714         informat 'cpttitle'n $128.;
MPRINT(IMPORTMETA):  format 'ProcedureName'n $51.;
715         format 'ProcedureName'n $51.;
MPRINT(IMPORTMETA):  format 'ProcedureGroup'n BEST12.;
716         format 'ProcedureGroup'n BEST12.;
MPRINT(IMPORTMETA):  format 'atg'n $12.;
717         format 'atg'n $12.;
MPRINT(IMPORTMETA):  format 'acg'n $15.;
718         format 'acg'n $15.;
MPRINT(IMPORTMETA):  format 'hcpcs'n $5.;
719         format 'hcpcs'n $5.;
MPRINT(IMPORTMETA):  format 'cpttitle'n $128.;
720         format 'cpttitle'n $128.;
MPRINT(IMPORTMETA):  label 'ProcedureName'n = 'ProcedureName';
721         label 'ProcedureName'n = 'ProcedureName';
MPRINT(IMPORTMETA):  label 'ProcedureGroup'n = 'ProcedureGroup';
722         label 'ProcedureGroup'n = 'ProcedureGroup';
MPRINT(IMPORTMETA):  label 'atg'n = 'atg';
723         label 'atg'n = 'atg';
MPRINT(IMPORTMETA):  label 'acg'n = 'acg';
724         label 'acg'n = 'acg';
MPRINT(IMPORTMETA):  label 'hcpcs'n = 'hcpcs';
725         label 'hcpcs'n = 'hcpcs';
MPRINT(IMPORTMETA):  label 'cpttitle'n = 'cpttitle';
726         label 'cpttitle'n = 'cpttitle';
727         input    'ProcedureName'n $
728           'ProcedureGroup'n
729           'atg'n $
730           'acg'n $
731           'hcpcs'n $
MPRINT(IMPORTMETA):  input 'ProcedureName'n $   'ProcedureGroup'n  'atg'n $   'acg'n $  
                     'hcpcs'n $   'cpttitle'n $   ;
732           'cpttitle'n $
MPRINT(IMPORTMETA):  run;
733         ;
734         run;

NOTE: The file '/rpscan/u071439/data/FromOPEG_ProcedureGroup_lookup_v2015_2.csv' is:
      File Name=/rpscan/u071439/data/FromOPEG_ProcedureGroup_lookup_v2015_2.csv,
      Access Permissions=-rwxrwxr--, Number of Links=1,
      Owner Name=u071439, Group Name=devl,
      File Size=1972727, Last Modified=13:34:53 Oct 16 2018,
      Created=15:53:16 Oct 23 2018, Lrecl=32760, Recfm=V

NOTE: 18957 records were read from file
      '/rpscan/u071439/data/FromOPEG_ProcedureGroup_lookup_v2015_2.csv'
      The minimum record length was 50
      The maximum record length was 178
NOTE: Data set "TEMP.OPEGLookup" has 18957 observation(s) and 6 variable(s)
NOTE: The data step took :
      real time : 0.106
26                                       The WPS System      23:19 Friday, October 26, 2018     

      cpu time  : 0.049


MPRINT(IMPORTMETA):  FILENAME ##IMPORT CLEAR;
735       FILENAME ##IMPORT CLEAR;
MLOGIC(IMPORTMETA): Ending execution
736       *** Import the Mapping from DxCat to Significant Conditions;
737       %ImportMeta(JanetMetadata_SignificantConditions.csv,SignificantConditions);
MLOGIC(IMPORTMETA): Beginning execution
MLOGIC(IMPORTMETA): Parameter INPUTDATA has value JanetMetadata_SignificantConditions.csv
MLOGIC(IMPORTMETA): Parameter SASOUTPUT has value SignificantConditions
MLOGIC(IMPORTMETA): %IF condition &sasoutput.=SamplewClassification and &skipImport.=1  evaluate
                    d to FALSE
MPRINT(IMPORTMETA):  PROC IMPORT
                     datafile="/rpscan/u071439/data/JanetMetadata_SignificantConditions.csv"
                     out=temp.SignificantConditions replace;
MPRINT(IMPORTMETA):  getnames=YES;
MPRINT(IMPORTMETA):  guessingrows=MAX;
MPRINT(IMPORTMETA):  run;
NOTE: Procedure IMPORT step took :
      real time : 0.008
      cpu time  : 0.001


MPRINT(IMPORTMETA):  data temp.SignificantConditions;
738       data temp.SignificantConditions;
MPRINT(IMPORTMETA):  infile '/rpscan/u071439/data/JanetMetadata_SignificantConditions.csv'
                     delimiter=',' MISSOVER DSD firstobs=2 LRECL=32760;
739         infile '/rpscan/u071439/data/JanetMetadata_SignificantConditions.csv' delimiter=',' 
739     ! MISSOVER DSD firstobs=2 LRECL=32760;
MPRINT(IMPORTMETA):  informat 'DxCat'n $5.;
740         informat 'DxCat'n $5.;
MPRINT(IMPORTMETA):  informat 'Description'n $77.;
741         informat 'Description'n $77.;
MPRINT(IMPORTMETA):  informat 'Significance'n $4.;
742         informat 'Significance'n $4.;
MPRINT(IMPORTMETA):  format 'DxCat'n $5.;
743         format 'DxCat'n $5.;
MPRINT(IMPORTMETA):  format 'Description'n $77.;
744         format 'Description'n $77.;
MPRINT(IMPORTMETA):  format 'Significance'n $4.;
745         format 'Significance'n $4.;
MPRINT(IMPORTMETA):  label 'DxCat'n = 'DxCat';
746         label 'DxCat'n = 'DxCat';
MPRINT(IMPORTMETA):  label 'Description'n = 'Description';
747         label 'Description'n = 'Description';
MPRINT(IMPORTMETA):  label 'Significance'n = 'Significance';
748         label 'Significance'n = 'Significance';
749         input    'DxCat'n $
750           'Description'n $
MPRINT(IMPORTMETA):  input 'DxCat'n $   'Description'n $   'Significance'n $   ;
751           'Significance'n $
MPRINT(IMPORTMETA):  run;
27                                       The WPS System      23:19 Friday, October 26, 2018     

752         ;
753         run;

NOTE: The file '/rpscan/u071439/data/JanetMetadata_SignificantConditions.csv' is:
      File Name=/rpscan/u071439/data/JanetMetadata_SignificantConditions.csv,
      Access Permissions=-rwxrwxr--, Number of Links=1,
      Owner Name=u071439, Group Name=devl,
      File Size=12700, Last Modified=13:34:46 Oct 16 2018,
      Created=15:53:15 Oct 23 2018, Lrecl=32760, Recfm=V

NOTE: 296 records were read from file
      '/rpscan/u071439/data/JanetMetadata_SignificantConditions.csv'
      The minimum record length was 15
      The maximum record length was 73
NOTE: Data set "TEMP.SignificantConditions" has 296 observation(s) and 3 variable(s)
NOTE: The data step took :
      real time : 0.019
      cpu time  : 0.002


MPRINT(IMPORTMETA):  FILENAME ##IMPORT CLEAR;
754       FILENAME ##IMPORT CLEAR;
MLOGIC(IMPORTMETA): Ending execution
755       *** Import the Maintenance Drugs List;
756       %ImportMeta(JanetMetadata_MaintenanceDrugs.csv,ChronicRx);
MLOGIC(IMPORTMETA): Beginning execution
MLOGIC(IMPORTMETA): Parameter INPUTDATA has value JanetMetadata_MaintenanceDrugs.csv
MLOGIC(IMPORTMETA): Parameter SASOUTPUT has value ChronicRx
MLOGIC(IMPORTMETA): %IF condition &sasoutput.=SamplewClassification and &skipImport.=1  evaluate
                    d to FALSE
MPRINT(IMPORTMETA):  PROC IMPORT
                     datafile="/rpscan/u071439/data/JanetMetadata_MaintenanceDrugs.csv"
                     out=temp.ChronicRx replace;
MPRINT(IMPORTMETA):  getnames=YES;
MPRINT(IMPORTMETA):  guessingrows=MAX;
MPRINT(IMPORTMETA):  run;
NOTE: Procedure IMPORT step took :
      real time : 0.263
      cpu time  : 0.143


MPRINT(IMPORTMETA):  data temp.ChronicRx;
757       data temp.ChronicRx;
MPRINT(IMPORTMETA):  infile '/rpscan/u071439/data/JanetMetadata_MaintenanceDrugs.csv'
                     delimiter=',' MISSOVER DSD firstobs=2 LRECL=32760;
758         infile '/rpscan/u071439/data/JanetMetadata_MaintenanceDrugs.csv' delimiter=',' MISSO
758     ! VER DSD firstobs=2 LRECL=32760;
MPRINT(IMPORTMETA):  informat 'NDCNUM'n BEST32.;
759         informat 'NDCNUM'n BEST32.;
MPRINT(IMPORTMETA):  informat 'GENERID'n BEST32.;
760         informat 'GENERID'n BEST32.;
MPRINT(IMPORTMETA):  informat 'Prodname'n $64.;
761         informat 'Prodname'n $64.;
28                                       The WPS System      23:19 Friday, October 26, 2018     

MPRINT(IMPORTMETA):  informat 'Category'n $11.;
762         informat 'Category'n $11.;
MPRINT(IMPORTMETA):  format 'NDCNUM'n BEST12.;
763         format 'NDCNUM'n BEST12.;
MPRINT(IMPORTMETA):  format 'GENERID'n BEST12.;
764         format 'GENERID'n BEST12.;
MPRINT(IMPORTMETA):  format 'Prodname'n $64.;
765         format 'Prodname'n $64.;
MPRINT(IMPORTMETA):  format 'Category'n $11.;
766         format 'Category'n $11.;
MPRINT(IMPORTMETA):  label 'NDCNUM'n = 'NDCNUM';
767         label 'NDCNUM'n = 'NDCNUM';
MPRINT(IMPORTMETA):  label 'GENERID'n = 'GENERID';
768         label 'GENERID'n = 'GENERID';
MPRINT(IMPORTMETA):  label 'Prodname'n = 'Prodname';
769         label 'Prodname'n = 'Prodname';
MPRINT(IMPORTMETA):  label 'Category'n = 'Category';
770         label 'Category'n = 'Category';
771         input    'NDCNUM'n
772           'GENERID'n
773           'Prodname'n $
MPRINT(IMPORTMETA):  input 'NDCNUM'n  'GENERID'n  'Prodname'n $   'Category'n $   ;
774           'Category'n $
MPRINT(IMPORTMETA):  run;
775         ;
776         run;

NOTE: The file '/rpscan/u071439/data/JanetMetadata_MaintenanceDrugs.csv' is:
      File Name=/rpscan/u071439/data/JanetMetadata_MaintenanceDrugs.csv,
      Access Permissions=-rwxrwxr--, Number of Links=1,
      Owner Name=u071439, Group Name=devl,
      File Size=2737869, Last Modified=13:34:54 Oct 16 2018,
      Created=15:53:16 Oct 23 2018, Lrecl=32760, Recfm=V

NOTE: 58539 records were read from file
      '/rpscan/u071439/data/JanetMetadata_MaintenanceDrugs.csv'
      The minimum record length was 33
      The maximum record length was 81
NOTE: Data set "TEMP.ChronicRx" has 58539 observation(s) and 4 variable(s)
NOTE: The data step took :
      real time : 0.223
      cpu time  : 0.121


MPRINT(IMPORTMETA):  FILENAME ##IMPORT CLEAR;
777       FILENAME ##IMPORT CLEAR;
MLOGIC(IMPORTMETA): Ending execution
778       *** Import the mapping to Body Systems List;
779       %ImportMeta(JanetMetadata_BodySystem.csv,BodySystem);
MLOGIC(IMPORTMETA): Beginning execution
MLOGIC(IMPORTMETA): Parameter INPUTDATA has value JanetMetadata_BodySystem.csv
MLOGIC(IMPORTMETA): Parameter SASOUTPUT has value BodySystem
MLOGIC(IMPORTMETA): %IF condition &sasoutput.=SamplewClassification and &skipImport.=1  evaluate
29                                       The WPS System      23:19 Friday, October 26, 2018     

                    d to FALSE
MPRINT(IMPORTMETA):  PROC IMPORT datafile="/rpscan/u071439/data/JanetMetadata_BodySystem.csv"
                     out=temp.BodySystem replace;
MPRINT(IMPORTMETA):  getnames=YES;
MPRINT(IMPORTMETA):  guessingrows=MAX;
MPRINT(IMPORTMETA):  run;
NOTE: Procedure IMPORT step took :
      real time : 0.010
      cpu time  : 0.001


MPRINT(IMPORTMETA):  data temp.BodySystem;
780       data temp.BodySystem;
MPRINT(IMPORTMETA):  infile '/rpscan/u071439/data/JanetMetadata_BodySystem.csv' delimiter=','
                     MISSOVER DSD firstobs=2 LRECL=32760;
781         infile '/rpscan/u071439/data/JanetMetadata_BodySystem.csv' delimiter=',' MISSOVER DS
781     ! D firstobs=2 LRECL=32760;
MPRINT(IMPORTMETA):  informat 'DxCat'n $5.;
782         informat 'DxCat'n $5.;
MPRINT(IMPORTMETA):  informat 'Description'n $77.;
783         informat 'Description'n $77.;
MPRINT(IMPORTMETA):  informat 'Body'n BEST32.;
784         informat 'Body'n BEST32.;
MPRINT(IMPORTMETA):  informat 'BodyDescription'n $40.;
785         informat 'BodyDescription'n $40.;
MPRINT(IMPORTMETA):  format 'DxCat'n $5.;
786         format 'DxCat'n $5.;
MPRINT(IMPORTMETA):  format 'Description'n $77.;
787         format 'Description'n $77.;
MPRINT(IMPORTMETA):  format 'Body'n BEST12.;
788         format 'Body'n BEST12.;
MPRINT(IMPORTMETA):  format 'BodyDescription'n $40.;
789         format 'BodyDescription'n $40.;
MPRINT(IMPORTMETA):  label 'DxCat'n = 'DxCat';
790         label 'DxCat'n = 'DxCat';
MPRINT(IMPORTMETA):  label 'Description'n = 'Description';
791         label 'Description'n = 'Description';
MPRINT(IMPORTMETA):  label 'Body'n = 'Body';
792         label 'Body'n = 'Body';
MPRINT(IMPORTMETA):  label 'BodyDescription'n = 'BodyDescription';
793         label 'BodyDescription'n = 'BodyDescription';
794         input    'DxCat'n $
795           'Description'n $
796           'Body'n
MPRINT(IMPORTMETA):  input 'DxCat'n $   'Description'n $   'Body'n  'BodyDescription'n $   ;
797           'BodyDescription'n $
MPRINT(IMPORTMETA):  run;
798         ;
799         run;

NOTE: The file '/rpscan/u071439/data/JanetMetadata_BodySystem.csv' is:
      File Name=/rpscan/u071439/data/JanetMetadata_BodySystem.csv,
      Access Permissions=-rwxrwxr--, Number of Links=1,
30                                       The WPS System      23:19 Friday, October 26, 2018     

      Owner Name=u071439, Group Name=devl,
      File Size=28046, Last Modified=13:34:46 Oct 16 2018,
      Created=15:53:16 Oct 23 2018, Lrecl=32760, Recfm=V

NOTE: 565 records were read from file '/rpscan/u071439/data/JanetMetadata_BodySystem.csv'
      The minimum record length was 18
      The maximum record length was 89
NOTE: Data set "TEMP.BodySystem" has 565 observation(s) and 4 variable(s)
NOTE: The data step took :
      real time : 0.027
      cpu time  : 0.003


MPRINT(IMPORTMETA):  FILENAME ##IMPORT CLEAR;
800       FILENAME ##IMPORT CLEAR;
MLOGIC(IMPORTMETA): Ending execution
801       *** Import the list of conditions for Treatment Navigation logic;
802       %ImportMeta(JanetMetadata_TreatmentNavigation.csv,TreatmentNavigation);
MLOGIC(IMPORTMETA): Beginning execution
MLOGIC(IMPORTMETA): Parameter INPUTDATA has value JanetMetadata_TreatmentNavigation.csv
MLOGIC(IMPORTMETA): Parameter SASOUTPUT has value TreatmentNavigation
MLOGIC(IMPORTMETA): %IF condition &sasoutput.=SamplewClassification and &skipImport.=1  evaluate
                    d to FALSE
MPRINT(IMPORTMETA):  PROC IMPORT
                     datafile="/rpscan/u071439/data/JanetMetadata_TreatmentNavigation.csv"
                     out=temp.TreatmentNavigation replace;
MPRINT(IMPORTMETA):  getnames=YES;
MPRINT(IMPORTMETA):  guessingrows=MAX;
MPRINT(IMPORTMETA):  run;
NOTE: Procedure IMPORT step took :
      real time : 0.006
      cpu time  : 0.000


MPRINT(IMPORTMETA):  data temp.TreatmentNavigation;
803       data temp.TreatmentNavigation;
MPRINT(IMPORTMETA):  infile '/rpscan/u071439/data/JanetMetadata_TreatmentNavigation.csv'
                     delimiter=',' MISSOVER DSD firstobs=2 LRECL=32760;
804         infile '/rpscan/u071439/data/JanetMetadata_TreatmentNavigation.csv' delimiter=',' MI
804     ! SSOVER DSD firstobs=2 LRECL=32760;
MPRINT(IMPORTMETA):  informat 'Condition'n $36.;
805         informat 'Condition'n $36.;
MPRINT(IMPORTMETA):  informat 'DxCat'n $5.;
806         informat 'DxCat'n $5.;
MPRINT(IMPORTMETA):  informat 'Stage'n BEST32.;
807         informat 'Stage'n BEST32.;
MPRINT(IMPORTMETA):  format 'Condition'n $36.;
808         format 'Condition'n $36.;
MPRINT(IMPORTMETA):  format 'DxCat'n $5.;
809         format 'DxCat'n $5.;
MPRINT(IMPORTMETA):  format 'Stage'n BEST12.;
810         format 'Stage'n BEST12.;
MPRINT(IMPORTMETA):  label 'Condition'n = 'Condition';
31                                       The WPS System      23:19 Friday, October 26, 2018     

811         label 'Condition'n = 'Condition';
MPRINT(IMPORTMETA):  label 'DxCat'n = 'DxCat';
812         label 'DxCat'n = 'DxCat';
MPRINT(IMPORTMETA):  label 'Stage'n = 'Stage';
813         label 'Stage'n = 'Stage';
814         input    'Condition'n $
MPRINT(IMPORTMETA):  input 'Condition'n $   'DxCat'n $   'Stage'n  ;
815           'DxCat'n $
816           'Stage'n
MPRINT(IMPORTMETA):  run;
817         ;
818         run;

NOTE: The file '/rpscan/u071439/data/JanetMetadata_TreatmentNavigation.csv' is:
      File Name=/rpscan/u071439/data/JanetMetadata_TreatmentNavigation.csv,
      Access Permissions=-rwxrwxr--, Number of Links=1,
      Owner Name=u071439, Group Name=devl,
      File Size=981, Last Modified=13:34:46 Oct 16 2018,
      Created=15:53:13 Oct 23 2018, Lrecl=32760, Recfm=V

NOTE: 31 records were read from file
      '/rpscan/u071439/data/JanetMetadata_TreatmentNavigation.csv'
      The minimum record length was 14
      The maximum record length was 39
NOTE: Data set "TEMP.TreatmentNavigation" has 31 observation(s) and 3 variable(s)
NOTE: The data step took :
      real time : 0.048
      cpu time  : 0.001


MPRINT(IMPORTMETA):  FILENAME ##IMPORT CLEAR;
819       FILENAME ##IMPORT CLEAR;
MLOGIC(IMPORTMETA): Ending execution
820       *** Import the list of DxCats for general active cancer for Surveillance logic;
821       %ImportMeta(JanetMetadata_SurveillanceGeneralActiveCancerDxCat.csv,SurvGeneralActiveCa
821     ! ncerDxCat);
MLOGIC(IMPORTMETA): Beginning execution
MLOGIC(IMPORTMETA): Parameter INPUTDATA has value JanetMetadata_SurveillanceGeneralActiveCancerD
                    xCat.csv
MLOGIC(IMPORTMETA): Parameter SASOUTPUT has value SurvGeneralActiveCancerDxCat
MLOGIC(IMPORTMETA): %IF condition &sasoutput.=SamplewClassification and &skipImport.=1  evaluate
                    d to FALSE
MPRINT(IMPORTMETA):  PROC IMPORT
                     datafile="/rpscan/u071439/data/JanetMetadata_SurveillanceGeneralActiveCance
                     rDxCat.csv" out=temp.SurvGeneralActiveCancerDxCat replace;
MPRINT(IMPORTMETA):  getnames=YES;
MPRINT(IMPORTMETA):  guessingrows=MAX;
MPRINT(IMPORTMETA):  run;
NOTE: Procedure IMPORT step took :
      real time : 0.010
      cpu time  : 0.000


32                                       The WPS System      23:19 Friday, October 26, 2018     

MPRINT(IMPORTMETA):  data temp.SurvGeneralActiveCancerDxCat;
822       data temp.SurvGeneralActiveCancerDxCat;
MPRINT(IMPORTMETA):  infile
                     '/rpscan/u071439/data/JanetMetadata_SurveillanceGeneralActiveCancerDxCat.cs
                     v' delimiter=',' MISSOVER DSD firstobs=2 LRECL=32760;
823         infile '/rpscan/u071439/data/JanetMetadata_SurveillanceGeneralActiveCancerDxCat.csv'
823     !  delimiter=',' MISSOVER DSD firstobs=2 LRECL=32760;
MPRINT(IMPORTMETA):  informat 'Type'n $2.;
824         informat 'Type'n $2.;
MPRINT(IMPORTMETA):  informat 'DxCat'n $5.;
825         informat 'DxCat'n $5.;
MPRINT(IMPORTMETA):  informat 'Description'n $74.;
826         informat 'Description'n $74.;
MPRINT(IMPORTMETA):  format 'Type'n $2.;
827         format 'Type'n $2.;
MPRINT(IMPORTMETA):  format 'DxCat'n $5.;
828         format 'DxCat'n $5.;
MPRINT(IMPORTMETA):  format 'Description'n $74.;
829         format 'Description'n $74.;
MPRINT(IMPORTMETA):  label 'Type'n = 'Type';
830         label 'Type'n = 'Type';
MPRINT(IMPORTMETA):  label 'DxCat'n = 'DxCat';
831         label 'DxCat'n = 'DxCat';
MPRINT(IMPORTMETA):  label 'Description'n = 'Description';
832         label 'Description'n = 'Description';
833         input    'Type'n $
834           'DxCat'n $
MPRINT(IMPORTMETA):  input 'Type'n $   'DxCat'n $   'Description'n $   ;
835           'Description'n $
MPRINT(IMPORTMETA):  run;
836         ;
837         run;

NOTE: The file '/rpscan/u071439/data/JanetMetadata_SurveillanceGeneralActiveCancerDxCat.csv'
      is:
      File Name=/rpscan/u071439/data/JanetMetadata_SurveillanceGeneralActiveCancerDxCat.csv,
      Access Permissions=-rwxrwxr--, Number of Links=1,
      Owner Name=u071439, Group Name=devl,
      File Size=4152, Last Modified=13:34:46 Oct 16 2018,
      Created=15:53:14 Oct 23 2018, Lrecl=32760, Recfm=V

NOTE: 77 records were read from file
      '/rpscan/u071439/data/JanetMetadata_SurveillanceGeneralActiveCancerDxCat.csv'
      The minimum record length was 27
      The maximum record length was 71
NOTE: Data set "TEMP.SurvGeneralActiveCancerDxCat" has 77 observation(s) and 3 variable(s)
NOTE: The data step took :
      real time : 0.043
      cpu time  : 0.002


MPRINT(IMPORTMETA):  FILENAME ##IMPORT CLEAR;
838       FILENAME ##IMPORT CLEAR;
33                                       The WPS System      23:19 Friday, October 26, 2018     

MLOGIC(IMPORTMETA): Ending execution
839       *** Import the list of PROCGRP for general active cancer for Surveillance logic;
840       %ImportMeta(JanetMetadata_SurveillanceGeneralActiveCancerPROCGRP.csv,SurvGeneralActive
840     ! CancerPROCGRP);
MLOGIC(IMPORTMETA): Beginning execution
MLOGIC(IMPORTMETA): Parameter INPUTDATA has value JanetMetadata_SurveillanceGeneralActiveCancerP
                    ROCGRP.csv
MLOGIC(IMPORTMETA): Parameter SASOUTPUT has value SurvGeneralActiveCancerPROCGRP
MLOGIC(IMPORTMETA): %IF condition &sasoutput.=SamplewClassification and &skipImport.=1  evaluate
                    d to FALSE
MPRINT(IMPORTMETA):  PROC IMPORT
                     datafile="/rpscan/u071439/data/JanetMetadata_SurveillanceGeneralActiveCance
                     rPROCGRP.csv" out=temp.SurvGeneralActiveCancerPROCGRP replace;
MPRINT(IMPORTMETA):  getnames=YES;
MPRINT(IMPORTMETA):  guessingrows=MAX;
MPRINT(IMPORTMETA):  run;
NOTE: Procedure IMPORT step took :
      real time : 0.001
      cpu time  : 0.000


MPRINT(IMPORTMETA):  data temp.SurvGeneralActiveCancerPROCGRP;
841       data temp.SurvGeneralActiveCancerPROCGRP;
MPRINT(IMPORTMETA):  infile
                     '/rpscan/u071439/data/JanetMetadata_SurveillanceGeneralActiveCancerPROCGRP.
                     csv' delimiter=',' MISSOVER DSD firstobs=2 LRECL=32760;
842         infile '/rpscan/u071439/data/JanetMetadata_SurveillanceGeneralActiveCancerPROCGRP.cs
842     ! v' delimiter=',' MISSOVER DSD firstobs=2 LRECL=32760;
MPRINT(IMPORTMETA):  informat 'PROCGRP'n BEST32.;
843         informat 'PROCGRP'n BEST32.;
MPRINT(IMPORTMETA):  informat 'Description'n $46.;
844         informat 'Description'n $46.;
MPRINT(IMPORTMETA):  format 'PROCGRP'n BEST12.;
845         format 'PROCGRP'n BEST12.;
MPRINT(IMPORTMETA):  format 'Description'n $46.;
846         format 'Description'n $46.;
MPRINT(IMPORTMETA):  label 'PROCGRP'n = 'PROCGRP';
847         label 'PROCGRP'n = 'PROCGRP';
MPRINT(IMPORTMETA):  label 'Description'n = 'Description';
848         label 'Description'n = 'Description';
849         input    'PROCGRP'n
MPRINT(IMPORTMETA):  input 'PROCGRP'n  'Description'n $   ;
850           'Description'n $
MPRINT(IMPORTMETA):  run;
851         ;
852         run;

NOTE: The file '/rpscan/u071439/data/JanetMetadata_SurveillanceGeneralActiveCancerPROCGRP.csv'
      is:
      File Name=/rpscan/u071439/data/JanetMetadata_SurveillanceGeneralActiveCancerPROCGRP.csv,
      Access Permissions=-rwxrwxr--, Number of Links=1,
      Owner Name=u071439, Group Name=devl,
      File Size=952, Last Modified=13:34:46 Oct 16 2018,
34                                       The WPS System      23:19 Friday, October 26, 2018     

      Created=15:53:14 Oct 23 2018, Lrecl=32760, Recfm=V

NOTE: 25 records were read from file
      '/rpscan/u071439/data/JanetMetadata_SurveillanceGeneralActiveCancerPROCGRP.csv'
      The minimum record length was 19
      The maximum record length was 45
NOTE: Data set "TEMP.SurvGeneralActiveCancerPROCGRP" has 25 observation(s) and 2 variable(s)
NOTE: The data step took :
      real time : 0.028
      cpu time  : 0.001


MPRINT(IMPORTMETA):  FILENAME ##IMPORT CLEAR;
853       FILENAME ##IMPORT CLEAR;
MLOGIC(IMPORTMETA): Ending execution
854       
855       
856       *** Modified ;
857       *** Import the list of PROCGRP for specific active cancer for Surveillance logic;
858       *** %ImportMeta(JanetMetadata_SurveillanceSpecificActiveCancer.csv,SurvSpecificActiveC
858     ! ancer);
859       *** line 144 - Q2043;
860       data  temp.SurvSpecificActiveCancer;
861       infile '/rpscan/u071439/data/JanetMetadata_SurveillanceSpecificActiveCancer.csv' delim
861     ! iter=',' MISSOVER DSD firstobs=2 LRECL=32760;
862       informat 'DxCat'n $5.;
863       informat 'DxCatDesc'n $75.;
864       informat 'PROCGRP'n BEST32.;
865       informat 'Procedure_group'n $51.;
866       informat 'stage'n BEST32.;
867       format 'DxCat'n $5.;
868       format 'DxCatDesc'n $75.;
869       format 'PROCGRP'n BEST12.;
870       format 'Procedure_group'n $51.;
871       format 'stage'n BEST12.;
872       label 'DxCat'n = 'DxCat';
873       label 'DxCatDesc'n = 'DxCatDesc';
874       label 'PROCGRP'n = 'PROCGRP';
875       label 'Procedure_group'n = 'Procedure group';
876       label 'stage'n = 'stage';
877       input    'DxCat'n $
878       'DxCatDesc'n $
879       'PROCGRP'n
880       'Procedure_group'n $
881       'stage'n;
882       run;

NOTE: The file '/rpscan/u071439/data/JanetMetadata_SurveillanceSpecificActiveCancer.csv' is:
      File Name=/rpscan/u071439/data/JanetMetadata_SurveillanceSpecificActiveCancer.csv,
      Access Permissions=-rwxrwxr--, Number of Links=1,
      Owner Name=u071439, Group Name=devl,
      File Size=12684, Last Modified=14:04:35 Oct 23 2018,
      Created=15:53:13 Oct 23 2018, Lrecl=32760, Recfm=V
35                                       The WPS System      23:19 Friday, October 26, 2018     


NOTE: 157 records were read from file
      '/rpscan/u071439/data/JanetMetadata_SurveillanceSpecificActiveCancer.csv'
      The minimum record length was 35
      The maximum record length was 100
NOTE: Data set "TEMP.SurvSpecificActiveCancer" has 157 observation(s) and 5 variable(s)
NOTE: The data step took :
      real time : 0.024
      cpu time  : 0.002


883       
884       
885       *** Import the list of PROCGRP for miscellaneous for Surveillance logic;
886       %ImportMeta(JanetMetadata_SurveillanceMiscellaneous.csv,SurvMiscellaneous);
MLOGIC(IMPORTMETA): Beginning execution
MLOGIC(IMPORTMETA): Parameter INPUTDATA has value JanetMetadata_SurveillanceMiscellaneous.csv
MLOGIC(IMPORTMETA): Parameter SASOUTPUT has value SurvMiscellaneous
MLOGIC(IMPORTMETA): %IF condition &sasoutput.=SamplewClassification and &skipImport.=1  evaluate
                    d to FALSE
MPRINT(IMPORTMETA):  PROC IMPORT
                     datafile="/rpscan/u071439/data/JanetMetadata_SurveillanceMiscellaneous.csv"
                     out=temp.SurvMiscellaneous replace;
MPRINT(IMPORTMETA):  getnames=YES;
MPRINT(IMPORTMETA):  guessingrows=MAX;
MPRINT(IMPORTMETA):  run;
NOTE: Procedure IMPORT step took :
      real time : 0.006
      cpu time  : 0.000


MPRINT(IMPORTMETA):  data temp.SurvMiscellaneous;
887       data temp.SurvMiscellaneous;
MPRINT(IMPORTMETA):  infile '/rpscan/u071439/data/JanetMetadata_SurveillanceMiscellaneous.csv'
                     delimiter=',' MISSOVER DSD firstobs=2 LRECL=32760;
888         infile '/rpscan/u071439/data/JanetMetadata_SurveillanceMiscellaneous.csv' delimiter=
888     ! ',' MISSOVER DSD firstobs=2 LRECL=32760;
MPRINT(IMPORTMETA):  informat 'CodeType'n $3.;
889         informat 'CodeType'n $3.;
MPRINT(IMPORTMETA):  informat 'Code'n BEST32.;
890         informat 'Code'n BEST32.;
MPRINT(IMPORTMETA):  informat 'Description'n $48.;
891         informat 'Description'n $48.;
MPRINT(IMPORTMETA):  format 'CodeType'n $3.;
892         format 'CodeType'n $3.;
MPRINT(IMPORTMETA):  format 'Code'n BEST12.;
893         format 'Code'n BEST12.;
MPRINT(IMPORTMETA):  format 'Description'n $48.;
894         format 'Description'n $48.;
MPRINT(IMPORTMETA):  label 'CodeType'n = 'CodeType';
895         label 'CodeType'n = 'CodeType';
MPRINT(IMPORTMETA):  label 'Code'n = 'Code';
896         label 'Code'n = 'Code';
36                                       The WPS System      23:19 Friday, October 26, 2018     

MPRINT(IMPORTMETA):  label 'Description'n = 'Description';
897         label 'Description'n = 'Description';
898         input    'CodeType'n $
899           'Code'n
MPRINT(IMPORTMETA):  input 'CodeType'n $   'Code'n  'Description'n $   ;
900           'Description'n $
MPRINT(IMPORTMETA):  run;
901         ;
902         run;

NOTE: The file '/rpscan/u071439/data/JanetMetadata_SurveillanceMiscellaneous.csv' is:
      File Name=/rpscan/u071439/data/JanetMetadata_SurveillanceMiscellaneous.csv,
      Access Permissions=-rwxrwxr--, Number of Links=1,
      Owner Name=u071439, Group Name=devl,
      File Size=480, Last Modified=13:34:46 Oct 16 2018,
      Created=15:53:13 Oct 23 2018, Lrecl=32760, Recfm=V

NOTE: 13 records were read from file
      '/rpscan/u071439/data/JanetMetadata_SurveillanceMiscellaneous.csv'
      The minimum record length was 21
      The maximum record length was 48
NOTE: Data set "TEMP.SurvMiscellaneous" has 13 observation(s) and 3 variable(s)
NOTE: The data step took :
      real time : 0.033
      cpu time  : 0.001


MPRINT(IMPORTMETA):  FILENAME ##IMPORT CLEAR;
903       FILENAME ##IMPORT CLEAR;
MLOGIC(IMPORTMETA): Ending execution
904       *** Import the list of PROCGRP for Chemo Active for Surveillance;
905       %ImportMeta(JanetMetadata_SurveillanceChemoActive.csv,SurvChemoActive);
MLOGIC(IMPORTMETA): Beginning execution
MLOGIC(IMPORTMETA): Parameter INPUTDATA has value JanetMetadata_SurveillanceChemoActive.csv
MLOGIC(IMPORTMETA): Parameter SASOUTPUT has value SurvChemoActive
MLOGIC(IMPORTMETA): %IF condition &sasoutput.=SamplewClassification and &skipImport.=1  evaluate
                    d to FALSE
MPRINT(IMPORTMETA):  PROC IMPORT
                     datafile="/rpscan/u071439/data/JanetMetadata_SurveillanceChemoActive.csv"
                     out=temp.SurvChemoActive replace;
MPRINT(IMPORTMETA):  getnames=YES;
MPRINT(IMPORTMETA):  guessingrows=MAX;
MPRINT(IMPORTMETA):  run;
NOTE: Procedure IMPORT step took :
      real time : 0.013
      cpu time  : 0.001


MPRINT(IMPORTMETA):  data temp.SurvChemoActive;
906       data temp.SurvChemoActive;
MPRINT(IMPORTMETA):  infile '/rpscan/u071439/data/JanetMetadata_SurveillanceChemoActive.csv'
                     delimiter=',' MISSOVER DSD firstobs=2 LRECL=32760;
907         infile '/rpscan/u071439/data/JanetMetadata_SurveillanceChemoActive.csv' delimiter=',
37                                       The WPS System      23:19 Friday, October 26, 2018     

907     ! ' MISSOVER DSD firstobs=2 LRECL=32760;
MPRINT(IMPORTMETA):  informat 'ndc'n BEST32.;
908         informat 'ndc'n BEST32.;
MPRINT(IMPORTMETA):  informat 'therClassCode'n BEST32.;
909         informat 'therClassCode'n BEST32.;
MPRINT(IMPORTMETA):  informat 'Inttherclass'n BEST32.;
910         informat 'Inttherclass'n BEST32.;
MPRINT(IMPORTMETA):  informat 'therDesc'n $25.;
911         informat 'therDesc'n $25.;
MPRINT(IMPORTMETA):  informat 'gcrTitles'n $36.;
912         informat 'gcrTitles'n $36.;
MPRINT(IMPORTMETA):  informat 'genindDesc'n $32.;
913         informat 'genindDesc'n $32.;
MPRINT(IMPORTMETA):  informat 'roa'n $2.;
914         informat 'roa'n $2.;
MPRINT(IMPORTMETA):  informat 'cyle'n $5.;
915         informat 'cyle'n $5.;
MPRINT(IMPORTMETA):  informat 'Active'n $6.;
916         informat 'Active'n $6.;
MPRINT(IMPORTMETA):  format 'ndc'n BEST12.;
917         format 'ndc'n BEST12.;
MPRINT(IMPORTMETA):  format 'therClassCode'n BEST12.;
918         format 'therClassCode'n BEST12.;
MPRINT(IMPORTMETA):  format 'Inttherclass'n BEST12.;
919         format 'Inttherclass'n BEST12.;
MPRINT(IMPORTMETA):  format 'therDesc'n $25.;
920         format 'therDesc'n $25.;
MPRINT(IMPORTMETA):  format 'gcrTitles'n $36.;
921         format 'gcrTitles'n $36.;
MPRINT(IMPORTMETA):  format 'genindDesc'n $32.;
922         format 'genindDesc'n $32.;
MPRINT(IMPORTMETA):  format 'roa'n $2.;
923         format 'roa'n $2.;
MPRINT(IMPORTMETA):  format 'cyle'n $5.;
924         format 'cyle'n $5.;
MPRINT(IMPORTMETA):  format 'Active'n $6.;
925         format 'Active'n $6.;
MPRINT(IMPORTMETA):  label 'ndc'n = 'ndc';
926         label 'ndc'n = 'ndc';
MPRINT(IMPORTMETA):  label 'therClassCode'n = 'therClassCode';
927         label 'therClassCode'n = 'therClassCode';
MPRINT(IMPORTMETA):  label 'Inttherclass'n = 'Inttherclass';
928         label 'Inttherclass'n = 'Inttherclass';
MPRINT(IMPORTMETA):  label 'therDesc'n = 'therDesc';
929         label 'therDesc'n = 'therDesc';
MPRINT(IMPORTMETA):  label 'gcrTitles'n = 'gcrTitles';
930         label 'gcrTitles'n = 'gcrTitles';
MPRINT(IMPORTMETA):  label 'genindDesc'n = 'genindDesc';
931         label 'genindDesc'n = 'genindDesc';
MPRINT(IMPORTMETA):  label 'roa'n = 'roa';
932         label 'roa'n = 'roa';
MPRINT(IMPORTMETA):  label 'cyle'n = 'cyle';
933         label 'cyle'n = 'cyle';
38                                       The WPS System      23:19 Friday, October 26, 2018     

MPRINT(IMPORTMETA):  label 'Active'n = 'Active';
934         label 'Active'n = 'Active';
935         input    'ndc'n
936           'therClassCode'n
937           'Inttherclass'n
938           'therDesc'n $
939           'gcrTitles'n $
940           'genindDesc'n $
941           'roa'n $
942           'cyle'n $
MPRINT(IMPORTMETA):  input 'ndc'n  'therClassCode'n  'Inttherclass'n  'therDesc'n $  
                     'gcrTitles'n $   'genindDesc'n $   'roa'n $   'cyle'n $   'Active'n $   ;
943           'Active'n $
MPRINT(IMPORTMETA):  run;
944         ;
945         run;

NOTE: The file '/rpscan/u071439/data/JanetMetadata_SurveillanceChemoActive.csv' is:
      File Name=/rpscan/u071439/data/JanetMetadata_SurveillanceChemoActive.csv,
      Access Permissions=-rwxrwxr--, Number of Links=1,
      Owner Name=u071439, Group Name=devl,
      File Size=30227, Last Modified=13:34:46 Oct 16 2018,
      Created=15:53:14 Oct 23 2018, Lrecl=32760, Recfm=V

NOTE: 308 records were read from file
      '/rpscan/u071439/data/JanetMetadata_SurveillanceChemoActive.csv'
      The minimum record length was 82
      The maximum record length was 108
NOTE: Data set "TEMP.SurvChemoActive" has 308 observation(s) and 9 variable(s)
NOTE: The data step took :
      real time : 0.046
      cpu time  : 0.003


MPRINT(IMPORTMETA):  FILENAME ##IMPORT CLEAR;
946       FILENAME ##IMPORT CLEAR;
MLOGIC(IMPORTMETA): Ending execution
947       *** Import the list of PROCGRP for Chemo Chronic for Surveillance;
948       %ImportMeta(JanetMetadata_SurveillanceChemoChronic.csv,SurvChemoChronic);
MLOGIC(IMPORTMETA): Beginning execution
MLOGIC(IMPORTMETA): Parameter INPUTDATA has value JanetMetadata_SurveillanceChemoChronic.csv
MLOGIC(IMPORTMETA): Parameter SASOUTPUT has value SurvChemoChronic
MLOGIC(IMPORTMETA): %IF condition &sasoutput.=SamplewClassification and &skipImport.=1  evaluate
                    d to FALSE
MPRINT(IMPORTMETA):  PROC IMPORT
                     datafile="/rpscan/u071439/data/JanetMetadata_SurveillanceChemoChronic.csv"
                     out=temp.SurvChemoChronic replace;
MPRINT(IMPORTMETA):  getnames=YES;
MPRINT(IMPORTMETA):  guessingrows=MAX;
MPRINT(IMPORTMETA):  run;
NOTE: Procedure IMPORT step took :
      real time : 0.011
      cpu time  : 0.001
39                                       The WPS System      23:19 Friday, October 26, 2018     



MPRINT(IMPORTMETA):  data temp.SurvChemoChronic;
949       data temp.SurvChemoChronic;
MPRINT(IMPORTMETA):  infile '/rpscan/u071439/data/JanetMetadata_SurveillanceChemoChronic.csv'
                     delimiter=',' MISSOVER DSD firstobs=2 LRECL=32760;
950         infile '/rpscan/u071439/data/JanetMetadata_SurveillanceChemoChronic.csv' delimiter='
950     ! ,' MISSOVER DSD firstobs=2 LRECL=32760;
MPRINT(IMPORTMETA):  informat 'ndc'n BEST32.;
951         informat 'ndc'n BEST32.;
MPRINT(IMPORTMETA):  informat 'therClassCode'n BEST32.;
952         informat 'therClassCode'n BEST32.;
MPRINT(IMPORTMETA):  informat 'Inttherclass'n BEST32.;
953         informat 'Inttherclass'n BEST32.;
MPRINT(IMPORTMETA):  informat 'therDesc'n $25.;
954         informat 'therDesc'n $25.;
MPRINT(IMPORTMETA):  informat 'gcrTitles'n $49.;
955         informat 'gcrTitles'n $49.;
MPRINT(IMPORTMETA):  informat 'genindDesc'n $29.;
956         informat 'genindDesc'n $29.;
MPRINT(IMPORTMETA):  informat 'roa'n $2.;
957         informat 'roa'n $2.;
MPRINT(IMPORTMETA):  informat 'cyle'n $1.;
958         informat 'cyle'n $1.;
MPRINT(IMPORTMETA):  informat 'Active'n $1.;
959         informat 'Active'n $1.;
MPRINT(IMPORTMETA):  format 'ndc'n BEST12.;
960         format 'ndc'n BEST12.;
MPRINT(IMPORTMETA):  format 'therClassCode'n BEST12.;
961         format 'therClassCode'n BEST12.;
MPRINT(IMPORTMETA):  format 'Inttherclass'n BEST12.;
962         format 'Inttherclass'n BEST12.;
MPRINT(IMPORTMETA):  format 'therDesc'n $25.;
963         format 'therDesc'n $25.;
MPRINT(IMPORTMETA):  format 'gcrTitles'n $49.;
964         format 'gcrTitles'n $49.;
MPRINT(IMPORTMETA):  format 'genindDesc'n $29.;
965         format 'genindDesc'n $29.;
MPRINT(IMPORTMETA):  format 'roa'n $2.;
966         format 'roa'n $2.;
MPRINT(IMPORTMETA):  format 'cyle'n $1.;
967         format 'cyle'n $1.;
MPRINT(IMPORTMETA):  format 'Active'n $1.;
968         format 'Active'n $1.;
MPRINT(IMPORTMETA):  label 'ndc'n = 'ndc';
969         label 'ndc'n = 'ndc';
MPRINT(IMPORTMETA):  label 'therClassCode'n = 'therClassCode';
970         label 'therClassCode'n = 'therClassCode';
MPRINT(IMPORTMETA):  label 'Inttherclass'n = 'Inttherclass';
971         label 'Inttherclass'n = 'Inttherclass';
MPRINT(IMPORTMETA):  label 'therDesc'n = 'therDesc';
972         label 'therDesc'n = 'therDesc';
MPRINT(IMPORTMETA):  label 'gcrTitles'n = 'gcrTitles';
40                                       The WPS System      23:19 Friday, October 26, 2018     

973         label 'gcrTitles'n = 'gcrTitles';
MPRINT(IMPORTMETA):  label 'genindDesc'n = 'genindDesc';
974         label 'genindDesc'n = 'genindDesc';
MPRINT(IMPORTMETA):  label 'roa'n = 'roa';
975         label 'roa'n = 'roa';
MPRINT(IMPORTMETA):  label 'cyle'n = 'cyle';
976         label 'cyle'n = 'cyle';
MPRINT(IMPORTMETA):  label 'Active'n = 'Active';
977         label 'Active'n = 'Active';
978         input    'ndc'n
979           'therClassCode'n
980           'Inttherclass'n
981           'therDesc'n $
982           'gcrTitles'n $
983           'genindDesc'n $
984           'roa'n $
985           'cyle'n $
MPRINT(IMPORTMETA):  input 'ndc'n  'therClassCode'n  'Inttherclass'n  'therDesc'n $  
                     'gcrTitles'n $   'genindDesc'n $   'roa'n $   'cyle'n $   'Active'n $   ;
986           'Active'n $
MPRINT(IMPORTMETA):  run;
987         ;
988         run;

NOTE: The file '/rpscan/u071439/data/JanetMetadata_SurveillanceChemoChronic.csv' is:
      File Name=/rpscan/u071439/data/JanetMetadata_SurveillanceChemoChronic.csv,
      Access Permissions=-rwxrwxr--, Number of Links=1,
      Owner Name=u071439, Group Name=devl,
      File Size=46172, Last Modified=13:34:46 Oct 16 2018,
      Created=15:53:14 Oct 23 2018, Lrecl=32760, Recfm=V

NOTE: 546 records were read from file
      '/rpscan/u071439/data/JanetMetadata_SurveillanceChemoChronic.csv'
      The minimum record length was 71
      The maximum record length was 106
NOTE: Data set "TEMP.SurvChemoChronic" has 546 observation(s) and 9 variable(s)
NOTE: The data step took :
      real time : 0.025
      cpu time  : 0.006


MPRINT(IMPORTMETA):  FILENAME ##IMPORT CLEAR;
989       FILENAME ##IMPORT CLEAR;
MLOGIC(IMPORTMETA): Ending execution
990       
991       
992       *** Modified;
993       *** convert NDCNUM to character for table;
994       data temp.SurvChemoActive(drop=ndc_old);
995       set temp.SurvChemoActive(rename=(ndc=ndc_old));
996       ndc=put(ndc_old,z11.);
997       run;

41                                       The WPS System      23:19 Friday, October 26, 2018     

NOTE: 308 observations were read from "TEMP.SurvChemoActive"
NOTE: Data set "TEMP.SurvChemoActive" has 308 observation(s) and 9 variable(s)
NOTE: The data step took :
      real time : 0.044
      cpu time  : 0.001


998       
999       *** Modified;
1000      *** convert NDCNUM to character for table;
1001      data temp.SurvChemoChronic(drop=ndc_old);
1002      set temp.SurvChemoChronic(rename=(ndc=ndc_old));
1003      ndc=put(ndc_old,z11.);
1004      run;

NOTE: 546 observations were read from "TEMP.SurvChemoChronic"
NOTE: Data set "TEMP.SurvChemoChronic" has 546 observation(s) and 9 variable(s)
NOTE: The data step took :
      real time : 0.036
      cpu time  : 0.002


1005      
1006      
1007      *** Import the list of DxCat for Rebalance, new conditions;
1008      %ImportMeta(JanetMetadata_RebalanceNewDxCat.csv,RebalanceNewDxCat);
MLOGIC(IMPORTMETA): Beginning execution
MLOGIC(IMPORTMETA): Parameter INPUTDATA has value JanetMetadata_RebalanceNewDxCat.csv
MLOGIC(IMPORTMETA): Parameter SASOUTPUT has value RebalanceNewDxCat
MLOGIC(IMPORTMETA): %IF condition &sasoutput.=SamplewClassification and &skipImport.=1  evaluate
                    d to FALSE
MPRINT(IMPORTMETA):  PROC IMPORT
                     datafile="/rpscan/u071439/data/JanetMetadata_RebalanceNewDxCat.csv"
                     out=temp.RebalanceNewDxCat replace;
MPRINT(IMPORTMETA):  getnames=YES;
MPRINT(IMPORTMETA):  guessingrows=MAX;
MPRINT(IMPORTMETA):  run;
NOTE: Procedure IMPORT step took :
      real time : 0.006
      cpu time  : 0.000


MPRINT(IMPORTMETA):  data temp.RebalanceNewDxCat;
1009      data temp.RebalanceNewDxCat;
MPRINT(IMPORTMETA):  infile '/rpscan/u071439/data/JanetMetadata_RebalanceNewDxCat.csv'
                     delimiter=',' MISSOVER DSD firstobs=2 LRECL=32760;
1010        infile '/rpscan/u071439/data/JanetMetadata_RebalanceNewDxCat.csv' delimiter=',' MISS
1010    ! OVER DSD firstobs=2 LRECL=32760;
MPRINT(IMPORTMETA):  informat 'DxCat'n $5.;
1011        informat 'DxCat'n $5.;
MPRINT(IMPORTMETA):  informat 'Stage'n BEST32.;
1012        informat 'Stage'n BEST32.;
MPRINT(IMPORTMETA):  informat 'StageHistory'n BEST32.;
42                                       The WPS System      23:19 Friday, October 26, 2018     

1013        informat 'StageHistory'n BEST32.;
MPRINT(IMPORTMETA):  format 'DxCat'n $5.;
1014        format 'DxCat'n $5.;
MPRINT(IMPORTMETA):  format 'Stage'n BEST12.;
1015        format 'Stage'n BEST12.;
MPRINT(IMPORTMETA):  format 'StageHistory'n BEST12.;
1016        format 'StageHistory'n BEST12.;
MPRINT(IMPORTMETA):  label 'DxCat'n = 'DxCat';
1017        label 'DxCat'n = 'DxCat';
MPRINT(IMPORTMETA):  label 'Stage'n = 'Stage';
1018        label 'Stage'n = 'Stage';
MPRINT(IMPORTMETA):  label 'StageHistory'n = 'StageHistory';
1019        label 'StageHistory'n = 'StageHistory';
1020        input    'DxCat'n $
MPRINT(IMPORTMETA):  input 'DxCat'n $   'Stage'n  'StageHistory'n  ;
1021          'Stage'n
1022          'StageHistory'n
MPRINT(IMPORTMETA):  run;
1023        ;
1024        run;

NOTE: The file '/rpscan/u071439/data/JanetMetadata_RebalanceNewDxCat.csv' is:
      File Name=/rpscan/u071439/data/JanetMetadata_RebalanceNewDxCat.csv,
      Access Permissions=-rwxrwxr--, Number of Links=1,
      Owner Name=u071439, Group Name=devl,
      File Size=1061, Last Modified=13:34:46 Oct 16 2018,
      Created=15:53:15 Oct 23 2018, Lrecl=32760, Recfm=V

NOTE: 93 records were read from file '/rpscan/u071439/data/JanetMetadata_RebalanceNewDxCat.csv'
      The minimum record length was 9
      The maximum record length was 15
NOTE: Data set "TEMP.RebalanceNewDxCat" has 93 observation(s) and 3 variable(s)
NOTE: The data step took :
      real time : 0.032
      cpu time  : 0.002


MPRINT(IMPORTMETA):  FILENAME ##IMPORT CLEAR;
1025      FILENAME ##IMPORT CLEAR;
MLOGIC(IMPORTMETA): Ending execution
1026      *** Import the list of DxCat for Rebalance, new conditions wo drugs in the prior 90 da
1026    ! ys;
1027      %ImportMeta(JanetMetadata_RebalanceNewDxCatwoRx.csv,RebalanceNewDxCatwoRx);
MLOGIC(IMPORTMETA): Beginning execution
MLOGIC(IMPORTMETA): Parameter INPUTDATA has value JanetMetadata_RebalanceNewDxCatwoRx.csv
MLOGIC(IMPORTMETA): Parameter SASOUTPUT has value RebalanceNewDxCatwoRx
MLOGIC(IMPORTMETA): %IF condition &sasoutput.=SamplewClassification and &skipImport.=1  evaluate
                    d to FALSE
MPRINT(IMPORTMETA):  PROC IMPORT
                     datafile="/rpscan/u071439/data/JanetMetadata_RebalanceNewDxCatwoRx.csv"
                     out=temp.RebalanceNewDxCatwoRx replace;
MPRINT(IMPORTMETA):  getnames=YES;
MPRINT(IMPORTMETA):  guessingrows=MAX;
43                                       The WPS System      23:19 Friday, October 26, 2018     

MPRINT(IMPORTMETA):  run;
NOTE: Procedure IMPORT step took :
      real time : 0.001
      cpu time  : 0.000


MPRINT(IMPORTMETA):  data temp.RebalanceNewDxCatwoRx;
1028      data temp.RebalanceNewDxCatwoRx;
MPRINT(IMPORTMETA):  infile '/rpscan/u071439/data/JanetMetadata_RebalanceNewDxCatwoRx.csv'
                     delimiter=',' MISSOVER DSD firstobs=2 LRECL=32760;
1029        infile '/rpscan/u071439/data/JanetMetadata_RebalanceNewDxCatwoRx.csv' delimiter=',' 
1029    ! MISSOVER DSD firstobs=2 LRECL=32760;
MPRINT(IMPORTMETA):  informat 'DxCat'n $5.;
1030        informat 'DxCat'n $5.;
MPRINT(IMPORTMETA):  informat 'TherCls'n BEST32.;
1031        informat 'TherCls'n BEST32.;
MPRINT(IMPORTMETA):  format 'DxCat'n $5.;
1032        format 'DxCat'n $5.;
MPRINT(IMPORTMETA):  format 'TherCls'n BEST12.;
1033        format 'TherCls'n BEST12.;
MPRINT(IMPORTMETA):  label 'DxCat'n = 'DxCat';
1034        label 'DxCat'n = 'DxCat';
MPRINT(IMPORTMETA):  label 'TherCls'n = 'TherCls';
1035        label 'TherCls'n = 'TherCls';
MPRINT(IMPORTMETA):  input 'DxCat'n $   'TherCls'n  ;
1036        input    'DxCat'n $
1037          'TherCls'n
MPRINT(IMPORTMETA):  run;
1038        ;
1039        run;

NOTE: The file '/rpscan/u071439/data/JanetMetadata_RebalanceNewDxCatwoRx.csv' is:
      File Name=/rpscan/u071439/data/JanetMetadata_RebalanceNewDxCatwoRx.csv,
      Access Permissions=-rwxrwxr--, Number of Links=1,
      Owner Name=u071439, Group Name=devl,
      File Size=154, Last Modified=13:34:46 Oct 16 2018,
      Created=15:53:15 Oct 23 2018, Lrecl=32760, Recfm=V

NOTE: 13 records were read from file
      '/rpscan/u071439/data/JanetMetadata_RebalanceNewDxCatwoRx.csv'
      The minimum record length was 8
      The maximum record length was 9
NOTE: Data set "TEMP.RebalanceNewDxCatwoRx" has 13 observation(s) and 2 variable(s)
NOTE: The data step took :
      real time : 0.021
      cpu time  : 0.001


MPRINT(IMPORTMETA):  FILENAME ##IMPORT CLEAR;
1040      FILENAME ##IMPORT CLEAR;
MLOGIC(IMPORTMETA): Ending execution
1041      
1042      
44                                       The WPS System      23:19 Friday, October 26, 2018     

1043      *** Modified;
1044      *** Import the list of DxCat for Rebalance, new ICD9;
1045      *** %ImportMeta(JanetMetadata_RebalanceNewDx.csv,RebalanceNewDx);
1046      data  temp.RebalanceNewDx;
1047      infile '/rpscan/u0086308/POPSTRATIFICATION/data/JanetMetadata_RebalanceNewDx.csv' deli
1047    ! miter=',' MISSOVER DSD firstobs=2 LRECL=32760;
1048      informat 'ICD'n $4.;
1049      informat 'Description'n $13.;
1050      format 'ICD'n $4.;
1051      format 'Description'n $13.;
1052      label 'ICD'n = 'ICD';
1053      label 'Description'n = 'Description';
1054      input    'ICD'n $
1055      'Description'n $
1056      ;
1057      run;

NOTE: The file '/rpscan/u0086308/POPSTRATIFICATION/data/JanetMetadata_RebalanceNewDx.csv' is:
      File Name=/rpscan/u0086308/POPSTRATIFICATION/data/JanetMetadata_RebalanceNewDx.csv,
      Access Permissions=-rwxr-xr-x, Number of Links=1,
      Owner Name=u0086308, Group Name=devl,
      File Size=449, Last Modified=16:28:16 Mar 31 2017,
      Created=16:26:12 Oct 15 2018, Lrecl=32760, Recfm=V

NOTE: 18 records were read from file
      '/rpscan/u0086308/POPSTRATIFICATION/data/JanetMetadata_RebalanceNewDx.csv'
      The minimum record length was 22
      The maximum record length was 22
NOTE: Data set "TEMP.RebalanceNewDx" has 18 observation(s) and 2 variable(s)
NOTE: The data step took :
      real time : 0.080
      cpu time  : 0.002


1058      
1059      
1060      *** Import the list of DxCat for Rebalance, new DRG;
1061      %ImportMeta(JanetMetadata_RebalanceNewDRG.csv,RebalanceNewDRG);
MLOGIC(IMPORTMETA): Beginning execution
MLOGIC(IMPORTMETA): Parameter INPUTDATA has value JanetMetadata_RebalanceNewDRG.csv
MLOGIC(IMPORTMETA): Parameter SASOUTPUT has value RebalanceNewDRG
MLOGIC(IMPORTMETA): %IF condition &sasoutput.=SamplewClassification and &skipImport.=1  evaluate
                    d to FALSE
MPRINT(IMPORTMETA):  PROC IMPORT
                     datafile="/rpscan/u071439/data/JanetMetadata_RebalanceNewDRG.csv"
                     out=temp.RebalanceNewDRG replace;
MPRINT(IMPORTMETA):  getnames=YES;
MPRINT(IMPORTMETA):  guessingrows=MAX;
MPRINT(IMPORTMETA):  run;
NOTE: Procedure IMPORT step took :
      real time : 0.006
      cpu time  : 0.000

45                                       The WPS System      23:19 Friday, October 26, 2018     


MPRINT(IMPORTMETA):  data temp.RebalanceNewDRG;
1062      data temp.RebalanceNewDRG;
MPRINT(IMPORTMETA):  infile '/rpscan/u071439/data/JanetMetadata_RebalanceNewDRG.csv'
                     delimiter=',' MISSOVER DSD firstobs=2 LRECL=32760;
1063        infile '/rpscan/u071439/data/JanetMetadata_RebalanceNewDRG.csv' delimiter=',' MISSOV
1063    ! ER DSD firstobs=2 LRECL=32760;
MPRINT(IMPORTMETA):  informat 'DRG'n BEST32.;
1064        informat 'DRG'n BEST32.;
MPRINT(IMPORTMETA):  informat 'Description'n $24.;
1065        informat 'Description'n $24.;
MPRINT(IMPORTMETA):  format 'DRG'n BEST12.;
1066        format 'DRG'n BEST12.;
MPRINT(IMPORTMETA):  format 'Description'n $24.;
1067        format 'Description'n $24.;
MPRINT(IMPORTMETA):  label 'DRG'n = 'DRG';
1068        label 'DRG'n = 'DRG';
MPRINT(IMPORTMETA):  label 'Description'n = 'Description';
1069        label 'Description'n = 'Description';
1070        input    'DRG'n
MPRINT(IMPORTMETA):  input 'DRG'n  'Description'n $   ;
1071          'Description'n $
MPRINT(IMPORTMETA):  run;
1072        ;
1073        run;

NOTE: The file '/rpscan/u071439/data/JanetMetadata_RebalanceNewDRG.csv' is:
      File Name=/rpscan/u071439/data/JanetMetadata_RebalanceNewDRG.csv,
      Access Permissions=-rwxrwxr--, Number of Links=1,
      Owner Name=u071439, Group Name=devl,
      File Size=213, Last Modified=13:34:46 Oct 16 2018,
      Created=15:53:15 Oct 23 2018, Lrecl=32760, Recfm=V

NOTE: 9 records were read from file '/rpscan/u071439/data/JanetMetadata_RebalanceNewDRG.csv'
      The minimum record length was 14
      The maximum record length was 32
NOTE: Data set "TEMP.RebalanceNewDRG" has 9 observation(s) and 2 variable(s)
NOTE: The data step took :
      real time : 0.043
      cpu time  : 0.002


MPRINT(IMPORTMETA):  FILENAME ##IMPORT CLEAR;
1074      FILENAME ##IMPORT CLEAR;
MLOGIC(IMPORTMETA): Ending execution
1075      
1076      *** labels for all categories, the ranking is important!!!;
1077      proc format;
1078      value categories
1079      10='Crisis Management'
1080      9='Surveillance'
1081      8='Rebalancing'
1082      7='Recovery Guidance'
46                                       The WPS System      23:19 Friday, October 26, 2018     

1083      6='Monitoring'
1084      5='Coordination'
1085      4='Treatment Navigation'
1086      3='Support'
1087      2='Prevention'
1088      1='Engagement'
1089      ;
NOTE: Format categories output
1090      
1091      value RuleConfidence
1092      1= 0.933
1093      2= 0.6
1094      3= 0.667
1095      4= 0.865
1096      5= 0.667
1097      6= 0.667
1098      7= 0.851
1099      8= 0.727
1100      9= 0.75
1101      10= 0.765
1102      11= 0.667
1103      12= 0.909
1104      13= 0.667
1105      ;
NOTE: Format RuleConfidence output
1106      
1107      *** sort the sample by ENROLID, it is needed for the last merge at the end;
NOTE: Procedure format step took :
      real time : 0.045
      cpu time  : 0.001


1108      proc sort data=temp.SamplewClassification;
1109      by enrolid;
1110      run;
NOTE: 179 observations were read from "TEMP.SamplewClassification"
NOTE: Data set "TEMP.SamplewClassification" has 179 observation(s) and 2 variable(s)
NOTE: Procedure sort step took :
      real time : 0.049
      cpu time  : 0.006


1111      
1112      *** convert NDCNUM to character;
1113      data temp.ChronicRx(drop=ndcnum_old);
1114      set temp.ChronicRx(rename=(ndcnum=ndcnum_old));
1115      NDCNUM=put(ndcnum_old,z11.);
1116      run;

NOTE: 58539 observations were read from "TEMP.ChronicRx"
NOTE: Data set "TEMP.ChronicRx" has 58539 observation(s) and 4 variable(s)
NOTE: The data step took :
      real time : 0.107
47                                       The WPS System      23:19 Friday, October 26, 2018     

      cpu time  : 0.040


1117      
1118      *** creating a format for Acute/Chronic;
1119      data trash(keep=start label fmtname);
1120      set temp.GeneralAssignments;
1121      start=DxCat;
1122      label=Category;
1123      fmtname='$DxCatAssign';
1124      run;

NOTE: 565 observations were read from "TEMP.GeneralAssignments"
NOTE: Data set "WORK.trash" has 565 observation(s) and 3 variable(s)
NOTE: The data step took :
      real time : 0.013
      cpu time  : 0.001


1125      proc format cntlin=trash; run;
NOTE: Format $DxCatAssign output
NOTE: 565 observations were read from "WORK.trash"
NOTE: Procedure format step took :
      real time : 0.014
      cpu time  : 0.002


1126      
1127      *** creating a format for Significant DxCat;
1128      data trash(keep=start label fmtname);
1129      set temp.SignificantConditions;
1130      start=DxCat;
1131      label=Significance;
1132      fmtname='$DxCatHigh';
1133      run;

NOTE: 296 observations were read from "TEMP.SignificantConditions"
NOTE: Data set "WORK.trash" has 296 observation(s) and 3 variable(s)
NOTE: The data step took :
      real time : 0.022
      cpu time  : 0.001


1134      proc format cntlin=trash; run;
NOTE: Format $DxCatHigh output
NOTE: 296 observations were read from "WORK.trash"
NOTE: Procedure format step took :
      real time : 0.019
      cpu time  : 0.001


1135      
1136      *** creating a format for Body Systems;
48                                       The WPS System      23:19 Friday, October 26, 2018     

1137      data trash(keep=start label fmtname hlo);
1138      set temp.BodySystem end=end;
1139      start=DxCat;
1140      label=Body;
1141      fmtname='$DxCatBody';
1142      if end then do;
1143      hlo='O';                            /* for DxCats that are not in the map from Janet, 
1143    ! just map them to '99'-Other */
1144      label='99';
1145      end;
1146      run;

NOTE: Character values have been converted to numeric values at the places given by:
      (Line):(Column)
      1144:7   
NOTE: 565 observations were read from "TEMP.BodySystem"
NOTE: Data set "WORK.trash" has 565 observation(s) and 4 variable(s)
NOTE: The data step took :
      real time : 0.028
      cpu time  : 0.002


1147      proc format cntlin=trash; run;
NOTE: Format $DxCatBody output
NOTE: 565 observations were read from "WORK.trash"
NOTE: Procedure format step took :
      real time : 0.020
      cpu time  : 0.002


1148      
1149      *** creating a format for list of DxCat (based on Dx conditions) for Surveillance - Ac
1149    ! tive Cancer definition;
1150      data trash(keep=start label fmtname);
1151      set temp.SurvGeneralActiveCancerDxCat end=end;
1152      where Type='Dx';
1153      start=DxCat;
1154      label='Y';
1155      fmtname='$SurvActiveCancerDxcat';
1156      run;

NOTE: 76 observations were read from "TEMP.SurvGeneralActiveCancerDxCat"
NOTE: Data set "WORK.trash" has 76 observation(s) and 3 variable(s)
NOTE: The data step took :
      real time : 0.051
      cpu time  : 0.002


1157      proc format cntlin=trash; run;
NOTE: Format $SurvActiveCancerDxcat output
NOTE: 76 observations were read from "WORK.trash"
NOTE: Procedure format step took :
      real time : 0.018
49                                       The WPS System      23:19 Friday, October 26, 2018     

      cpu time  : 0.001


1158      
1159      *** creating a format for list of DxCat (based on Px conditions) for Surveillance - Ac
1159    ! tive Cancer definition;
1160      data trash(keep=start label fmtname);
1161      set temp.SurvGeneralActiveCancerDxCat end=end;
1162      where Type='Px';
1163      start=DxCat;
1164      label='Y';
1165      fmtname='$SurvActiveCancerPxDxcat';
1166      run;

NOTE: 1 observations were read from "TEMP.SurvGeneralActiveCancerDxCat"
NOTE: Data set "WORK.trash" has 1 observation(s) and 3 variable(s)
NOTE: The data step took :
      real time : 0.027
      cpu time  : 0.001


1167      proc format cntlin=trash; run;
NOTE: Format $SurvActiveCancerPxDxcat output
NOTE: 1 observations were read from "WORK.trash"
NOTE: Procedure format step took :
      real time : 0.010
      cpu time  : 0.000


1168      
1169      *** creating a format for list of ProcGRP (based on Px conditions) for Surveillance - 
1169    ! Active Cancer definition;
1170      data trash_1(keep=start label fmtname);
1171      set temp.SurvGeneralActiveCancerPROCGRP end=end;
1172      start=PROCGRP;
1173      label='Y';
1174      fmtname='SurvActiveCancerPROCGRP';
1175      run;

NOTE: 25 observations were read from "TEMP.SurvGeneralActiveCancerPROCGRP"
NOTE: Data set "WORK.trash_1" has 25 observation(s) and 3 variable(s)
NOTE: The data step took :
      real time : 0.012
      cpu time  : 0.001


1176      proc format cntlin=trash_1; run;
NOTE: Format SurvActiveCancerPROCGRP output
NOTE: 25 observations were read from "WORK.trash_1"
NOTE: Procedure format step took :
      real time : 0.016
      cpu time  : 0.000

50                                       The WPS System      23:19 Friday, October 26, 2018     


1177      
1178      ********************************************************************************;
1179      *%include '/rpscan/u071439/script/PopClassModel_BeforeAE_YL.sas';
1180      
1181      ********** run AE for DS using above configuration file-AE not working on nike;
1182      ****************x "&AEpath./AnalyticsEngine.sh &AEpath./Configfile.properties";
1183      
1184      ******************************************************************************;
1185      *%include '/rpscan/u071439/script/PopClassModel_AfterAE_YL.sas';
1186      
1187      
1188      
1189      
1190      
1191      
1192      
1193      
1194      
1195      
1196      /* import AE back into the data */
1197      data temp.SampleIPOPwDS1;
1198      	infile "&AEoutpath./&username._DISEASESTAGING6.34_&version._Dsoutput.csv"
1199      	delimiter = ','
1200      	MISSOVER
1201      	DSD
1202      	lrecl=32767
1203      	firstobs=2;
1204      input
1205                        enrolid
1206                        fac_prof :$1.
1207                        eventid :$16.
1208                        age
1209                        sex :$1.
1210                        proc1 :$7.
1211                        icd_flag :$1.
1212                        dx1 :$7.
1213                        dx2 :$7.
1214                        dx3 :$7.
1215                        dx4 :$7.
1216                        rec_type :$1.
1217                        std_place :$1.
1218      				  admtyp :$1.
1219      				  svcscat :$5.
1220      				  svcdate :mmddyy10.
1221                        dxcat1 :$5.
1222                        dxcat2 :$5.
1223                        dxcat3 :$5.
1224                        dxcat4 :$5.
1225                        dxstage1
1226                        dxstage2
1227                        dxstage3
1228                        dxstage4
51                                       The WPS System      23:19 Friday, October 26, 2018     

1229      ;
1230      format svcdate mmddyy10.;
1231      run;

NOTE: The file
      '/rpscan/u071439/AEout/31DEC2015Enrolids200_10252018/u071439_DISEASESTAGING6.34_31DEC2015E
      nrolids200_10252018_Dsoutput.csv' is:
      File
      Name=/rpscan/u071439/AEout/31DEC2015Enrolids200_10252018/u071439_DISEASESTAGING6.34_31DEC2
      015Enrolids200_10252018_Dsoutput.csv,
      Access Permissions=-rw-r--r--, Number of Links=1,
      Owner Name=u071439, Group Name=devl,
      File Size=264686, Last Modified=23:08:37 Oct 25 2018,
      Created=13:30:13 Oct 26 2018, Lrecl=32767, Recfm=V

NOTE: 2883 records were read from file
      '/rpscan/u071439/AEout/31DEC2015Enrolids200_10252018/u071439_DISEASESTAGING6.34_31DEC2015E
      nrolids200_10252018_Dsoutput.csv'
      The minimum record length was 70
      The maximum record length was 125
NOTE: Data set "TEMP.SampleIPOPwDS1" has 2883 observation(s) and 24 variable(s)
NOTE: The data step took :
      real time : 0.053
      cpu time  : 0.016


1232      
1233      *** flag the patients with MHSA and maternity history;
1234      proc sql;
1235      create view trash501 as select
1236      	enrolid,
1237      	max(
1238      				(admtyp='4'	 				or
1239      				dxcat1 in (&SvcCatMHSA.)	or
1240      				dxcat2 in (&SvcCatMHSA.)	or
1241      				dxcat3 in (&SvcCatMHSA.)	or
1242      				dxcat4 in (&SvcCatMHSA.))
1243      		)												as flag12mMHSA,
1244      	max(		
1245      				(svcdate > &StartDate.-90)		and
1246      				(dxcat1 in (&SvcCatGYN.)	or
1247      				 dxcat2 in (&SvcCatGYN.)	or
1248      				 dxcat3 in (&SvcCatGYN.)	or
1249      				 dxcat4 in (&SvcCatGYN.))
1250      		)												as flag3mGYN
1251      from
1252      	temp.SampleIPOPwDS1
1253      group by
1254      	enrolid;
NOTE: View WORK.trash501 successfully created
1255      
1256      *** create the flags for all the DxCats that satisfy the conditions for Acute/Chrnic/S
1256    ! tage>3/HighSignificance;
52                                       The WPS System      23:19 Friday, October 26, 2018     

NOTE: Procedure sql step took :
      real time : 0.016
      cpu time  : 0.001


1257      data trash502(keep=
1258      				enrolid
1259      				svcdate flag3mStage3
1260      				dxcat flag3mAcuteStage3 flag3mChronicStage3 flag6mChronicStage3 flag3mAcuteSign fl
1260    ! ag3mChronicSign flag6mChronicSign flag12mChronicSign flag3mAcute flag6mAcute flag3mChr
1260    ! onic flag12mChronic
1261      				body flag3mBody flag3mBodySign
1262      				flagNew3mChronicSign flagNew12mChronicSign);
1263      set temp.SampleIPOPwDS1;
1264      length dxcat $5. body $2.;
1265      array dxarray dxcat1-dxcat4;
1266      array dxstage dxstage1-dxstage4;
1267      	do i=1 to 4;
1268      		dxcat=' '; body=' ';
1269      /* flags for days with Stage3 */
1270      		if svcdate > &StartDate.-90  and dxstage[i] ge 3 and
1271      			^(rec_type='O' and (substr(svcscat,4,2) in (&SvcCatExclusionList.) or proc1 in (&Pr
1271    ! ocExclusionList.)))
1272      		then do; dxcat=dxarray[i]; flag3mStage3=1;   end;
1273      /* flags for DxCat counts */
1274      		if svcdate > &StartDate.-90  and put(dxarray[i],$DxCatAssign.)='Acute' and dxstage[i
1274    ! ] ge 3 and
1275      			^(rec_type='O' and (substr(svcscat,4,2) in (&SvcCatExclusionList.) or proc1 in (&Pr
1275    ! ocExclusionList.)))
1276      		then do; dxcat=dxarray[i]; flag3mAcuteStage3=1; end;
1277      		if svcdate > &StartDate.-90  and put(dxarray[i],$DxCatAssign.)='Chronic' and dxstage
1277    ! [i] ge 3 and
1278      		   	^(rec_type='O' and (substr(svcscat,4,2) in (&SvcCatExclusionList.) or proc1 in (
1278    ! &ProcExclusionList.)))
1279      		then do; dxcat=dxarray[i]; flag3mChronicStage3=1; end;
1280      		if svcdate > &StartDate.-180 and put(dxarray[i],$DxCatAssign.)='Chronic' and dxstage
1280    ! [i] ge 3 and
1281      		   	^(rec_type='O' and (substr(svcscat,4,2) in (&SvcCatExclusionList.) or proc1 in (
1281    ! &ProcExclusionList.)))
1282      		then do; dxcat=dxarray[i]; flag6mChronicStage3=1; end;
1283      		if svcdate > &StartDate.-90  and put(dxarray[i],$DxCatAssign.)='Acute'   and put(dxa
1283    ! rray[i],$DxCatHigh.)='High' and
1284      			^(rec_type='O' and (substr(svcscat,4,2) in (&SvcCatExclusionList.) or proc1 in (&Pr
1284    ! ocExclusionList.)))
1285      		then do; dxcat=dxarray[i]; flag3mAcuteSign=1;   end;
1286      		if svcdate > &StartDate.-90  and put(dxarray[i],$DxCatAssign.)='Chronic' and put(dxa
1286    ! rray[i],$DxCatHigh.)='High' and
1287      			^(rec_type='O' and (substr(svcscat,4,2) in (&SvcCatExclusionList.) or proc1 in (&Pr
1287    ! ocExclusionList.)))
1288      		then do; dxcat=dxarray[i]; flag3mChronicSign=1; end;
1289      		if svcdate > &StartDate.-180 and put(dxarray[i],$DxCatAssign.)='Chronic' and put(dxa
1289    ! rray[i],$DxCatHigh.)='High' and
1290      			^(rec_type='O' and (substr(svcscat,4,2) in (&SvcCatExclusionList.) or proc1 in (&Pr
53                                       The WPS System      23:19 Friday, October 26, 2018     

1290    ! ocExclusionList.)))
1291      		then do; dxcat=dxarray[i]; flag6mChronicSign=1; end;
1292      		if svcdate > &StartDate.-366 and put(dxarray[i],$DxCatAssign.)='Chronic' and put(dxa
1292    ! rray[i],$DxCatHigh.)='High' and
1293      			^(rec_type='O' and (substr(svcscat,4,2) in (&SvcCatExclusionList.) or proc1 in (&Pr
1293    ! ocExclusionList.)))
1294      		then do; dxcat=dxarray[i]; flag12mChronicSign=1; end;
1295      		if svcdate > &StartDate.-90  and put(dxarray[i],$DxCatAssign.)='Acute' and
1296      			^(rec_type='O' and (substr(svcscat,4,2) in (&SvcCatExclusionList.) or proc1 in (&Pr
1296    ! ocExclusionList.)))
1297      		then do; dxcat=dxarray[i]; flag3mAcute=1;   end;
1298      		if svcdate > &StartDate.-180 and put(dxarray[i],$DxCatAssign.)='Acute'  and
1299      			^(rec_type='O' and (substr(svcscat,4,2) in (&SvcCatExclusionList.) or proc1 in (&Pr
1299    ! ocExclusionList.)))
1300      		then do; dxcat=dxarray[i]; flag6mAcute=1;   end;
1301      		if svcdate > &StartDate.-90  and put(dxarray[i],$DxCatAssign.)='Chronic' and
1302      			^(rec_type='O' and (substr(svcscat,4,2) in (&SvcCatExclusionList.) or proc1 in (&Pr
1302    ! ocExclusionList.)))
1303      		then do; dxcat=dxarray[i]; flag3mChronic=1; end;
1304      		if svcdate > &StartDate.-366 and put(dxarray[i],$DxCatAssign.)='Chronic' and
1305      			^(rec_type='O' and (substr(svcscat,4,2) in (&SvcCatExclusionList.) or proc1 in (&Pr
1305    ! ocExclusionList.)))
1306      		then do; dxcat=dxarray[i]; flag12mChronic=1; end;
1307      /* flags for body counts */
1308      		if svcdate > &StartDate.-90 and missing(dxarray[i])=0 				then do; body=put(dxarray[
1308    ! i],$DxCatBody.); flag3mBody=1; dxcat=dxarray[i]; end;
1309      		if svcdate > &StartDate.-90 and put(dxarray[i],$DxCatHigh.)='High' 	then do; body=pu
1309    ! t(dxarray[i],$DxCatBody.); flag3mBodySign=1; end;
1310      /* flags for new chronic significant condition */
1311      		if svcdate > &StartDate.-90  and put(dxarray[i],$DxCatAssign.)='Chronic' and put(dxa
1311    ! rray[i],$DxCatHigh.)='High' and
1312      		   ^(rec_type='O' and (substr(svcscat,4,2) in (&SvcCatExclusionList.) or proc1 in (&
1312    ! ProcExclusionList.)))
1313      		then do; dxcat=dxarray[i]; flagNew3mChronicSign=1; end;
1314      		if &StartDate.-366 < svcdate <= &StartDate.-90  and put(dxarray[i],$DxCatAssign.)='C
1314    ! hronic' and put(dxarray[i],$DxCatHigh.)='High' and
1315      		   ^(rec_type='O' and (substr(svcscat,4,2) in (&SvcCatExclusionList.) or proc1 in (&
1315    ! ProcExclusionList.)))
1316      		then do; dxcat=dxarray[i]; flagNew12mChronicSign=1; end;
1317      		if missing(dxcat)=0 or missing(body)=0 then output;
1318      	end;
1319      run;

NOTE: 2883 observations were read from "TEMP.SampleIPOPwDS1"
NOTE: Data set "WORK.trash502" has 1002 observation(s) and 20 variable(s)
NOTE: The data step took :
      real time : 0.109
      cpu time  : 0.047


1320      
1321      *** count the unique DxCats for different combinations of Acute/Chronic/Sign/3m/6m/eac
1321    ! h, it's using the flags defined in the previous step;
54                                       The WPS System      23:19 Friday, October 26, 2018     

1322      proc sql;
1323      create view trash503 as select
1324      	enrolid,
1325      	count(distinct dxcat) as Count3mAcuteStage3
1326      from trash502
1327      where flag3mAcuteStage3=1
1328      group by enrolid;
NOTE: View WORK.trash503 successfully created
1329      
1330      create view trash504 as select
1331      	enrolid,
1332      	count(distinct dxcat) as Count3mChronicStage3
1333      from trash502
1334      where flag3mChronicStage3=1
1335      group by enrolid;
NOTE: View WORK.trash504 successfully created
1336      
1337      create view trash505 as select
1338      	enrolid,
1339      	count(distinct dxcat) as Count6mChronicStage3
1340      from trash502
1341      where flag6mChronicStage3=1
1342      group by enrolid;
NOTE: View WORK.trash505 successfully created
1343      
1344      create view trash506 as select
1345      	enrolid,
1346      	count(distinct dxcat) as Count3mAcuteSign
1347      from trash502
1348      where flag3mAcuteSign=1
1349      group by enrolid;
NOTE: View WORK.trash506 successfully created
1350      
1351      create view trash507 as select
1352      	enrolid,
1353      	count(distinct dxcat) as Count3mChronicSign
1354      from trash502
1355      where flag3mChronicSign=1
1356      group by enrolid;
NOTE: View WORK.trash507 successfully created
1357      
1358      create view trash508 as select
1359      	enrolid,
1360      	count(distinct dxcat) as Count6mChronicSign
1361      from trash502
1362      where flag6mChronicSign=1
1363      group by enrolid;
NOTE: View WORK.trash508 successfully created
1364      
1365      create view trash508_1 as select
1366      	enrolid,
1367      	count(distinct dxcat) as Count12mChronicSign
1368      from trash502
55                                       The WPS System      23:19 Friday, October 26, 2018     

1369      where flag12mChronicSign=1
1370      group by enrolid;
NOTE: View WORK.trash508_1 successfully created
1371      
1372      create view trash509 as select
1373      	enrolid,
1374      	count(distinct dxcat) as Count3mAcute
1375      from trash502
1376      where flag3mAcute=1
1377      group by enrolid;
NOTE: View WORK.trash509 successfully created
1378      
1379      create view trash510 as select
1380      	enrolid,
1381      	count(distinct dxcat) as Count6mAcute
1382      from trash502
1383      where flag6mAcute=1
1384      group by enrolid;
NOTE: View WORK.trash510 successfully created
1385      
1386      create view trash511 as select
1387      	enrolid,
1388      	count(distinct dxcat) as Count3mChronic
1389      from trash502
1390      where flag3mChronic=1
1391      group by enrolid;
NOTE: View WORK.trash511 successfully created
1392      
1393      create view trash512 as select
1394      	enrolid,
1395      	count(distinct dxcat) as Count12mChronic
1396      from trash502
1397      where flag12mChronic=1
1398      group by enrolid;
NOTE: View WORK.trash512 successfully created
1399      
1400      *** count the unique Body systems;
1401      create view trash513 as select
1402      	enrolid,
1403      	count(distinct body) as Count3mBody
1404      from trash502
1405      where flag3mBody=1
1406      group by enrolid;
NOTE: View WORK.trash513 successfully created
1407      
1408      create view trash514 as select
1409      	enrolid,
1410      	count(distinct body) as Count3mBodySign
1411      from trash502
1412      where flag3mBodySign=1
1413      group by enrolid;
NOTE: View WORK.trash514 successfully created
1414      
56                                       The WPS System      23:19 Friday, October 26, 2018     

1415      *** create flag for new significant chronic condition;
NOTE: Procedure sql step took :
      real time : 0.248
      cpu time  : 0.008


1416      proc sql;
1417      create view trash515 as select distinct
1418      	a.enrolid,
1419      	1 as flag3mNewChronicSign
1420      from
1421      	trash502(where=(flagNew3mChronicSign=1)) as a
1422      left join
1423      	trash502(where=(flagNew12mChronicSign=1)) as b
1424      on
1425      	a.enrolid=b.enrolid and a.dxcat=b.dxcat
1426      where
1427      	a.dxcat ne b.dxcat;
NOTE: View WORK.trash515 successfully created
1428      
1429      *** create flag for number of days with Stage3 within last 3m;
NOTE: Procedure sql step took :
      real time : 0.018
      cpu time  : 0.000


1430      proc sql;
1431      create view trash516 as select
1432      	enrolid,
1433      	count(distinct svcdate) as Days3mStage3
1434      from trash502
1435      where flag3mStage3=1
1436      group by enrolid;
NOTE: View WORK.trash516 successfully created
1437      
1438      *** put all the DxCat related variables from IP and OP claims together;
NOTE: Procedure sql step took :
      real time : 0.180
      cpu time  : 0.001


1439      DATA
1440      	trash531;
1441      Merge
1442      	trash501(in=a)
1443      	trash503(in=b)
1444      	trash504(in=c)
1445      	trash505(in=d)
1446      	trash506(in=e)
1447      	trash507(in=f)
1448      	trash508(in=g)
1449      	trash508_1(in=g_1)
1450      	trash509(in=h)
57                                       The WPS System      23:19 Friday, October 26, 2018     

1451      	trash510(in=i)
1452      	trash511(in=j)
1453      	trash512(in=k)
1454      	trash513(in=l)
1455      	trash514(in=m)
1456      	trash515(in=n)
1457      	trash516(in=o);
1458      By
1459      	enrolid;
1460      If
1461      	a or b or c or d or e or f or g or g_1 or h or i or j or k or l or m or n or o;
1462      run;

NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: 131 observations were read from "WORK.trash501"
NOTE: 0 observations were read from "WORK.trash503"
NOTE: 0 observations were read from "WORK.trash504"
NOTE: 0 observations were read from "WORK.trash505"
NOTE: 0 observations were read from "WORK.trash506"
NOTE: 0 observations were read from "WORK.trash507"
NOTE: 12 observations were read from "WORK.trash508"
NOTE: 32 observations were read from "WORK.trash508_1"
NOTE: 0 observations were read from "WORK.trash509"
NOTE: 49 observations were read from "WORK.trash510"
NOTE: 0 observations were read from "WORK.trash511"
NOTE: 71 observations were read from "WORK.trash512"
NOTE: 0 observations were read from "WORK.trash513"
NOTE: 0 observations were read from "WORK.trash514"
NOTE: 0 observations were read from "WORK.trash515"
NOTE: 0 observations were read from "WORK.trash516"
NOTE: Data set "WORK.trash531" has 131 observation(s) and 18 variable(s)
NOTE: The data step took :
      real time : 1.062
      cpu time  : 0.053


1463      
1464      *** Merge with the original Sample and use counts of zero when no admissions;
58                                       The WPS System      23:19 Friday, October 26, 2018     

1465      PROC SQL;
1466      Create Table temp.IPandOP as
1467      Select
1468      	a.enrolid,
1469      	max(0,b.flag12mMHSA) as flag12mMHSA,
1470      	max(0,b.flag3mGYN) as flag3mGYN,
1471      	max(0,b.Count3mAcuteStage3) as Count3mAcuteStage3,
1472      	max(0,b.Count3mChronicStage3) as Count3mChronicStage3,
1473      	max(0,b.Count6mChronicStage3) as Count6mChronicStage3,
1474      	max(0,b.Count3mAcuteSign) as Count3mAcuteSign,
1475      	max(0,b.Count3mChronicSign) as Count3mChronicSign,
1476      	max(0,b.Count6mChronicSign) as Count6mChronicSign,
1477      	max(0,b.Count12mChronicSign) as Count12mChronicSign,
1478      	max(0,b.Count3mAcute) as Count3mAcute,
1479      	max(0,b.Count6mAcute) as Count6mAcute,
1480      	max(0,b.Count3mChronic) as Count3mChronic,
1481      	max(0,b.Count12mChronic) as Count12mChronic,
1482      	max(0,b.Count3mBody) as Count3mBody,
1483      	max(0,b.Count3mBodySign) as Count3mBodySign,
1484      	max(0,b.flag3mNewChronicSign) as flag3mNewChronicSign,
1485      	max(0,b.Days3mStage3) as Days3mStage3
1486      From
1487      	(Select distinct enrolid from temp.SamplewClassification) as a
1488      Left Join
1489      	work.trash531 as b
1490      On
1491      	a.enrolid=b.enrolid
1492      Order by
1493      	a.enrolid;
NOTE: View opening spill file for output observations.
NOTE: Data set "TEMP.IPandOP" has 179 observation(s) and 18 variable(s)
1494      quit;
NOTE: Procedure SQL step took :
      real time : 0.228
      cpu time  : 0.020


1495      
1496      
1497      *** summarize the outpatient data ***;
1498      ************************************;
1499      
1500      PROC SQL;
1501      *** get all the outpatient data from the matched IDs;
1502      Create View trash001 as select distinct
1503      	a.enrolid,
1504      	a.msclmid,
1505      	a.facprof,
1506      	a.fachdid,
1507      	a.proc1,
1508      	a.procgrp,
1509      	a.dxcat,
1510      	a.svcscat,
59                                       The WPS System      23:19 Friday, October 26, 2018     

1511      	a.stdprov,
1512      	a.svcdate,
1513      	a.pay
1514      from
1515      	arch&year..ccaeo&MSversion.			as a,
1516      	temp.SamplewClassification	as b	
1517      where
1518      	a.enrolid=b.enrolid
1519      order by
1520      	a.enrolid,
1521      	a.svcdate;
NOTE: View WORK.trash001 successfully created
1522      
1523      *** map the principal DxCat from the outpatient claim to chronic/acute;
1524      Create View trash002 as select
1525      	a.*,
1526      	b.category
1527      from
1528      	trash001					as a
1529      left join
1530      	temp.GeneralAssignments		as b
1531      on
1532      	a.dxcat=b.dxcat;
NOTE: View WORK.trash002 successfully created
1533      
1534      *** link to ATG from OPEG Lookup;
1535      Create View trash003 as select
1536      	a.*,
1537      	b.ATG
1538      from
1539      	trash002 		as a
1540      left join
1541      	temp.OPEGLookup		as b
1542      on
1543      	a.proc1=b.hcpcs;
NOTE: View WORK.trash003 successfully created
1544      
1545      *** link to Significant Conditions based on ProcGrp map;
1546      Create View trash004 as select
1547      	a.*,
1548      	b.Significance
1549      from
1550      	trash003 		as a
1551      left join
1552      	temp.SignificantConditions		as b
1553      on
1554      	a.dxcat=b.dxcat;
NOTE: View WORK.trash004 successfully created
1555      
1556      *** link to facility header table to get the inpatient flag based on CASEID being pres
1556    ! ent;
1557      Create Table temp.SampleOtp1 as select distinct
1558      	a.*,
60                                       The WPS System      23:19 Friday, October 26, 2018     

1559      	b.caseid
1560      from
1561      	trash004			as a
1562      left join
1563      	arch&year..ccaef&MSversion.	as b
1564      on
1565      	a.enrolid=b.enrolid and
1566      	a.fachdid=b.fachdid;
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: Data set "TEMP.SampleOtp1" has 2785 observation(s) and 15 variable(s)
1567      Quit;
NOTE: Procedure SQL step took :
      real time : 31:46.965
      cpu time  : 7:48.651


1568      
1569      
1570      /*** check some counts of patients/claims in the data selected above;
1571      proc sql;
1572      select count (distinct enrolid) from temp.SampleOtp1;
1573      select enrolid format=15.0, count(distinct svcdate) as count_claims from temp.SampleOt
1573    ! p1 group by enrolid;
1574      quit;*/
1575      
1576      PROC SQL;
1577      *** counting 3/12 months office visits to any provider for any conditions by service d
1577    ! ate;
1578      Create View work.trash001_1 as
1579      select
1580      	enrolid,
1581      	count(distinct msclmid) as Count3mOV
1582      from
1583      	temp.SampleOtp1
1584      where
1585      	svcdate > &StartDate. - 90							and		/*3 months*/
1586      	substr(svcscat,4,2) in ("25","24")							and		/*office visits*/
1587      	^(proc1 in (&ProcExclusionList.))							/*exclusion based on procedures*/
1588      group by
1589      	enrolid
1590      ;
NOTE: View WORK.trash001_1 successfully created
1591      Create View work.trash001_2 as
1592      select
1593      	enrolid,
1594      	count(distinct msclmid) as Count12mOV
1595      from
1596      	temp.SampleOtp1
1597      where
1598      	svcdate > &StartDate. - 366							and		/*12 months*/
61                                       The WPS System      23:19 Friday, October 26, 2018     

1599      	substr(svcscat,4,2) in ("25","24")							and		/*office visits*/
1600      	^(proc1 in (&ProcExclusionList.))							/*exclusion based on procedures*/
1601      group by
1602      	enrolid
1603      ;
NOTE: View WORK.trash001_2 successfully created
1604      
1605      *** counting 3/6 months office visits to any provider for Chronic conditions by servic
1605    ! e date;
1606      Create View work.trash002_1 as
1607      select
1608      	enrolid,
1609      	count(distinct msclmid) as Count3mOVChronic
1610      from
1611      	temp.SampleOtp1
1612      where
1613      	category='Chronic'									and		/*Chronic*/
1614      	svcdate > &StartDate. - 90 							and		/*3 months*/
1615      	substr(svcscat,4,2) in ("25","24")							and		/*office visits*/
1616      	^(proc1 in (&ProcExclusionList.))							/*exclusion based on procedures*/
1617      group by
1618      	enrolid
1619      ;
NOTE: View WORK.trash002_1 successfully created
1620      Create View work.trash002_2 as
1621      select
1622      	enrolid,
1623      	count(distinct msclmid) as Count6mOVChronic
1624      from
1625      	temp.SampleOtp1
1626      where
1627      	category='Chronic'									and		/*Chronic*/
1628      	svcdate > &StartDate. - 180							and		/*6 months*/
1629      	substr(svcscat,4,2) in ("25","24")							and		/*office visits*/
1630      	^(proc1 in (&ProcExclusionList.))							/*exclusion based on procedures*/
1631      group by
1632      	enrolid
1633      ;
NOTE: View WORK.trash002_2 successfully created
1634      
1635      *** counting 3/6 months office visits to specialists for Chronic conditions by service
1635    !  date;
1636      Create View work.trash003_1 as
1637      select
1638      	enrolid,
1639      	count(distinct msclmid) as Count3mOVChronicSpecialist
1640      from
1641      	temp.SampleOtp1
1642      where
1643      	category='Chronic'							and		/*Chronic*/
1644      	svcdate > &StartDate. - 90 					and		/*3 months*/
1645      	substr(svcscat,4,2) in ("25","24")					and		/*office visits*/
1646      	stdprov between 100 and 799					and		/*specialists*/
62                                       The WPS System      23:19 Friday, October 26, 2018     

1647      	^(stdprov in (&SpecExclusionList.))			and		/*exclusions from specialists*/
1648      	^(proc1 in (&ProcExclusionList.))					/*exclusion based on procedures*/
1649      group by
1650      	enrolid
1651      ;
NOTE: View WORK.trash003_1 successfully created
1652      Create View work.trash003_2 as
1653      select
1654      	enrolid,
1655      	count(distinct msclmid) as Count6mOVChronicSpecialist
1656      from
1657      	temp.SampleOtp1
1658      where
1659      	category='Chronic'							and		/*Chronic*/
1660      	svcdate > &StartDate. - 180 				and		/*6 months*/
1661      	substr(svcscat,4,2) in ("25","24")					and		/*office visits*/
1662      	stdprov between 100 and 799					and		/*specialists*/
1663      	^(stdprov in (&SpecExclusionList))			and		/*exclusions from specialists*/
1664      	^(proc1 in (&ProcExclusionList.))					/*exclusion based on procedures*/
1665      group by
1666      	enrolid
1667      ;
NOTE: View WORK.trash003_2 successfully created
1668      
1669      *** counting 3 months unique specialties for office visits;
1670      Create View work.trash004 as
1671      select
1672      	enrolid,
1673      	count(distinct stdprov) as Count3mOVSpecialties
1674      from
1675      	temp.SampleOtp1
1676      where
1677      	svcdate > &StartDate. - 90					and		/*3 months*/
1678      	stdprov between 100 and 799					and		/*specialists*/
1679      	^(stdprov in (&SpecExclusionList))			and		/*exclusions from specialists*/
1680      	^(proc1 in (&ProcExclusionList.))			and		/*exclusion based on procedures*/
1681      	substr(svcscat,4,2) in ("25","24")							/*office visits*/
1682      group by
1683      	enrolid
1684      ;
NOTE: View WORK.trash004 successfully created
1685      
1686      *** counting 3 months unique specialties for office visits Chronic;
1687      Create View work.trash005 as
1688      select
1689      	enrolid,
1690      	count(distinct stdprov) as Count3mOVChronicSpecialties
1691      from
1692      	temp.SampleOtp1
1693      where
1694      	svcdate > &StartDate. - 90					and		/*3 months*/
1695      	stdprov between 100 and 799					and		/*specialists*/
1696      	^(stdprov in (&SpecExclusionList))			and		/*exclusions from specialists*/
63                                       The WPS System      23:19 Friday, October 26, 2018     

1697      	^(proc1 in (&ProcExclusionList.))			and		/*exclusion based on procedures*/
1698      	substr(svcscat,4,2) in ("25","24")					and		/*office visits*/
1699      	category='Chronic'									/*Chronic*/
1700      group by
1701      	enrolid
1702      ;
NOTE: View WORK.trash005 successfully created
1703      
1704      *** counting 3/6 months ER visits for any conditions by claim id;
1705      Create View work.trash006_1 as
1706      select
1707      	enrolid,
1708      	count(distinct msclmid) as Count3mER
1709      from
1710      	temp.SampleOtp1
1711      where
1712      	svcdate > &StartDate. - 90					and		/*3 months*/
1713      	facprof='F'									and		/*Facility claim*/
1714      	substr(svcscat,4,2)="20"					and		/*ER visits*/
1715      	missing(caseid)=1							and 	/*no inpatient*/
1716      	^(proc1 in (&ProcExclusionList.))					/*exclusion based on procedures*/
1717      group by
1718      	enrolid
1719      ;
NOTE: View WORK.trash006_1 successfully created
1720      
1721      Create View work.trash006_2 as
1722      select
1723      	enrolid,
1724      	count(distinct msclmid) as Count12mER
1725      from
1726      	temp.SampleOtp1
1727      where
1728      	svcdate > &StartDate. - 366					and		/*12 months*/
1729      	facprof='F'									and		/*Facility claim*/
1730      	substr(svcscat,4,2)="20"					and		/*ER visits*/
1731      	missing(caseid)=1							and 	/*no inpatient*/
1732      	^(proc1 in (&ProcExclusionList.))					/*exclusion based on procedures*/
1733      group by
1734      	enrolid
1735      ;
NOTE: View WORK.trash006_2 successfully created
1736      
1737      *** counting 3/6 months ER visits for Chronic conditions by claim id;
1738      Create View work.trash007_1 as
1739      select
1740      	enrolid,
1741      	count(distinct msclmid) as Count3mERChronic
1742      from
1743      	temp.SampleOtp1
1744      where
1745      	category='Chronic'							and		/*Chronic*/
1746      	svcdate > &StartDate. - 90					and		/*3 months*/
64                                       The WPS System      23:19 Friday, October 26, 2018     

1747      	facprof='F'									and		/*Facility claim*/
1748      	substr(svcscat,4,2)="20"					and		/*ER visits*/
1749      	missing(caseid)=1							and 	/*no inpatient*/
1750      	^(proc1 in (&ProcExclusionList.))					/*exclusion based on procedures*/
1751      group by
1752      	enrolid
1753      ;
NOTE: View WORK.trash007_1 successfully created
1754      
1755      Create View work.trash007_2 as
1756      select
1757      	enrolid,
1758      	count(distinct msclmid) as Count6mERChronic
1759      from
1760      	temp.SampleOtp1
1761      where
1762      	category='Chronic'							and		/*Chronic*/
1763      	svcdate > &StartDate. - 180					and		/*6 months*/
1764      	facprof='F'									and		/*Facility claim*/
1765      	substr(svcscat,4,2)="20"					and		/*ER visits*/
1766      	missing(caseid)=1							and 	/*no inpatient*/
1767      	^(proc1 in (&ProcExclusionList.))					/*exclusion based on procedures*/
1768      group by
1769      	enrolid
1770      ;
NOTE: View WORK.trash007_2 successfully created
1771      
1772      *** days since any ER;
1773      Create View work.trash008 as
1774      select
1775      	enrolid,
1776      	&StartDate.-max(svcdate) 	as DaysER
1777      from
1778      	temp.SampleOtp1
1779      where
1780      	facprof='F'									and		/*Facility claim*/
1781      	substr(svcscat,4,2)="20"					and		/*ER visits*/
1782      	missing(caseid)=1							and 	/*no inpatient*/
1783      	^(proc1 in (&ProcExclusionList.))					/*exclusion based on procedures*/
1784      group by
1785      	enrolid
1786      ;
NOTE: View WORK.trash008 successfully created
1787      
1788      *** days since Major ER;
1789      *** from DS output transpose the dxcat and stage, one per row and dedup, so that can b
1789    ! e merged into OP data;
NOTE: Procedure SQL step took :
      real time : 0.270
      cpu time  : 0.010


1790      data work.trash0091(keep=enrolid svcdate dxcat dxstage);
65                                       The WPS System      23:19 Friday, October 26, 2018     

1791      set temp.SampleIPOPwDS1;
1792      array listcat[4] dxcat1-dxcat4;
1793      array liststage[4] dxstage1-dxstage4;
1794      do i=1 to 4;
1795      	dxcat=listcat[i];
1796      	dxstage=liststage[i];
1797      	if dxstage >= 3 then output;
1798      end;
1799      run;

NOTE: 2883 observations were read from "TEMP.SampleIPOPwDS1"
NOTE: Data set "WORK.trash0091" has 1 observation(s) and 4 variable(s)
NOTE: The data step took :
      real time : 0.044
      cpu time  : 0.005


1800      proc sort data=work.trash0091 nodupkey; by enrolid svcdate dxcat; run;
NOTE: 1 observations were read from "WORK.trash0091"
NOTE: No observations with duplicate sort keys were found
NOTE: Data set "WORK.trash0091" has 1 observation(s) and 4 variable(s)
NOTE: Procedure sort step took :
      real time : 0.047
      cpu time  : 0.001


1801      *** Merge the Stage from DS;
1802      proc sql;
1803      Create View work.trash0092 as
1804      Select
1805      	a.*,
1806      	b.dxstage
1807      From
1808      	temp.SampleOtp1 as a
1809      Left Join
1810      	work.trash0091 as b
1811      On
1812      	a.enrolid=b.enrolid and
1813      	a.svcdate=b.svcdate and
1814      	a.dxcat=b.dxcat;
NOTE: View WORK.trash0092 successfully created
1815      *** count the days using all the criteria including DS stage;
1816      Create View work.trash009 as
1817      Select
1818      	enrolid,
1819      	&StartDate.-max(svcdate) 	as DaysMajorER
1820      from
1821      	work.trash0092
1822      where
1823      	facprof='F'									and		/*Facility claim*/
1824      	substr(svcscat,4,2)="20"					and		/*ER visits*/
1825      	missing(caseid)=1							and 	/*no inpatient*/
1826      	^(proc1 in (&ProcExclusionList.))			and		/*exclusion based on procedures*/
66                                       The WPS System      23:19 Friday, October 26, 2018     

1827      	(Significance="High" or dxstage>=3)					/*must be significant or stage higher than 3*
1827    ! /
1828      group by
1829      	enrolid
1830      ;
NOTE: View WORK.trash009 successfully created
1831      
1832      *** days since home health;
1833      Create View work.trash010 as
1834      select
1835      	enrolid,
1836      	&StartDate.-max(svcdate) 	as DaysHH
1837      from
1838      	temp.SampleOtp1
1839      where
1840      	substr(svcscat,4,2)="33"					and		/*Home Health claim*/
1841      	missing(caseid)=1							and 	/*no inpatient*/
1842      	^(proc1 in (&ProcExclusionList.))					/*exclusion based on procedures*/
1843      group by
1844      	enrolid
1845      ;
NOTE: View WORK.trash010 successfully created
1846      
1847      *** days since Major Surgery;
1848      Create View work.trash011 as
1849      select
1850      	enrolid,
1851      	&StartDate.-max(svcdate) 	as DaysMajorSurg
1852      from
1853      	temp.SampleOtp1
1854      where
1855      	missing(caseid)=1							and 	/*no inpatient*/
1856      	ATG="SURG MAJOR"
1857      group by
1858      	enrolid
1859      ;
NOTE: View WORK.trash011 successfully created
1860      
1861      *** days since Oxygen treatment;
1862      Create View work.trash012 as
1863      select
1864      	enrolid,
1865      	&StartDate.-max(svcdate) 	as DaysOxygen
1866      from
1867      	temp.SampleOtp1
1868      where
1869      	missing(caseid)=1							and 	/*no inpatient*/
1870      	proc1 in (&OxygenCPTList.)
1871      group by
1872      	enrolid
1873      ;
NOTE: View WORK.trash012 successfully created
1874      
67                                       The WPS System      23:19 Friday, October 26, 2018     

1875      *** Days in LTC and Flag for LTC in the last 90 days (LTC defined based on svcscat = 1
1875    ! 02xx);
1876      Create View work.trash013 as
1877      select
1878      	a.enrolid,
1879      	a.fachdid,
1880      	a.svcscat,
1881      	b.svcdate as header_date,
1882      	b.tsvcdat as header_last,
1883      	b.days
1884      from
1885      	temp.SampleOTP1(where=
1886      					(substr(svcscat,1,3)='102' and svcdate > &StartDate. - 90)
1887      					) as a,
1888      	arch&year..ccaef&MSversion. as b
1889      where
1890      	a.enrolid=b.enrolid and
1891      	a.fachdid=b.fachdid
1892      order by
1893      	enrolid,
1894      	header_date;
NOTE: View WORK.trash013 successfully created
1895      ;
1896      Quit;
NOTE: Procedure sql step took :
      real time : 0.119
      cpu time  : 0.005


1897      
1898      data work.trash013_1(keep=enrolid Days3mLTC flag3mLTC);
1899      	set work.trash013;
1900      	by enrolid;
1901      	retain first last Days3mLTC 0;
1902      	if first.enrolid then do;
1903      		first=header_date;
1904      		last=header_last;
1905      		Days3mLTC=0;
1906      	end;
1907      	if header_date <= last then
1908      		last=max(last,header_last);
1909      	else do;
1910      		Days3mLTC=Days3mLTC + last-first;
1911      		first=header_date;
1912      		last=header_last;
1913      	end;
1914      	if last.enrolid then do;
1915      		Days3mLTC=Days3mLTC + last-first;
1916      		flag3mLTC=1;
1917      		output;
1918      	end;
1919      run;

68                                       The WPS System      23:19 Friday, October 26, 2018     

NOTE: View opening spill file for output observations.
NOTE: 0 observations were read from "WORK.trash013"
NOTE: Data set "WORK.trash013_1" has 0 observation(s) and 3 variable(s)
NOTE: The data step took :
      real time : 55.301
      cpu time  : 24.788


1920      
1921      *** put the all the outpatient related variables together;
1922      DATA
1923      	work.trash101;
1924      merge
1925      	trash001_1(in=a)
1926      	trash001_2(in=b)
1927      	trash002_1(in=c)
1928      	trash002_2(in=d)
1929      	trash003_1(in=e)
1930      	trash003_2(in=f)
1931      	trash004 (in=g)
1932      	trash005 (in=h)
1933      	trash006_1(in=i)
1934      	trash006_2(in=j)
1935      	trash007_1(in=k)
1936      	trash007_2(in=l)
1937      	trash008  (in=m)
1938      	trash009  (in=n)
1939      	trash010  (in=o)
1940      	trash011  (in=p)
1941      	trash012  (in=q)
1942      	trash013_1(in=r)
1943      ;
1944      by
1945      	enrolid;
1946      if
1947      	a or b or c or d or e or f or g or h or i or j or k or l or m or n or o or p or q or 
1947    ! r;
1948      run;

NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
69                                       The WPS System      23:19 Friday, October 26, 2018     

NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: 78 observations were read from "WORK.trash001_1"
NOTE: 128 observations were read from "WORK.trash001_2"
NOTE: 31 observations were read from "WORK.trash002_1"
NOTE: 43 observations were read from "WORK.trash002_2"
NOTE: 15 observations were read from "WORK.trash003_1"
NOTE: 23 observations were read from "WORK.trash003_2"
NOTE: 26 observations were read from "WORK.trash004"
NOTE: 15 observations were read from "WORK.trash005"
NOTE: 6 observations were read from "WORK.trash006_1"
NOTE: 19 observations were read from "WORK.trash006_2"
NOTE: 1 observations were read from "WORK.trash007_1"
NOTE: 1 observations were read from "WORK.trash007_2"
NOTE: 19 observations were read from "WORK.trash008"
NOTE: 2 observations were read from "WORK.trash009"
NOTE: 0 observations were read from "WORK.trash010"
NOTE: 7 observations were read from "WORK.trash011"
NOTE: 0 observations were read from "WORK.trash012"
NOTE: 0 observations were read from "WORK.trash013_1"
NOTE: Data set "WORK.trash101" has 130 observation(s) and 20 variable(s)
NOTE: The data step took :
      real time : 0.505
      cpu time  : 0.040


1949      
1950      *** Merge with the original Sample and use counts of zero when no admissions;
1951      PROC SQL;
1952      Create Table temp.OP as
1953      select
1954      	a.enrolid,
1955      	max(0,b.Count3mOV)							as Count3mOV,
1956      	max(0,b.Count12mOV)							as Count12mOV,
1957      	max(0,b.Count3mOVChronic)					as Count3mOVChronic,
1958      	max(0,b.Count6mOVChronic)					as Count6mOVChronic,
1959      	max(0,b.Count3mOVChronicSpecialist)			as Count3mOVChronicSpecialist,
1960      	max(0,b.Count6mOVChronicSpecialist)			as Count6mOVChronicSpecialist,
1961      	max(0,b.Count3mOVSpecialties)				as Count3mOVSpecialties,
1962      	max(0,b.Count3mOVChronicSpecialties)		as Count3mOVChronicSpecialties,
1963      	max(0,b.Count3mEr)							as Count3mER,
1964      	max(0,b.Count12mER)							as Count12mER,
1965      	max(0,b.Count3mERChronic)					as Count3mERChronic,
1966      	max(0,b.Count6mERChronic)					as Count6mERChronic,
1967      	min(365,b.DaysER)							as DaysER,
1968      	min(365,b.DaysMajorER)						as DaysMajorER,
1969      	min(365,b.DaysHH)							as DaysHH,
1970      	min(365,b.DaysMajorSurg)					as DaysMajorSurg,
1971      	min(365,b.DaysOxygen)						as DaysOxygen,
1972      	max(0,b.Days3mLTC)							as Days3mLTC,
1973      	max(0,b.flag3mLTC)							as flag3mLTC
70                                       The WPS System      23:19 Friday, October 26, 2018     

1974      from
1975      	(Select distinct enrolid from temp.SamplewClassification) as a
1976      left join
1977      	work.trash101 as b
1978      on
1979      	a.enrolid=b.enrolid
1980      Order by
1981      	a.enrolid;
NOTE: View opening spill file for output observations.
NOTE: Data set "TEMP.OP" has 179 observation(s) and 20 variable(s)
1982      
1983      *************************************************************;
1984      *** Merge all the variables from all claims OP/IP/Rx together;
1985      *** Note: deleted 'temp.Rx        (in=c)';
NOTE: Procedure SQL step took :
      real time : 0.310
      cpu time  : 0.022


1986      data temp.AllModelInputs;
1987      merge
1988      	temp.SamplewClassification(in=orig)
1989      	temp.OP		(in=a)
1990      	temp.IP		(in=b)
1991      	temp.IPandOP(in=c);
1992      if orig or a or b or c;
1993      by enrolid;
1994      run;

NOTE: 179 observations were read from "TEMP.SamplewClassification"
NOTE: 179 observations were read from "TEMP.OP"
NOTE: 179 observations were read from "TEMP.IP"
NOTE: 179 observations were read from "TEMP.IPandOP"
NOTE: Data set "TEMP.AllModelInputs" has 179 observation(s) and 49 variable(s)
NOTE: The data step took :
      real time : 0.095
      cpu time  : 0.003


1995      proc export
1996      	data=temp.AllModelInputs
1997      	outfile="&outpath./ModelInputs&version..csv"
1998      	replace;
1999      run;
NOTE: Procedure export step took :
      real time : 0.001
      cpu time  : 0.000


2000      data _null_;
2001        file '/rpscan/u071439/output/31DEC2015Enrolids200_10252018/ModelInputs31DEC2015Enrol
2001    ! ids200_10252018.csv' delimiter=',' DSD DROPOVER LRECL=884;
2002        format ENROLID BEST12.;
71                                       The WPS System      23:19 Friday, October 26, 2018     

2003        format AssignmentFinal $1.;
2004        format Count3mOV BEST12.;
2005        format Count12mOV BEST12.;
2006        format Count3mOVChronic BEST12.;
2007        format Count6mOVChronic BEST12.;
2008        format Count3mOVChronicSpecialist BEST12.;
2009        format Count6mOVChronicSpecialist BEST12.;
2010        format Count3mOVSpecialties BEST12.;
2011        format Count3mOVChronicSpecialties BEST12.;
2012        format Count3mER BEST12.;
2013        format Count12mER BEST12.;
2014        format Count3mERChronic BEST12.;
2015        format Count6mERChronic BEST12.;
2016        format DaysER BEST12.;
2017        format DaysMajorER BEST12.;
2018        format DaysHH BEST12.;
2019        format DaysMajorSurg BEST12.;
2020        format DaysOxygen BEST12.;
2021        format Days3mLTC BEST12.;
2022        format flag3mLTC BEST12.;
2023        format CountAdm3mAll BEST12.;
2024        format CountAdm3mChronic BEST12.;
2025        format CountAdm6mAll BEST12.;
2026        format CountAdm6mChronic BEST12.;
2027        format SumLOS3mAll BEST12.;
2028        format DaysAnyAdm BEST12.;
2029        format DaysChronicAdm BEST12.;
2030        format DaysSurgAdm BEST12.;
2031        format DaysMedicalAdm BEST12.;
2032        format DaysMtrntyAdm BEST12.;
2033        format DaysMHSAAdm BEST12.;
2034        format flag12mMHSA BEST12.;
2035        format flag3mGYN BEST12.;
2036        format Count3mAcuteStage3 BEST12.;
2037        format Count3mChronicStage3 BEST12.;
2038        format Count6mChronicStage3 BEST12.;
2039        format Count3mAcuteSign BEST12.;
2040        format Count3mChronicSign BEST12.;
2041        format Count6mChronicSign BEST12.;
2042        format Count12mChronicSign BEST12.;
2043        format Count3mAcute BEST12.;
2044        format Count6mAcute BEST12.;
2045        format Count3mChronic BEST12.;
2046        format Count12mChronic BEST12.;
2047        format Count3mBody BEST12.;
2048        format Count3mBodySign BEST12.;
2049        format flag3mNewChronicSign BEST12.;
2050        format Days3mStage3 BEST12.;
2051        if _n_=1 then do;
2052            put
2053               'ENROLID'        ','
2054               'AssignmentFinal'        ','
2055               'Count3mOV'        ','
72                                       The WPS System      23:19 Friday, October 26, 2018     

2056               'Count12mOV'        ','
2057               'Count3mOVChronic'        ','
2058               'Count6mOVChronic'        ','
2059               'Count3mOVChronicSpecialist'        ','
2060               'Count6mOVChronicSpecialist'        ','
2061               'Count3mOVSpecialties'        ','
2062               'Count3mOVChronicSpecialties'        ','
2063               'Count3mER'        ','
2064               'Count12mER'        ','
2065               'Count3mERChronic'        ','
2066               'Count6mERChronic'        ','
2067               'DaysER'        ','
2068               'DaysMajorER'        ','
2069               'DaysHH'        ','
2070               'DaysMajorSurg'        ','
2071               'DaysOxygen'        ','
2072               'Days3mLTC'        ','
2073               'flag3mLTC'        ','
2074               'CountAdm3mAll'        ','
2075               'CountAdm3mChronic'        ','
2076               'CountAdm6mAll'        ','
2077               'CountAdm6mChronic'        ','
2078               'SumLOS3mAll'        ','
2079               'DaysAnyAdm'        ','
2080               'DaysChronicAdm'        ','
2081               'DaysSurgAdm'        ','
2082               'DaysMedicalAdm'        ','
2083               'DaysMtrntyAdm'        ','
2084               'DaysMHSAAdm'        ','
2085               'flag12mMHSA'        ','
2086               'flag3mGYN'        ','
2087               'Count3mAcuteStage3'        ','
2088               'Count3mChronicStage3'        ','
2089               'Count6mChronicStage3'        ','
2090               'Count3mAcuteSign'        ','
2091               'Count3mChronicSign'        ','
2092               'Count6mChronicSign'        ','
2093               'Count12mChronicSign'        ','
2094               'Count3mAcute'        ','
2095               'Count6mAcute'        ','
2096               'Count3mChronic'        ','
2097               'Count12mChronic'        ','
2098               'Count3mBody'        ','
2099               'Count3mBodySign'        ','
2100               'flag3mNewChronicSign'        ','
2101               'Days3mStage3';
2102          end;
2103        set temp.AllModelInputs;
2104        put ENROLID @;
2105        put AssignmentFinal @;
2106        put Count3mOV @;
2107        put Count12mOV @;
2108        put Count3mOVChronic @;
73                                       The WPS System      23:19 Friday, October 26, 2018     

2109        put Count6mOVChronic @;
2110        put Count3mOVChronicSpecialist @;
2111        put Count6mOVChronicSpecialist @;
2112        put Count3mOVSpecialties @;
2113        put Count3mOVChronicSpecialties @;
2114        put Count3mER @;
2115        put Count12mER @;
2116        put Count3mERChronic @;
2117        put Count6mERChronic @;
2118        put DaysER @;
2119        put DaysMajorER @;
2120        put DaysHH @;
2121        put DaysMajorSurg @;
2122        put DaysOxygen @;
2123        put Days3mLTC @;
2124        put flag3mLTC @;
2125        put CountAdm3mAll @;
2126        put CountAdm3mChronic @;
2127        put CountAdm6mAll @;
2128        put CountAdm6mChronic @;
2129        put SumLOS3mAll @;
2130        put DaysAnyAdm @;
2131        put DaysChronicAdm @;
2132        put DaysSurgAdm @;
2133        put DaysMedicalAdm @;
2134        put DaysMtrntyAdm @;
2135        put DaysMHSAAdm @;
2136        put flag12mMHSA @;
2137        put flag3mGYN @;
2138        put Count3mAcuteStage3 @;
2139        put Count3mChronicStage3 @;
2140        put Count6mChronicStage3 @;
2141        put Count3mAcuteSign @;
2142        put Count3mChronicSign @;
2143        put Count6mChronicSign @;
2144        put Count12mChronicSign @;
2145        put Count3mAcute @;
2146        put Count6mAcute @;
2147        put Count3mChronic @;
2148        put Count12mChronic @;
2149        put Count3mBody @;
2150        put Count3mBodySign @;
2151        put flag3mNewChronicSign @;
2152        put Days3mStage3;
2153      run;

NOTE: The file
      '/rpscan/u071439/output/31DEC2015Enrolids200_10252018/ModelInputs31DEC2015Enrolids200_1025
      2018.csv' is:
      File
      Name=/rpscan/u071439/output/31DEC2015Enrolids200_10252018/ModelInputs31DEC2015Enrolids200_
      10252018.csv,
      Access Permissions=-rw-rw-r--, Number of Links=1,
74                                       The WPS System      23:19 Friday, October 26, 2018     

      Owner Name=u071439, Group Name=devl,
      File Size=0, Last Modified=23:52:17 Oct 26 2018,
      Created=23:52:17 Oct 26 2018, Lrecl=884, Recfm=V

NOTE: 180 records were written to file
      '/rpscan/u071439/output/31DEC2015Enrolids200_10252018/ModelInputs31DEC2015Enrolids200_1025
      2018.csv'
      The minimum record length was 124
      The maximum record length was 739
NOTE: 179 observations were read from "TEMP.AllModelInputs"
NOTE: The data step took :
      real time : 0.012
      cpu time  : 0.004


2154      FILENAME ##EXPOUT CLEAR;
2155      
2156      
2157      /*** RUN SPSS and get the Decision Tree model ***/
2158      /*** Implement the Decision Tree Model from SPSS ***/									*************** <<<<<<<<
2158    ! ---------- Put all model+rules together;
2159      data temp.DTModel
2160      /*	(keep=	
2161      			enrolid
2162      			AssignmentFinal /* not available when just scoring, it was used when testing the in
2162    ! itial model with the manual labels *
2163      			Count6mChronicStage3
2164      			CountDaysSuppOpiates3m
2165      			Count12mChronicSign
2166      			Count12mOV
2167      			CountDaysSupp3m
2168      			DaysAnyAdm
2169      			DaysMajorER
2170      			CountTherClassChronic6m
2171      			CountAdm3mAll
2172      			Count6mERChronic
2173      			Count12mER /* not used in the model but we'll use it for validation analysis *
2174      			Count3mER  /* not used in the model but we'll use it for validation analysis *
2175      			PopClass
2176      			Rule)*/;
2177      set temp.AllModelInputs;
2178      if Count6mChronicStage3 <= 0 then do;
2179      	if	CountDaysSuppOpiates3m <= 50 then do;
2180      		if	Count12mChronicSign <= 0 then do;
2181      			if Count12mOV <= 0 then do;
2182      				if CountDaysSupp3m <= 37 then do; PopClass=1; Rule=1; RuleConfidence=input(put(Rul
2182    ! e,RuleConfidence.),best5.3); end;
2183      				else do; PopClass=2; Rule=2; RuleConfidence=input(put(Rule,RuleConfidence.),best5.
2183    ! 3); end;
2184      			end;
2185      			else do;
2186      				if DaysAnyAdm <= 32 then do; PopClass=7; Rule=3; RuleConfidence=input(put(Rule,Rul
2186    ! eConfidence.),best5.3); end;
75                                       The WPS System      23:19 Friday, October 26, 2018     

2187      				else do; PopClass=2; Rule=4; RuleConfidence=input(put(Rule,RuleConfidence.),best5.
2187    ! 3); end;
2188      			end;
2189      		end;
2190      		else do;
2191      			if DaysAnyAdm <= 38 then do; PopClass=7; Rule=5; RuleConfidence=input(put(Rule,Rule
2191    ! Confidence.),best5.3); end;
2192      			else do;
2193      				if Count12mChronicSign <= 4 then do;
2194      					if DaysMajorER <= 255 then do; PopClass=6; Rule=6; RuleConfidence=input(put(Rule,
2194    ! RuleConfidence.),best5.3); end;
2195      					else do;
2196      						if CountTherClassChronic6m <= 6 then do; PopClass=3; Rule=7; RuleConfidence=inpu
2196    ! t(put(Rule,RuleConfidence.),best5.3); end;
2197      						else do; PopClass=5; Rule=8; RuleConfidence=input(put(Rule,RuleConfidence.),best
2197    ! 5.3); end;
2198      					end;
2199      				end;
2200      				else do; PopClass=5; Rule=9; RuleConfidence=input(put(Rule,RuleConfidence.),best5.
2200    ! 3); end;
2201      			end;
2202      		end;
2203      	end;
2204      	else do; PopClass=6; Rule=10; RuleConfidence=input(put(Rule,RuleConfidence.),best5.3)
2204    ! ; end;
2205      end;
2206      else do;
2207      	if CountAdm3mAll <= 0 then do; PopClass=6; Rule=11; RuleConfidence=input(put(Rule,Rul
2207    ! eConfidence.),best5.3); end;
2208      	else do;
2209      		if Count6mERChronic <= 0 then do; PopClass=10; Rule=12; RuleConfidence=input(put(Rul
2209    ! e,RuleConfidence.),best5.3); end;
2210      		else do; PopClass=7; Rule=13; RuleConfidence=input(put(Rule,RuleConfidence.),best5.3
2210    ! ); end;
2211      	end;
2212      end;
2213      run;
NOTE: Variable "CountDaysSuppOpiates3m" may not be initialized
NOTE: Variable "CountDaysSupp3m" may not be initialized
NOTE: Variable "CountTherClassChronic6m" may not be initialized

NOTE: 179 observations were read from "TEMP.AllModelInputs"
NOTE: Data set "TEMP.DTModel" has 179 observation(s) and 55 variable(s)
NOTE: The data step took :
      real time : 0.025
      cpu time  : 0.005


2214      proc export
2215      	data=temp.DTModel
2216      	outfile="&outpath./DTModel&version..csv"
2217      	replace;
2218      run;
76                                       The WPS System      23:19 Friday, October 26, 2018     

NOTE: Procedure export step took :
      real time : 0.001
      cpu time  : 0.000


2219      data _null_;
2220        file '/rpscan/u071439/output/31DEC2015Enrolids200_10252018/DTModel31DEC2015Enrolids2
2220    ! 00_10252018.csv' delimiter=',' DSD DROPOVER LRECL=1000;
2221        format ENROLID BEST12.;
2222        format AssignmentFinal $1.;
2223        format Count3mOV BEST12.;
2224        format Count12mOV BEST12.;
2225        format Count3mOVChronic BEST12.;
2226        format Count6mOVChronic BEST12.;
2227        format Count3mOVChronicSpecialist BEST12.;
2228        format Count6mOVChronicSpecialist BEST12.;
2229        format Count3mOVSpecialties BEST12.;
2230        format Count3mOVChronicSpecialties BEST12.;
2231        format Count3mER BEST12.;
2232        format Count12mER BEST12.;
2233        format Count3mERChronic BEST12.;
2234        format Count6mERChronic BEST12.;
2235        format DaysER BEST12.;
2236        format DaysMajorER BEST12.;
2237        format DaysHH BEST12.;
2238        format DaysMajorSurg BEST12.;
2239        format DaysOxygen BEST12.;
2240        format Days3mLTC BEST12.;
2241        format flag3mLTC BEST12.;
2242        format CountAdm3mAll BEST12.;
2243        format CountAdm3mChronic BEST12.;
2244        format CountAdm6mAll BEST12.;
2245        format CountAdm6mChronic BEST12.;
2246        format SumLOS3mAll BEST12.;
2247        format DaysAnyAdm BEST12.;
2248        format DaysChronicAdm BEST12.;
2249        format DaysSurgAdm BEST12.;
2250        format DaysMedicalAdm BEST12.;
2251        format DaysMtrntyAdm BEST12.;
2252        format DaysMHSAAdm BEST12.;
2253        format flag12mMHSA BEST12.;
2254        format flag3mGYN BEST12.;
2255        format Count3mAcuteStage3 BEST12.;
2256        format Count3mChronicStage3 BEST12.;
2257        format Count6mChronicStage3 BEST12.;
2258        format Count3mAcuteSign BEST12.;
2259        format Count3mChronicSign BEST12.;
2260        format Count6mChronicSign BEST12.;
2261        format Count12mChronicSign BEST12.;
2262        format Count3mAcute BEST12.;
2263        format Count6mAcute BEST12.;
2264        format Count3mChronic BEST12.;
2265        format Count12mChronic BEST12.;
77                                       The WPS System      23:19 Friday, October 26, 2018     

2266        format Count3mBody BEST12.;
2267        format Count3mBodySign BEST12.;
2268        format flag3mNewChronicSign BEST12.;
2269        format Days3mStage3 BEST12.;
2270        format CountDaysSuppOpiates3m BEST12.;
2271        format CountDaysSupp3m BEST12.;
2272        format PopClass BEST12.;
2273        format Rule BEST12.;
2274        format RuleConfidence BEST12.;
2275        format CountTherClassChronic6m BEST12.;
2276        if _n_=1 then do;
2277            put
2278               'ENROLID'        ','
2279               'AssignmentFinal'        ','
2280               'Count3mOV'        ','
2281               'Count12mOV'        ','
2282               'Count3mOVChronic'        ','
2283               'Count6mOVChronic'        ','
2284               'Count3mOVChronicSpecialist'        ','
2285               'Count6mOVChronicSpecialist'        ','
2286               'Count3mOVSpecialties'        ','
2287               'Count3mOVChronicSpecialties'        ','
2288               'Count3mER'        ','
2289               'Count12mER'        ','
2290               'Count3mERChronic'        ','
2291               'Count6mERChronic'        ','
2292               'DaysER'        ','
2293               'DaysMajorER'        ','
2294               'DaysHH'        ','
2295               'DaysMajorSurg'        ','
2296               'DaysOxygen'        ','
2297               'Days3mLTC'        ','
2298               'flag3mLTC'        ','
2299               'CountAdm3mAll'        ','
2300               'CountAdm3mChronic'        ','
2301               'CountAdm6mAll'        ','
2302               'CountAdm6mChronic'        ','
2303               'SumLOS3mAll'        ','
2304               'DaysAnyAdm'        ','
2305               'DaysChronicAdm'        ','
2306               'DaysSurgAdm'        ','
2307               'DaysMedicalAdm'        ','
2308               'DaysMtrntyAdm'        ','
2309               'DaysMHSAAdm'        ','
2310               'flag12mMHSA'        ','
2311               'flag3mGYN'        ','
2312               'Count3mAcuteStage3'        ','
2313               'Count3mChronicStage3'        ','
2314               'Count6mChronicStage3'        ','
2315               'Count3mAcuteSign'        ','
2316               'Count3mChronicSign'        ','
2317               'Count6mChronicSign'        ','
2318               'Count12mChronicSign'        ','
78                                       The WPS System      23:19 Friday, October 26, 2018     

2319               'Count3mAcute'        ','
2320               'Count6mAcute'        ','
2321               'Count3mChronic'        ','
2322               'Count12mChronic'        ','
2323               'Count3mBody'        ','
2324               'Count3mBodySign'        ','
2325               'flag3mNewChronicSign'        ','
2326               'Days3mStage3'        ','
2327               'CountDaysSuppOpiates3m'        ','
2328               'CountDaysSupp3m'        ','
2329               'PopClass'        ','
2330               'Rule'        ','
2331               'RuleConfidence'        ','
2332               'CountTherClassChronic6m';
2333          end;
2334        set temp.DTModel;
2335        put ENROLID @;
2336        put AssignmentFinal @;
2337        put Count3mOV @;
2338        put Count12mOV @;
2339        put Count3mOVChronic @;
2340        put Count6mOVChronic @;
2341        put Count3mOVChronicSpecialist @;
2342        put Count6mOVChronicSpecialist @;
2343        put Count3mOVSpecialties @;
2344        put Count3mOVChronicSpecialties @;
2345        put Count3mER @;
2346        put Count12mER @;
2347        put Count3mERChronic @;
2348        put Count6mERChronic @;
2349        put DaysER @;
2350        put DaysMajorER @;
2351        put DaysHH @;
2352        put DaysMajorSurg @;
2353        put DaysOxygen @;
2354        put Days3mLTC @;
2355        put flag3mLTC @;
2356        put CountAdm3mAll @;
2357        put CountAdm3mChronic @;
2358        put CountAdm6mAll @;
2359        put CountAdm6mChronic @;
2360        put SumLOS3mAll @;
2361        put DaysAnyAdm @;
2362        put DaysChronicAdm @;
2363        put DaysSurgAdm @;
2364        put DaysMedicalAdm @;
2365        put DaysMtrntyAdm @;
2366        put DaysMHSAAdm @;
2367        put flag12mMHSA @;
2368        put flag3mGYN @;
2369        put Count3mAcuteStage3 @;
2370        put Count3mChronicStage3 @;
2371        put Count6mChronicStage3 @;
79                                       The WPS System      23:19 Friday, October 26, 2018     

2372        put Count3mAcuteSign @;
2373        put Count3mChronicSign @;
2374        put Count6mChronicSign @;
2375        put Count12mChronicSign @;
2376        put Count3mAcute @;
2377        put Count6mAcute @;
2378        put Count3mChronic @;
2379        put Count12mChronic @;
2380        put Count3mBody @;
2381        put Count3mBodySign @;
2382        put flag3mNewChronicSign @;
2383        put Days3mStage3 @;
2384        put CountDaysSuppOpiates3m @;
2385        put CountDaysSupp3m @;
2386        put PopClass @;
2387        put Rule @;
2388        put RuleConfidence @;
2389        put CountTherClassChronic6m;
2390      run;

NOTE: The file
      '/rpscan/u071439/output/31DEC2015Enrolids200_10252018/DTModel31DEC2015Enrolids200_10252018
      .csv' is:
      File
      Name=/rpscan/u071439/output/31DEC2015Enrolids200_10252018/DTModel31DEC2015Enrolids200_1025
      2018.csv,
      Access Permissions=-rw-rw-r--, Number of Links=1,
      Owner Name=u071439, Group Name=devl,
      File Size=0, Last Modified=23:52:17 Oct 26 2018,
      Created=23:52:17 Oct 26 2018, Lrecl=1000, Recfm=V

NOTE: 180 records were written to file
      '/rpscan/u071439/output/31DEC2015Enrolids200_10252018/DTModel31DEC2015Enrolids200_10252018
      .csv'
      The minimum record length was 137
      The maximum record length was 831
NOTE: 179 observations were read from "TEMP.DTModel"
NOTE: The data step took :
      real time : 0.014
      cpu time  : 0.005


2391      FILENAME ##EXPOUT CLEAR;
2392      
2393      
2394      *** TREATMENT NAVIGATION ***;
2395      *** transpose the DxCat;
2396      data trash517_1(/*keep=enrolid svcdate DxCat DxStage*/ drop=dxcat1-dxcat4 dxstage1-dxs
2396    ! tage4 dx1-dx4 i);
2397      	set temp.SampleIPOPwDS1;	
2398      	array c[4] dxcat1  -dxcat4;
2399      	array s[4] dxstage1-dxstage4;
2400      	do i=1 to 4;
80                                       The WPS System      23:19 Friday, October 26, 2018     

2401      		if
2402      			missing(c[i])=0 and
2403      			^(rec_type='O' and (substr(svcscat,4,2) in (&SvcCatExclusionList.) or proc1 in (&Pr
2403    ! ocExclusionList.)))
2404      		then do;
2405      			DxCat=c[i];
2406      			DxStage=s[i];
2407      			output;
2408      		end;
2409      	end;
2410      run;

NOTE: 2883 observations were read from "TEMP.SampleIPOPwDS1"
NOTE: Data set "WORK.trash517_1" has 2273 observation(s) and 14 variable(s)
NOTE: The data step took :
      real time : 0.024
      cpu time  : 0.007


2411      
2412      *** Select patient who qualify as Treatment Navigation in the past 30 days;
2413      proc sql;
2414      
2415      create table trash517_2 as select distinct
2416      	a.enrolid,
2417      	a.Dxcat,
2418      	b.condition
2419      from
2420      	trash517_1 as a
2421      inner join
2422      	temp.TreatmentNavigation as b
2423      on
2424      	a.DxCat=b.DxCat and
2425      	a.DxStage=b.stage
2426      where
2427      	svcdate > &StartDate. - 30;
NOTE: Data set "WORK.trash517_2" has 0 observation(s) and 3 variable(s)
2428      
2429      *** find the previous conditions for same dxcat and stage in the past year (366 days);
2430      create table trash517_3 as select distinct
2431      	a.enrolid,
2432      	b.condition
2433      from
2434      	trash517_1 as a
2435      inner join
2436      	temp.TreatmentNavigation as b
2437      on
2438      	a.DxCat=b.DxCat and
2439      	a.DxStage=b.stage
2440      where
2441      	&StartDate. - 30 >= svcdate > &StartDate. - 366;
NOTE: Data set "WORK.trash517_3" has 37 observation(s) and 2 variable(s)
2442      
81                                       The WPS System      23:19 Friday, October 26, 2018     

2443      *** join with the new patients found previously;
2444      create table trash517_4 as select
2445      	a.*,
2446      	1-missing(b.condition) as FlagPriorTrNav
2447      from
2448      	trash517_2 as a
2449      left join
2450      	trash517_3 as b
2451      on
2452      	a.enrolid=b.enrolid and
2453      	a.condition=b.condition
2454      order by
2455      	a.enrolid,
2456      	a.DxCat;
NOTE: Data set "WORK.trash517_4" has 0 observation(s) and 4 variable(s)
2457      
2458      *** find the higher stages for any dxcat in the past 366 days;
2459      create table trash517_5 as select distinct
2460      	a.enrolid,
2461      	b.condition,
2462      	b.max_TrNavStage
2463      from
2464      	trash517_1 as a
2465      inner join
2466      	(select distinct dxcat, condition, max(stage) as max_TrNavStage from temp.TreatmentNa
2466    ! vigation group by dxcat) as b
2467      on
2468      	a.DxCat=b.DxCat and
2469      	a.DxStage>b.max_TrNavStage
2470      where
2471      	svcdate > &StartDate. - 366;
NOTE: Summary results are required to be remerged with the original data
NOTE: View opening spill file for output observations.
NOTE: Data set "WORK.trash517_5" has 3 observation(s) and 3 variable(s)
2472      
2473      *** join with the new patients found previously									*************** <<<<<<<<------
2473    ! ---- Put all model+rules together;
2474      create table temp.TrNav as select distinct
2475      	a.enrolid,
2476      	1 as FlagTrNav,
2477      	4 as PopClass,
2478      	a.FlagPriorTrNav,
2479      	1-missing(b.max_TrNavStage) as FlagHigherStage
2480      from
2481      	trash517_4 as a
2482      left join
2483      	trash517_5 as b
2484      on
2485      	a.enrolid=b.enrolid and
2486      	a.condition=b.condition
2487      where
2488      	a.FlagPriorTrNav=0 and missing(b.max_TrNavStage)=1
2489      order by
82                                       The WPS System      23:19 Friday, October 26, 2018     

2490      	a.enrolid;
NOTE: Data set "TEMP.TrNav" has 0 observation(s) and 5 variable(s)
2491      quit;
NOTE: Procedure sql step took :
      real time : 0.578
      cpu time  : 0.030


2492      
2493      proc export
2494      	data=temp.TrNav
2495      	outfile="&outpath./TreatmentNavigation&version..csv"
2496      	replace;
2497      run;
NOTE: Procedure export step took :
      real time : 0.000
      cpu time  : 0.000


2498      data _null_;
2499        file '/rpscan/u071439/output/31DEC2015Enrolids200_10252018/TreatmentNavigation31DEC2
2499    ! 015Enrolids200_10252018.csv' delimiter=',' DSD DROPOVER LRECL=80;
2500        format enrolid BEST12.;
2501        format FlagTrNav BEST12.;
2502        format PopClass BEST12.;
2503        format FlagPriorTrNav BEST12.;
2504        format FlagHigherStage BEST12.;
2505        if _n_=1 then do;
2506            put
2507               'enrolid'        ','
2508               'FlagTrNav'        ','
2509               'PopClass'        ','
2510               'FlagPriorTrNav'        ','
2511               'FlagHigherStage';
2512          end;
2513        set temp.TrNav;
2514        put enrolid @;
2515        put FlagTrNav @;
2516        put PopClass @;
2517        put FlagPriorTrNav @;
2518        put FlagHigherStage;
2519      run;

NOTE: The file
      '/rpscan/u071439/output/31DEC2015Enrolids200_10252018/TreatmentNavigation31DEC2015Enrolids
      200_10252018.csv' is:
      File
      Name=/rpscan/u071439/output/31DEC2015Enrolids200_10252018/TreatmentNavigation31DEC2015Enro
      lids200_10252018.csv,
      Access Permissions=-rw-rw-r--, Number of Links=1,
      Owner Name=u071439, Group Name=devl,
      File Size=0, Last Modified=23:52:18 Oct 26 2018,
      Created=23:52:18 Oct 26 2018, Lrecl=80, Recfm=V
83                                       The WPS System      23:19 Friday, October 26, 2018     


NOTE: 1 record was written to file
      '/rpscan/u071439/output/31DEC2015Enrolids200_10252018/TreatmentNavigation31DEC2015Enrolids
      200_10252018.csv'
      The minimum record length was 57
      The maximum record length was 57
NOTE: 0 observations were read from "TEMP.TrNav"
NOTE: The data step took :
      real time : 0.003
      cpu time  : 0.001


2520      FILENAME ##EXPOUT CLEAR;
2521      
2522      
2523      *** SURVEILLANCE ***;
2524      *** transpose the Dxcat + Stage to have one per record, also apply the exclusion crite
2524    ! ria;
2525      data trash518_1(keep=enrolid svcdate rec_type svcscat proc1 DxCat DxStage);
2526      	set temp.SampleIPOPwDS1;
2527      	where svcdate > &StartDate. - 90;	
2528      	array c[4] dxcat1  -dxcat4;
2529      	array s[4] dxstage1-dxstage4;
2530      	do i=1 to 4;
2531      		if (rec_type='O' and (substr(svcscat,4,2) in (&SvcCatExclusionList.) or proc1 in (&P
2531    ! rocExclusionList.))) then c[i]=' ';
2532      		if
2533      			(missing(c[i])=0 or missing(proc1)=0)
2534      		then do;
2535      			DxCat=c[i];
2536      			DxStage=s[i];
2537      			output;
2538      		end;
2539      	end;
2540      run;

NOTE: 582 observations were read from "TEMP.SampleIPOPwDS1"
NOTE: Data set "WORK.trash518_1" has 2308 observation(s) and 7 variable(s)
NOTE: The data step took :
      real time : 0.018
      cpu time  : 0.003


2541      
2542      *** join the IP+OP data with HCPCxWalkPROCGRP to bring the PROCGRP codes;
2543      proc sql;
2544      create table trash518_2 as select
2545      	a.enrolid,
2546      	a.svcdate,
2547      	a.dxcat,
2548      	a.dxstage,
2549      	a.proc1,
2550      	a.svcscat,
84                                       The WPS System      23:19 Friday, October 26, 2018     

2551      	a.rec_type,
2552      	b.ProcGRP
2553      from
2554      	trash518_1 as a
2555      left join
2556      	temp.HcpcXwalkGRP as b
2557      on
2558      	a.proc1=b.hcpc
2559      order by
2560      	a.enrolid;
NOTE: Data set "WORK.trash518_2" has 2308 observation(s) and 8 variable(s)
2561      quit;
NOTE: Procedure sql step took :
      real time : 0.495
      cpu time  : 0.034


2562      
2563      *** create the flags for General Active Cancer;
2564      data trash518_3(keep=enrolid flag_GeneralActiveCancer);
2565      set trash518_2;	
2566      by enrolid;
2567      retain flag_SurvActiveCancerDxcat flag_SurvActiveCancerProcGRP 0;
2568      if first.enrolid then do;
2569      	flag_SurvActiveCancerDxcat=0;
2570      	flag_SurvActiveCancerProcGRP=0;
2571      end;
2572      if
2573      	put(dxcat,$SurvActiveCancerDxcat.)='Y'
2574      then
2575      	flag_SurvActiveCancerDxcat=1;
2576      if
2577      	put(dxcat,$SurvActiveCancerPxDxcat.)='Y'	or
2578      	put(ProcGRP,SurvActiveCancerPROCGRP.)='Y'
2579      then
2580      	flag_SurvActiveCancerProcGRP=1;
2581      flag_GeneralActiveCancer=flag_SurvActiveCancerDxcat * flag_SurvActiveCancerProcGRP;
2582      if last.enrolid and flag_SurvActiveCancerDxcat=1 and flag_SurvActiveCancerProcGRP=1 th
2582    ! en output;
2583      run;

NOTE: 2308 observations were read from "WORK.trash518_2"
NOTE: Data set "WORK.trash518_3" has 0 observation(s) and 2 variable(s)
NOTE: The data step took :
      real time : 0.045
      cpu time  : 0.005


2584      
2585      *** join with the Specific Cancer by Dxcat;
2586      proc sql;
2587      create table trash518_4 as select distinct
2588      	a.enrolid,
85                                       The WPS System      23:19 Friday, October 26, 2018     

2589      	a.dxcat,
2590      	b.PROCGRP as ProcGRP_Specific
2591      from
2592      	trash518_2 as a
2593      inner join
2594      	temp.SurvSpecificActiveCancer as b
2595      on
2596      	a.dxcat=b.dxcat and
2597      	a.dxstage>=b.stage;
NOTE: Data set "WORK.trash518_4" has 0 observation(s) and 3 variable(s)
2598      
2599      
2600      *** join with the Specific Cancer by PROCGRP;
NOTE: Procedure sql step took :
      real time : 0.089
      cpu time  : 0.003


2601      proc sql;
2602      create table trash518_5 as select distinct
2603      	a.enrolid,
2604      	a.PROCGRP
2605      from
2606      	trash518_2 as a
2607      inner join
2608      	temp.SurvSpecificActiveCancer as b
2609      on
2610      	a.procgrp=b.procgrp;
NOTE: Data set "WORK.trash518_5" has 0 observation(s) and 2 variable(s)
2611      
2612      
2613      *** Create Flag for Specific Active Cancer (join the previous selected based on DxCat 
2613    ! with Specific Cancer by PROCGRP);
NOTE: Procedure sql step took :
      real time : 0.065
      cpu time  : 0.002


2614      proc sql;
2615      create table trash518_6 as select distinct
2616      	a.enrolid,
2617      	1 as flag_SpecificActiveCancer
2618      from
2619      	trash518_4 as a
2620      inner join
2621      	trash518_5 as b
2622      on
2623      	a.enrolid=b.enrolid and
2624      	a.ProcGRP_Specific=b.ProcGRP
2625      order by
2626      	a.enrolid;
NOTE: Data set "WORK.trash518_6" has 0 observation(s) and 2 variable(s)
2627      
86                                       The WPS System      23:19 Friday, October 26, 2018     

2628      *** Flag for Miscellaneous DRG;
NOTE: Procedure sql step took :
      real time : 0.040
      cpu time  : 0.002


2629      proc sql;
2630      create table trash518_7 as select distinct
2631      	enrolid,
2632      	1 as flag_Miscellaneous
2633      from
2634      	temp.SampleInp1 		as a
2635      inner join
2636      	temp.SurvMiscellaneous	as b
2637      on
2638      	a.DRG=b.Code and
2639      	b.CodeType='DRG' and
2640      	a.admdate > &StartDate. - 90
2641      order by
2642      	enrolid;
NOTE: Data set "WORK.trash518_7" has 0 observation(s) and 2 variable(s)
2643      
2644      *** select from ChemoActive;
NOTE: Procedure sql step took :
      real time : 0.039
      cpu time  : 0.002


2645      proc sql;
2646      create table trash518_8 as select distinct
2647      	enrolid,
2648      	1 as flag_ChemoActive
2649      from
2650      	temp.SampleRx1 			as a
2651      inner join
2652      	temp.SurvChemoActive	as b
2653      on
2654      	a.ndcnum=b.ndc and
2655      	a.svcdate > &StartDate. - 90
2656      order by
2657      	enrolid;
NOTE: Data set "WORK.trash518_8" has 0 observation(s) and 2 variable(s)
2658      
2659      *** select from ChemoChronic;
NOTE: Procedure sql step took :
      real time : 0.061
      cpu time  : 0.003


2660      proc sql;
2661      create table trash518_9 as select distinct
2662      	enrolid
2663      from
87                                       The WPS System      23:19 Friday, October 26, 2018     

2664      	temp.SampleRx1 			as a
2665      inner join
2666      	temp.SurvChemoChronic	as b
2667      on
2668      	a.ndcnum=b.ndc and
2669      	a.svcdate > &StartDate. - 90;
NOTE: Data set "WORK.trash518_9" has 1 observation(s) and 1 variable(s)
NOTE: Procedure sql step took :
      real time : 0.035
      cpu time  : 0.003


2670      proc sql;
2671      create table trash518_10 as select distinct
2672      	enrolid
2673      from
2674      	temp.SampleRx1 			as a
2675      inner join
2676      	temp.SurvChemoChronic	as b
2677      on
2678      	a.ndcnum=b.ndc and
2679      	a.svcdate <= &StartDate. - 90;
NOTE: Data set "WORK.trash518_10" has 1 observation(s) and 1 variable(s)
NOTE: Procedure sql step took :
      real time : 0.061
      cpu time  : 0.005


2680      proc sql;
2681      create table trash518_11 as select distinct
2682      	a.enrolid,
2683      	1 as flag_ChemoChronic
2684      from
2685      	trash518_9 	as a
2686      left join
2687      	trash518_10	as b
2688      on
2689      	a.enrolid=b.enrolid
2690      where
2691      	a.enrolid ne b.enrolid
2692      order by
2693      	a.enrolid;
NOTE: Data set "WORK.trash518_11" has 0 observation(s) and 2 variable(s)
2694      
2695      *** put them all together for Surveillance													*************** <<<<<<<<-------
2695    ! --- Put all model+rules together;
NOTE: Procedure sql step took :
      real time : 0.056
      cpu time  : 0.002


2696      data temp.Surv;
2697      merge
88                                       The WPS System      23:19 Friday, October 26, 2018     

2698      	trash518_3
2699      	trash518_6
2700      	trash518_7
2701      	trash518_8
2702      	trash518_11;
2703      by enrolid;
2704      FlagSurv=1;
2705      PopClass=9;
2706      run;

NOTE: 0 observations were read from "WORK.trash518_3"
NOTE: 0 observations were read from "WORK.trash518_6"
NOTE: 0 observations were read from "WORK.trash518_7"
NOTE: 0 observations were read from "WORK.trash518_8"
NOTE: 0 observations were read from "WORK.trash518_11"
NOTE: Data set "TEMP.Surv" has 0 observation(s) and 8 variable(s)
NOTE: The data step took :
      real time : 0.016
      cpu time  : 0.002


2707      
2708      proc export
2709      	data=temp.Surv
2710      	outfile="&outpath./Surveillance&version..csv"
2711      	replace;
2712      run;
NOTE: Procedure export step took :
      real time : 0.000
      cpu time  : 0.000


2713      data _null_;
2714        file '/rpscan/u071439/output/31DEC2015Enrolids200_10252018/Surveillance31DEC2015Enro
2714    ! lids200_10252018.csv' delimiter=',' DSD DROPOVER LRECL=160;
2715        format enrolid BEST12.;
2716        format flag_GeneralActiveCancer BEST12.;
2717        format flag_SpecificActiveCancer BEST12.;
2718        format flag_Miscellaneous BEST12.;
2719        format flag_ChemoActive BEST12.;
2720        format flag_ChemoChronic BEST12.;
2721        format FlagSurv BEST12.;
2722        format PopClass BEST12.;
2723        if _n_=1 then do;
2724            put
2725               'enrolid'        ','
2726               'flag_GeneralActiveCancer'        ','
2727               'flag_SpecificActiveCancer'        ','
2728               'flag_Miscellaneous'        ','
2729               'flag_ChemoActive'        ','
2730               'flag_ChemoChronic'        ','
2731               'FlagSurv'        ','
2732               'PopClass';
89                                       The WPS System      23:19 Friday, October 26, 2018     

2733          end;
2734        set temp.Surv;
2735        put enrolid @;
2736        put flag_GeneralActiveCancer @;
2737        put flag_SpecificActiveCancer @;
2738        put flag_Miscellaneous @;
2739        put flag_ChemoActive @;
2740        put flag_ChemoChronic @;
2741        put FlagSurv @;
2742        put PopClass;
2743      run;

NOTE: The file
      '/rpscan/u071439/output/31DEC2015Enrolids200_10252018/Surveillance31DEC2015Enrolids200_102
      52018.csv' is:
      File
      Name=/rpscan/u071439/output/31DEC2015Enrolids200_10252018/Surveillance31DEC2015Enrolids200
      _10252018.csv,
      Access Permissions=-rw-rw-r--, Number of Links=1,
      Owner Name=u071439, Group Name=devl,
      File Size=0, Last Modified=23:52:19 Oct 26 2018,
      Created=23:52:19 Oct 26 2018, Lrecl=160, Recfm=V

NOTE: 1 record was written to file
      '/rpscan/u071439/output/31DEC2015Enrolids200_10252018/Surveillance31DEC2015Enrolids200_102
      52018.csv'
      The minimum record length was 130
      The maximum record length was 130
NOTE: 0 observations were read from "TEMP.Surv"
NOTE: The data step took :
      real time : 0.003
      cpu time  : 0.001


2744      FILENAME ##EXPOUT CLEAR;
2745      
2746      
2747      *** REBALANCE ***;
2748      
2749      *** transpose the Dxcat + Stage to have one per record, also apply the exclusion crite
2749    ! ria. Similar to 518_1 and 518_2 but save ICD9 too;
2750      data trash519_1(keep=enrolid svcdate svcscat Dx DxCat DxStage fac_prof proc1 rec_type)
2750    ! ;
2751      	set temp.SampleIPOPwDS1;
2752      	array d[4] dx1-dx4;
2753      	array c[4] dxcat1  -dxcat4;
2754      	array s[4] dxstage1-dxstage4;
2755      	do i=1 to 4;
2756      		if (rec_type='O' and (substr(svcscat,4,2) in (&SvcCatExclusionList.) or proc1 in (&P
2756    ! rocExclusionList.))) then do;
2757      			c[i]=' ';
2758      			d[i]=' ';
2759      		end;
90                                       The WPS System      23:19 Friday, October 26, 2018     

2760      		if
2761      			(missing(c[i])=0 or missing(proc1)=0 or missing(d[i])=0)
2762      		then do;
2763      			DxCat=c[i];
2764      			DxStage=s[i];
2765      			Dx=d[i];
2766      			output;
2767      		end;
2768      	end;
2769      run;

NOTE: 2883 observations were read from "TEMP.SampleIPOPwDS1"
NOTE: Data set "WORK.trash519_1" has 11051 observation(s) and 9 variable(s)
NOTE: The data step took :
      real time : 0.033
      cpu time  : 0.010


2770      
2771      *** join the IP+OP data with HCPCxWalkPROCGRP to bring the PROCGRP codes, same as 518_
2771    ! 2;
2772      proc sql;
2773      create table trash519_2 as select
2774      	a.enrolid,
2775      	a.svcdate,
2776      	a.dx,
2777      	a.dxcat,
2778      	a.dxstage,
2779      	a.proc1,
2780      	a.svcscat,
2781      	a.rec_type,
2782      	a.fac_prof,
2783      	b.ProcGRP
2784      from
2785      	trash519_1 as a
2786      left join
2787      	temp.HcpcXwalkGRP as b
2788      on
2789      	a.proc1=b.hcpc
2790      order by
2791      	a.enrolid;
NOTE: Data set "WORK.trash519_2" has 11051 observation(s) and 10 variable(s)
2792      quit;
NOTE: Procedure sql step took :
      real time : 0.333
      cpu time  : 0.060


2793      
2794      *** Rebalance based on a condition being present in the last 90 days regardless of pri
2794    ! or claims                                    <<<------ for REBALANCE final merge;
2795      proc sql;
2796      create table trash519_3 as select distinct *
91                                       The WPS System      23:19 Friday, October 26, 2018     

2797      from
2798      /* based on PSY in ER or certain DxCats from both inp and otp */
2799      	(select distinct
2800      		enrolid,
2801      		1 as flag_NewCondNoHistCheck
2802      	from trash519_2
2803      	where
2804      		svcdate > &StartDate. - 90																		and			
2805      		(((DxCat in (&ConditionDxCat.) and DxStage >= &ConditionDxCatStage.) 						or
2806      		(substr(DxCat,1,3) in (&ConditionDxCatER.) and fac_prof='F' and	substr(svcscat,4,2)=
2806    ! "20")) 	or
2807      		 procGRP in (&ConditionProcGRP.)))
2808      union
2809      /* based on DRG and mental admissions from inpatient data */
2810      	(select distinct
2811      		enrolid,
2812      		1 as flag_Cond
2813      	from temp.SampleInp1
2814      	where
2815      		disdate >= &StartDate. - 90				and
2816      		 (put(drg,z3.) in (&ConditionDRG.)))
2817      order by
2818      	enrolid;
ERROR: The In operator must compare operands of the same type
NOTE: Statements not executed because of errors detected
2819      quit;
NOTE: Procedure sql step took :
      real time : 0.017
      cpu time  : 0.004


2820      
2821      
2822      *** Rebalance based on new DxCat in the past 30 days AND there were not present before
2822    ! ;
2823      proc sql;
2824      
2825      * identify all patients who match the list of new DxCat in the past 90 days, keep the 
2825    ! first day of the encounter for future use with the exclusion of the Rx drugs;
2826      create table trash519_4 as select
2827      	a.enrolid,
2828      	a.DxCat,
2829      	min(a.svcdate) as FirstDate format=date7.
2830      from
2831      	trash519_1 as a,
2832      	temp.RebalanceNewDxCat as b
2833      where
2834      	a.DxCat=b.DxCat 				and
2835      	a.DxStage>=b.Stage			and
2836      	a.svcdate > &StartDate. - 90
2837      group by
2838      	a.enrolid,
2839      	a.DxCat;
92                                       The WPS System      23:19 Friday, October 26, 2018     

NOTE: Data set "WORK.trash519_4" has 0 observation(s) and 3 variable(s)
2840      * identify all patients who match the list of new DxCat in the past year, before 90 da
2840    ! ys, in order to exclude them when matching with the new ones;
2841      create table trash519_5 as select distinct
2842      	a.enrolid,
2843      	a.DxCat
2844      from
2845      	trash519_1 as a,
2846      	temp.RebalanceNewDxCat as b
2847      where
2848      	a.DxCat=b.DxCat 				and
2849      	a.DxStage>=b.StageHistory		and
2850      	a.svcdate <= &StartDate. - 90
2851      order by
2852      	a.enrolid,
2853      	a.DxCat;
NOTE: Data set "WORK.trash519_5" has 15 observation(s) and 2 variable(s)
2854      * exclude the patients if they match on the the Rollup of the DxCat (first 3 character
2854    ! s) if they are in both recent 90 days and past 90 days;
2855      create table trash519_6 as select distinct
2856      	a.enrolid
2857      from
2858      	trash519_4 as a
2859      left join
2860      	trash519_5 as b
2861      on
2862      	a.enrolid=b.enrolid and
2863      	substr(a.DxCat,1,3)=substr(b.DxCat,1,3)
2864      where
2865      	substr(a.DxCat,1,3)^=substr(b.DxCat,1,3)
2866      order by
2867      	enrolid;
NOTE: Data set "WORK.trash519_6" has 0 observation(s) and 1 variable(s)
2868      
2869      * select all the claims mathcing the Rx by Therapeutic Class;
2870      create table trash519_7 as select distinct
2871      	a.enrolid,
2872      	a.svcdate format=date7.,
2873      	a.thercls,
2874      	b.DxCat
2875      from
2876      	temp.SampleRx1 as a,
2877      	temp.RebalanceNewDxCatwoRx as b
2878      where
2879      	a.thercls=b.thercls
2880      order by
2881      	a.enrolid,
2882      	a.svcdate;
NOTE: Data set "WORK.trash519_7" has 132 observation(s) and 4 variable(s)
2883      * match the drug claims with the patients identified with the new DxCats based on the 
2883    ! Dxcat from the exlcusion Rx logic, if the drug is 90 days before the first encounter o
2883    ! f DxCAt then flag it;
2884      create table trash519_8 as select
93                                       The WPS System      23:19 Friday, October 26, 2018     

2885      	a.*,
2886      	b.svcdate,
2887      	b.thercls,
2888      	case when a.FirstDate - b.svcdate > 90 then 1 else 0 end as flag_RxlogicExclude
2889      from
2890      	trash519_4 as a
2891      left join
2892      	trash519_7 as b
2893      on
2894      	a.enrolid=b.enrolid and
2895      	a.DxCat=b.DxCat
2896      order by
2897      	a.enrolid,
2898      	a.DxCat,
2899      	b.SvcDate;
NOTE: Data set "WORK.trash519_8" has 0 observation(s) and 6 variable(s)
2900      * keep only the patients that need to be excluded, having at least a flag of 1;
2901      create table trash519_9 as select
2902      	enrolid
2903      from
2904      	trash519_8
2905      group by
2906      	enrolid
2907      having
2908      	max(flag_RxlogicExclude)=1;
NOTE: Data set "WORK.trash519_9" has 0 observation(s) and 1 variable(s)
2909      * exclude the patients with drugs in the past year                                   <
2909    ! <<------ for REBALANCE final merge;
2910      create table trash519_10 as select distinct
2911      	a.enrolid,
2912      	1 as flag_NewCondDxCat
2913      from
2914      	trash519_6 as a
2915      left join
2916      	trash519_9 as b
2917      on
2918      	a.enrolid=b.enrolid
2919      where
2920      	a.enrolid^=b.enrolid
2921      order by
2922      	enrolid;
NOTE: Data set "WORK.trash519_10" has 0 observation(s) and 2 variable(s)
2923      quit;
NOTE: Procedure sql step took :
      real time : 0.692
      cpu time  : 0.032


2924      
2925      * Rebalance based on new DRG in the past 30 days and no prior history;
2926      proc sql;
2927      * select all members with matching of rebalance new DRG in the past 90 days;
2928      create table trash519_11 as select distinct
94                                       The WPS System      23:19 Friday, October 26, 2018     

2929      	a.enrolid,
2930      	b.description
2931      from
2932      	temp.SampleInp1 as a
2933      inner join
2934      	temp.RebalanceNewDRG as b
2935      on
2936      	/* put(a.drg,z3.)=b.drg */
2937          a.drg = b.drg
2938      where
2939      	a.disdate > &StartDate. - 90
2940      order by
2941      	a.enrolid;
NOTE: Data set "WORK.trash519_11" has 0 observation(s) and 2 variable(s)
2942      * select all members with prior history of rebalance new DRG;
2943      create table trash519_12 as select distinct
2944      	a.enrolid,
2945      	b.description
2946      from
2947      	temp.SampleInp1 as a
2948      inner join
2949      	temp.RebalanceNewDRG as b
2950      on
2951          /* put(a.drg,z3.)=b.drg */
2952      	a.drg=b.drg
2953      where
2954      	a.disdate <= &StartDate. - 90
2955      order by
2956      	a.enrolid;
NOTE: Data set "WORK.trash519_12" has 0 observation(s) and 2 variable(s)
2957      * exclude the patients with DRG in the past                                   <<<-----
2957    ! - for REBALANCE final merge;
2958      create table trash519_13 as select distinct
2959      	a.enrolid,
2960      	1 as flag_NewCondDRG
2961      from
2962      	trash519_11 as a
2963      left join
2964      	trash519_12 as b
2965      on
2966      	a.enrolid=b.enrolid and
2967      	a.description=b.description
2968      where
2969      	a.enrolid^=b.enrolid
2970      order by
2971      	enrolid;
NOTE: Data set "WORK.trash519_13" has 0 observation(s) and 2 variable(s)
2972      quit;
NOTE: Procedure sql step took :
      real time : 0.171
      cpu time  : 0.008


95                                       The WPS System      23:19 Friday, October 26, 2018     

2973      
2974      * Rebalance based on new Dx in the past 30 days and no prior history;
2975      proc sql;
2976      * select all members with matching of rebalance new Dx in the past 90 days;
2977      create table trash519_14 as select distinct
2978      	a.enrolid,
2979      	b.description
2980      from
2981      	trash519_1 as a
2982      inner join
2983      	temp.RebalanceNewDx as b
2984      on
2985      	substr(a.dx,1,4)=b.icd
2986      where
2987      	a.svcdate > &StartDate. - 90
2988      order by
2989      	a.enrolid;
NOTE: Data set "WORK.trash519_14" has 0 observation(s) and 2 variable(s)
2990      * select all members with prior history of rebalance new Dx;
2991      create table trash519_15 as select distinct
2992      	a.enrolid,
2993      	b.description
2994      from
2995      	trash519_1 as a
2996      inner join
2997      	temp.RebalanceNewDx as b
2998      on
2999      	substr(a.dx,1,4)=b.icd
3000      where
3001      	a.svcdate <= &StartDate. - 90
3002      order by
3003      	a.enrolid;
NOTE: Data set "WORK.trash519_15" has 0 observation(s) and 2 variable(s)
3004      * exclude the patients with DRG in the past                                   <<<-----
3004    ! - for REBALANCE final merge;
3005      create table trash519_16 as select distinct
3006      	a.enrolid,
3007      	1 as flag_NewCondDx
3008      from
3009      	trash519_14 as a
3010      left join
3011      	trash519_15 as b
3012      on
3013      	a.enrolid=b.enrolid and
3014      	a.description=b.description
3015      where
3016      	a.enrolid^=b.enrolid
3017      order by
3018      	enrolid;
NOTE: Data set "WORK.trash519_16" has 0 observation(s) and 2 variable(s)
3019      
3020      *** put all REBALANCE pieces together													*************** <<<<<<<<---------- P
3020    ! ut all model+rules together;
96                                       The WPS System      23:19 Friday, October 26, 2018     

NOTE: Procedure sql step took :
      real time : 0.190
      cpu time  : 0.010


3021      data temp.Rebalance;
3022      merge
3023      	trash519_3
          	^
ERROR: Data set "WORK.trash519_3" not found
3024      	trash519_10
3025      	trash519_13
3026      	trash519_16;
3027      by enrolid;
3028      FlagRebalance=1;
3029      PopClass=8;
3030      run;

NOTE: DATA step was not executed because of errors detected
NOTE: The data step took :
      real time : 0.001
      cpu time  : 0.000


3031      
3032      proc export
3033      	data=temp.Rebalance
3034      	outfile="&outpath./Rebalance&version..csv"
3035      	replace;
3036      run;
ERROR: Data set "TEMP.Rebalance" not found
NOTE: Procedure export step took :
      real time : 0.000
      cpu time  : 0.000


3037      
3038      
3039      *** Newborn in the past month by default in Engagement DRG 790 - 795;					************
3039    ! *** <<<<<<<<---------- Put all model+rules together;
3040      proc sql;
3041      * select all members with matching of rebalance new DRG in the past 90 days;
3042      create table temp.Neonates as select distinct
3043      	enrolid,
3044      	DRG,
3045      	1 as FlagNeoNate,
3046      	2 as PopCLass
3047      from
3048      	temp.SampleInp1 as a
3049      where
3050      	admdate > &StartDate. - 30 and
3051      	drg in (&NeonatesDRGList.)
3052      order by
97                                       The WPS System      23:19 Friday, October 26, 2018     

3053      	enrolid;
NOTE: Data set "TEMP.Neonates" has 0 observation(s) and 4 variable(s)
3054      
3055      *** Newborn in the past month by default in Engagement DRG 790 - 795;					************
3055    ! *** <<<<<<<<---------- Put all model+rules together;
NOTE: Procedure sql step took :
      real time : 0.048
      cpu time  : 0.003


3056      proc sql;
3057      * select all members with matching of rebalance new DRG in the past 90 days;
3058      create table temp.Neonates as select distinct
3059      	enrolid,
3060      	DRG,
3061      	1 as FlagNeoNate,
3062      	2 as PopCLass
3063      from
3064      	temp.SampleInp1 as a
3065      where
3066      	admdate > &StartDate. - 30 and
3067      	drg in (&NeonatesDRGList.)
3068      order by
3069      	enrolid;
NOTE: Data set "TEMP.Neonates" has 0 observation(s) and 4 variable(s)
NOTE: Procedure sql step took :
      real time : 0.029
      cpu time  : 0.002


3070      
3071      proc export
3072      	data=temp.NeoNates
3073      	outfile="&outpath./Neonates&version..csv"
3074      	replace;
3075      run;
NOTE: Procedure export step took :
      real time : 0.000
      cpu time  : 0.000


3076      data _null_;
3077        file '/rpscan/u071439/output/31DEC2015Enrolids200_10252018/Neonates31DEC2015Enrolids
3077    ! 200_10252018.csv' delimiter=',' DSD DROPOVER LRECL=60;
3078        format ENROLID BEST12.;
3079        format DRG BEST12.;
3080        format FlagNeoNate BEST12.;
3081        format PopCLass BEST12.;
3082        if _n_=1 then do;
3083            put
3084               'ENROLID'        ','
3085               'DRG'        ','
3086               'FlagNeoNate'        ','
98                                       The WPS System      23:19 Friday, October 26, 2018     

3087               'PopCLass';
3088          end;
3089        set temp.NeoNates;
3090        put ENROLID @;
3091        put DRG @;
3092        put FlagNeoNate @;
3093        put PopCLass;
3094      run;

NOTE: The file
      '/rpscan/u071439/output/31DEC2015Enrolids200_10252018/Neonates31DEC2015Enrolids200_1025201
      8.csv' is:
      File
      Name=/rpscan/u071439/output/31DEC2015Enrolids200_10252018/Neonates31DEC2015Enrolids200_102
      52018.csv,
      Access Permissions=-rw-rw-r--, Number of Links=1,
      Owner Name=u071439, Group Name=devl,
      File Size=0, Last Modified=23:52:21 Oct 26 2018,
      Created=23:52:21 Oct 26 2018, Lrecl=60, Recfm=V

NOTE: 1 record was written to file
      '/rpscan/u071439/output/31DEC2015Enrolids200_10252018/Neonates31DEC2015Enrolids200_1025201
      8.csv'
      The minimum record length was 32
      The maximum record length was 32
NOTE: 0 observations were read from "TEMP.NeoNates"
NOTE: The data step took :
      real time : 0.004
      cpu time  : 0.001


3095      FILENAME ##EXPOUT CLEAR;
3096      
3097      
3098      
3099      /*********************/
3100      /*** FINAL OUTPUT ***/
3101      /*********************/
3102      *** MERGE All the RULES from SPSS Modela and Janet's logic rules together ***;
3103      proc sql;
3104      create table temp.AllRules as select
3105      	a.*,
3106      	put(a.PopClass,categories.) as PopClassDTModelDescription,
3107      	max(a.PopClass,b.PopClass) as PopClassFinal,
3108      	put(calculated PopClassFinal,categories.) as PopClassFinalDescription,
3109      	case when b.PopClass > a.PopCLass then 1 else 0 end as FlagOverwrite
3110      from
3111      	temp.DTModel as a
3112      left join
3113      	(select
3114      		enrolid,
3115      		max(PopClass) as PopClass
3116      	from
99                                       The WPS System      23:19 Friday, October 26, 2018     

3117      		(select enrolid, PopClass from temp.TrNav union
3118      		 select enrolid, PopClass from temp.Surv union
3119      		 select enrolid, PopClass from temp.Rebalance union
3120      		 select enrolid, PopClass from temp.Neonates)
3121      	group by enrolid) as b
3122      on
3123      	a.enrolid=b.enrolid
3124      order by enrolid;
ERROR: Data set "TEMP.Rebalance" not found
NOTE: Statements not executed because of errors detected
3125      quit;
NOTE: Procedure sql step took :
      real time : 0.003
      cpu time  : 0.002


3126      proc export
3127      	data=temp.AllRules
3128      	outfile="&outpath./AllRules&version..csv"
3129      	replace;
3130      run;
ERROR: Data set "TEMP.AllRules" not found
NOTE: Procedure export step took :
      real time : 0.000
      cpu time  : 0.000


ERROR: Errors printed on pages 91,96,99

NOTE: Submitted statements took :
      real time : 32:53.406
      cpu time  : 8:15.457
