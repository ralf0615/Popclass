1                                        The WPS System      16:10 Monday, October 29, 2018     

NOTE: (c) Copyright World Programming Limited 2002-2018.  All rights reserved.
NOTE: World Programming System 4.00 (04.00.01.00.006515)
      Licensed to Truven Health Analytics, DR Licence for L13147
NOTE: This session is executing on the AIX platform and is running in 64 bit mode

NOTE: AUTOEXEC processing beginning; file is /opt/WPS/wps-4.0.1/autoexec.sas
NOTE: Library arch1990 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/1990/

NOTE: Library arch1991 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/1991/

NOTE: Library arch1992 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/1992/

NOTE: Library arch1993 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/1993/

NOTE: Library arch1994 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/1994/

NOTE: Library arch1995 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/1995/

NOTE: Library arch1996 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/1996/

NOTE: Library arch1997 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/1997/

NOTE: Library arch1998 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/1998/

NOTE: Library arch1999 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/1999/

NOTE: Library arch2000 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2000/

NOTE: Library arch2001 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2001/
2                                        The WPS System      16:10 Monday, October 29, 2018     


NOTE: Library arch2002 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2002/

NOTE: Library arch2003 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2003/

NOTE: Library arch2004 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2004/

NOTE: Library arch2005 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2005/

NOTE: Library arch2006 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2006/

NOTE: Library arch2007 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2007/

NOTE: Library arch2008 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2008/

NOTE: Library arch2009 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2009/

NOTE: Library arch2010 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2010/

NOTE: Library arch2011 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2011/

NOTE: Library arch2012 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2012/

NOTE: Library arch2013 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan2/data/archive/2013/

NOTE: Library arch2014 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan2/data/archive/2014/

3                                        The WPS System      16:10 Monday, October 29, 2018     

NOTE: Library arch2015 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan2/data/archive/2015/

NOTE: Library arch2016 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan2/data/archive/2016/

NOTE: Library arch2017 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan2/data/archive/2017/

NOTE: Library meg1996 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/1996/meg/

NOTE: Library meg1997 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/1997/meg/

NOTE: Library meg1998 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/1998/meg/

NOTE: Library meg1999 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/1999/meg/

NOTE: Library meg2000 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2000/meg/

NOTE: Library meg2001 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2001/meg/

NOTE: Library meg2002 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2002/meg/

NOTE: Library meg2003 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2003/meg/

NOTE: Library meg2004 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2004/meg/

NOTE: Library meg2005 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2005/meg/

NOTE: Library meg2006 assigned as follows:
4                                        The WPS System      16:10 Monday, October 29, 2018     

      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2006/meg/

NOTE: Library meg2007 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2007/meg/

NOTE: Library meg2008 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2008/meg/

NOTE: Library meg2009 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2009/meg/

NOTE: Library meg2010 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2010/meg/

NOTE: Library meg2011 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2011/meg/

NOTE: Library meg2012 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2012/meg/

NOTE: Library meg2013 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan2/data/archive/2013/meg/

NOTE: Library meg2014 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan2/data/archive/2014/meg/

NOTE: Library meg2015 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan2/data/archive/2015/meg/

NOTE: Library meg2016 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan2/data/archive/2016/meg/

NOTE: Library meg2017 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan2/data/archive/2017/meg/

NOTE: Library mdcd1999 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/1999/

NOTE: Library mdcd2000 assigned as follows:
      Engine:        SAS7BDAT
5                                        The WPS System      16:10 Monday, October 29, 2018     

      Physical Name: /mscan/data/medicaid/2000/

NOTE: Library mdcd2001 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2001/

NOTE: Library mdcd2002 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2002/

NOTE: Library mdcd2003 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2003/

NOTE: Library mdcd2004 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2004/

NOTE: Library mdcd2005 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2005/

NOTE: Library mdcd2006 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2006/

NOTE: Library mdcd2007 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2007/

NOTE: Library mdcd2008 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2008/

NOTE: Library mdcd2009 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2009/

NOTE: Library mdcd2010 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2010/

NOTE: Library mdcd2011 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2011/

NOTE: Library mdcd2012 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2012/

NOTE: Library mdcd2013 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2013/
6                                        The WPS System      16:10 Monday, October 29, 2018     


NOTE: Library mdcd2014 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2014/

NOTE: Library mdcd2015 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2015/

NOTE: Library mdcd2016 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2016/

NOTE: Library mdcd2017 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2017/

NOTE: Library eview assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/earlyview/

NOTE: Library eviewmon assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan2/data/earlyview_monthly/

NOTE: Library mslab assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/lab/

NOTE: Library msn1 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /msn1/data/marketscan_one/

NOTE: Library msprov assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/marketscan_provider/

NOTE: Library redbook assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/redbook/

NOTE: Library bpd assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/bpd/

NOTE: Library loincdb assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/loincdb/

NOTE: Library library assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /hic/data/formats/

7                                        The WPS System      16:10 Monday, October 29, 2018     

NOTE: Library mdcdfmt assigned as follows:
      Engine:        WPD
      Physical Name: /mscan/data/medicaid/formats

NOTE: Library mdcdproc assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/procedures

NOTE: Library arch2014 assigned as follows:
      Engine:        WPD
      Physical Name: /mscan4/data/archive/2014/

NOTE: Library arch2015 assigned as follows:
      Engine:        WPD
      Physical Name: /mscan4/data/archive/2015/

NOTE: Library arch2016 assigned as follows:
      Engine:        WPD
      Physical Name: /mscan4/data/archive/2016/

NOTE: Library arch2017 assigned as follows:
      Engine:        WPD
      Physical Name: /mscan4/data/archive/2017/

NOTE: Library meg2014 assigned as follows:
      Engine:        WPD
      Physical Name: /mscan4/data/archive/2014/meg/

NOTE: Library meg2015 assigned as follows:
      Engine:        WPD
      Physical Name: /mscan4/data/archive/2015/meg/

NOTE: Library meg2016 assigned as follows:
      Engine:        WPD
      Physical Name: /mscan4/data/archive/2016/meg/

NOTE: Library meg2017 assigned as follows:
      Engine:        WPD
      Physical Name: /mscan4/data/archive/2017/meg/

NOTE: Library library assigned as follows:
      Engine:        WPD
      Physical Name: /hic/data/formats/wps

NOTE: AUTOEXEC processing completed

1         /*** connect to the nike server - trvlapp1465.tsh.thomson.com ***/
2         
3         %include '/opt/SAS94/SASFoundation/9.4/autoexec.sas';
NOTE: Library arch1990 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/1990/

8                                        The WPS System      16:10 Monday, October 29, 2018     

NOTE: Library arch1991 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/1991/

NOTE: Library arch1992 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/1992/

NOTE: Library arch1993 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/1993/

NOTE: Library arch1994 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/1994/

NOTE: Library arch1995 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/1995/

NOTE: Library arch1996 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/1996/

NOTE: Library arch1997 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/1997/

NOTE: Library arch1998 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/1998/

NOTE: Library arch1999 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/1999/

NOTE: Library arch2000 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2000/

NOTE: Library arch2001 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2001/

NOTE: Library arch2002 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2002/

NOTE: Library arch2003 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2003/

NOTE: Library arch2004 assigned as follows:
9                                        The WPS System      16:10 Monday, October 29, 2018     

      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2004/

NOTE: Library arch2005 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2005/

NOTE: Library arch2006 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2006/

NOTE: Library arch2007 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2007/

NOTE: Library arch2008 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2008/

NOTE: Library arch2009 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2009/

NOTE: Library arch2010 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2010/

NOTE: Library arch2011 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2011/

NOTE: Library arch2012 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2012/

NOTE: Library arch2013 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan2/data/archive/2013/

NOTE: Library arch2014 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan2/data/archive/2014/

NOTE: Library arch2015 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan2/data/archive/2015/

NOTE: Library arch2016 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan2/data/archive/2016/

NOTE: Library arch2017 assigned as follows:
      Engine:        SAS7BDAT
10                                       The WPS System      16:10 Monday, October 29, 2018     

      Physical Name: /mscan2/data/archive/2017/

NOTE: Library meg1996 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/1996/meg/

NOTE: Library meg1997 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/1997/meg/

NOTE: Library meg1998 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/1998/meg/

NOTE: Library meg1999 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/1999/meg/

NOTE: Library meg2000 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2000/meg/

NOTE: Library meg2001 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2001/meg/

NOTE: Library meg2002 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2002/meg/

NOTE: Library meg2003 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2003/meg/

NOTE: Library meg2004 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2004/meg/

NOTE: Library meg2005 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2005/meg/

NOTE: Library meg2006 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2006/meg/

NOTE: Library meg2007 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2007/meg/

NOTE: Library meg2008 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2008/meg/
11                                       The WPS System      16:10 Monday, October 29, 2018     


NOTE: Library meg2009 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2009/meg/

NOTE: Library meg2010 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2010/meg/

NOTE: Library meg2011 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2011/meg/

NOTE: Library meg2012 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/2012/meg/

NOTE: Library meg2013 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan2/data/archive/2013/meg/

NOTE: Library meg2014 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan2/data/archive/2014/meg/

NOTE: Library meg2015 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan2/data/archive/2015/meg/

NOTE: Library meg2016 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan2/data/archive/2016/meg/

NOTE: Library meg2017 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan2/data/archive/2017/meg/

NOTE: Library mdcd1999 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/1999/

NOTE: Library mdcd2000 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2000/

NOTE: Library mdcd2001 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2001/

NOTE: Library mdcd2002 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2002/

12                                       The WPS System      16:10 Monday, October 29, 2018     

NOTE: Library mdcd2003 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2003/

NOTE: Library mdcd2004 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2004/

NOTE: Library mdcd2005 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2005/

NOTE: Library mdcd2006 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2006/

NOTE: Library mdcd2007 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2007/

NOTE: Library mdcd2008 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2008/

NOTE: Library mdcd2009 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2009/

NOTE: Library mdcd2010 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2010/

NOTE: Library mdcd2011 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2011/

NOTE: Library mdcd2012 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2012/

NOTE: Library mdcd2013 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2013/

NOTE: Library mdcd2014 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2014/

NOTE: Library mdcd2015 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2015/

NOTE: Library mdcd2016 assigned as follows:
13                                       The WPS System      16:10 Monday, October 29, 2018     

      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2016/

NOTE: Library mdcd2017 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/2017/

NOTE: Library eview assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/earlyview/

NOTE: Library eviewmon assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan2/data/earlyview_monthly/

NOTE: Library mslab assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/lab/

NOTE: Library msn1 assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /msn1/data/marketscan_one/

NOTE: Library msprov assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/marketscan_provider/

NOTE: Library redbook assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/redbook/

NOTE: Library bpd assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/archive/bpd/

NOTE: Library loincdb assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/loincdb/

NOTE: Library library assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /hic/data/formats/

NOTE: Library mdcdfmt assigned as follows:
      Engine:        WPD
      Physical Name: /mscan/data/medicaid/formats

NOTE: Library mdcdproc assigned as follows:
      Engine:        SAS7BDAT
      Physical Name: /mscan/data/medicaid/procedures

389       
390       Options obs=max mprint mlogic;
14                                       The WPS System      16:10 Monday, October 29, 2018     

391       
392       %Let Prevyear=2014;
393       %Let     year=2015;
394       %Let Nextyear=2016;
395       %Let MSversionPrev=143;
396       %Let MSversion    =153;
397       %Let MSversionNext=162;
398       %Let StartDate='31DEC2015'd; /* always choose the end of month */
399       %let version=31DEC2015Enrolids2000_10292018;
400       %Let AEoutpath=/rpscan/u071439/AEout/&version.;
401       %Let outpath=/rpscan/u071439/output/&version.;
402       %Let username=u071439;
403       %Let createMScopy=0;  /* set this to 1 if we want to create the MarketScan version */
404       %Let skipImport=1; /* set this to 1 if we create directly the SAS dataset SamplewClass
404     ! ification and we want to skip the import */
405       
406       x "mkdir -p /rpscan/u071439/temp/&version.";
407       x "mkdir -p /rpscan/u071439/AEout/&version.";
408       x "mkdir -p /rpscan/u071439/output/&version.";
409       libname temp "/rpscan/u071439/temp/&version.";
NOTE: Library temp assigned as follows:
      Engine:        WPD
      Physical Name: /rpscan/u071439/temp/31DEC2015Enrolids2000_10292018

410       
411       %macro libsetup;
412       %if &createMScopy.=1 %then %do;
413       libname arch&year. "/rpscan/u071439/temp/&version.";
414       libname arch&Nextyear. "/rpscan/u071439/temp/&version.";
415       %end;
416       %mend libsetup;
417       
418       *** exclusions for what not is considered to be a specialist (Anne);
419       %Let SpecExclusionList=200,202,204,206,240,245,320,400;
420       *** exclusions for what counts as a visit based on SvcCat and Procedure (Amy);
421       %Let SvcCatExclusionList="30","32","37","38","51","52","53","54","55","56","59","61","
421     ! 62","63","64","65","66","67","68","69";
422       %Let ProcExclusionList="36415","G0001","36400","36405","36406","36410","36416";
423       *** CPT codes for Oxygen;
424       %let OxygenCPTList="E0431","E0434","E0439","E0441","E0442","E0443","E0444","E1390","E1
424     ! 392","K0738";
425       *** Therapeutic Intermediate Classes for Opiates;
426       %let OpiatesTCLS=60,61;
427       %let OpiatesGNID=108156,118478,124984,124986,124988,128184,128947,129199,129311,129314
427     ! ,129315,130023,131028,131029,131146,131486;
428       %let SvcCatMHSA='PSY02','PSY03','PSY80';
429       %let SvcCatGYN='GYN01','GYN02','GYN03','GYN06','GYN09','GYN10','GYN12','GYN27','GYN29'
429     ! ,'GYN30';
430       *** Rebalance;
431       %let ConditionDxCat='CVS11','CVS10';
432       %let ConditionDxCatStage=3;
433       %let ConditionDxCatER='PSY';
434       %let ConditionDRG='280','281','282','283','284','285','239','241','474','475','476','6
15                                       The WPS System      16:10 Monday, October 29, 2018     

434     ! 16','617','618','619','620','621','003','004','011','012','013','240';
435       
436       %let ConditionAdminType='4';
437       
438       *** Modified ;
439       *** %let ConditionProcGRP='0090','0095','2370','1045','4580','4585';
440       %let ConditionProcGRP=0090,0095,2370,1045,4580,4585; /* converted it to numeric */
441       
442       *** NeoNates;
443       %let NeonatesDRGList=790,791,792,793,794,795;
444       
445       
446       * Beginning of Ujwal's modification;
447       * Import a list of 2000 enrolid;
448       PROC IMPORT
449       DATAFILE='/rpscan/u071439/data/enrolids_2000.csv'
450       OUT=enrolids
451       DBMS=CSV
452       REPLACE;
453       GETNAMES=YES;
454       GUESSINGROWS=MAX;
455       RUN;
NOTE: Procedure IMPORT step took :
      real time : 0.034
      cpu time  : 0.002


456       data enrolids;
457         infile '/rpscan/u071439/data/enrolids_2000.csv' delimiter=',' MISSOVER DSD firstobs=
457     ! 2 LRECL=32760;
458         informat 'ENROLID'n BEST32.;
459         format 'ENROLID'n BEST12.;
460         label 'ENROLID'n = 'ENROLID';
461         input    'ENROLID'n
462         ;
463         run;

NOTE: The file '/rpscan/u071439/data/enrolids_2000.csv' is:
      File Name=/rpscan/u071439/data/enrolids_2000.csv,
      Access Permissions=-rw-r--r--, Number of Links=1,
      Owner Name=u071366, Group Name=users,
      File Size=23011, Last Modified=15:52:23 Oct 23 2018,
      Created=15:52:23 Oct 23 2018, Lrecl=32760, Recfm=V

NOTE: 2000 records were read from file '/rpscan/u071439/data/enrolids_2000.csv'
      The minimum record length was 8
      The maximum record length was 10
NOTE: Data set "WORK.enrolids" has 2000 observation(s) and 1 variable(s)
NOTE: The data step took :
      real time : 0.047
      cpu time  : 0.004


16                                       The WPS System      16:10 Monday, October 29, 2018     

464       FILENAME ##IMPORT CLEAR;
465       
466       data ccaea;
467       infile '/rpscan/u071439/data/ccaea.csv' delimiter=',' MISSOVER DSD firstobs=2 LRECL=32
467     ! 760;
468       informat 'ENROLID'n BEST32.;
469       informat 'AGE'n BEST32.;
470       informat 'SEX'n $1.;
471       informat 'MSA'n BEST32.;
472       informat 'RX'n $1.;
473       informat 'ENRIND1'n BEST32.;
474       informat 'ENRIND2'n BEST32.;
475       informat 'ENRIND3'n BEST32.;
476       informat 'ENRIND4'n BEST32.;
477       informat 'ENRIND5'n BEST32.;
478       informat 'ENRIND6'n BEST32.;
479       informat 'ENRIND7'n BEST32.;
480       informat 'ENRIND8'n BEST32.;
481       informat 'ENRIND9'n BEST32.;
482       informat 'ENRIND10'n BEST32.;
483       informat 'ENRIND11'n BEST32.;
484       informat 'ENRIND12'n BEST32.;
485       informat 'PLNTYP1'n BEST32.;
486       informat 'PLNTYP2'n BEST32.;
487       informat 'PLNTYP3'n BEST32.;
488       informat 'PLNTYP4'n BEST32.;
489       informat 'PLNTYP5'n BEST32.;
490       informat 'PLNTYP6'n BEST32.;
491       informat 'PLNTYP7'n BEST32.;
492       informat 'PLNTYP8'n BEST32.;
493       informat 'PLNTYP9'n BEST32.;
494       informat 'PLNTYP10'n BEST32.;
495       informat 'PLNTYP11'n BEST32.;
496       informat 'PLNTYP12'n BEST32.;
497       format 'ENROLID'n BEST12.;
498       format 'AGE'n BEST12.;
499       format 'SEX'n $1.;
500       format 'MSA'n BEST12.;
501       format 'RX'n $1.;
502       format 'ENRIND1'n BEST12.;
503       format 'ENRIND2'n BEST12.;
504       format 'ENRIND3'n BEST12.;
505       format 'ENRIND4'n BEST12.;
506       format 'ENRIND5'n BEST12.;
507       format 'ENRIND6'n BEST12.;
508       format 'ENRIND7'n BEST12.;
509       format 'ENRIND8'n BEST12.;
510       format 'ENRIND9'n BEST12.;
511       format 'ENRIND10'n BEST12.;
512       format 'ENRIND11'n BEST12.;
513       format 'ENRIND12'n BEST12.;
514       format 'PLNTYP1'n BEST12.;
515       format 'PLNTYP2'n BEST12.;
17                                       The WPS System      16:10 Monday, October 29, 2018     

516       format 'PLNTYP3'n BEST12.;
517       format 'PLNTYP4'n BEST12.;
518       format 'PLNTYP5'n BEST12.;
519       format 'PLNTYP6'n BEST12.;
520       format 'PLNTYP7'n BEST12.;
521       format 'PLNTYP8'n BEST12.;
522       format 'PLNTYP9'n BEST12.;
523       format 'PLNTYP10'n BEST12.;
524       format 'PLNTYP11'n BEST12.;
525       format 'PLNTYP12'n BEST12.;
526       label 'ENROLID'n = 'ENROLID';
527       label 'AGE'n = 'AGE';
528       label 'SEX'n = 'SEX';
529       label 'MSA'n = 'MSA';
530       label 'RX'n = 'RX';
531       label 'ENRIND1'n = 'ENRIND1';
532       label 'ENRIND2'n = 'ENRIND2';
533       label 'ENRIND3'n = 'ENRIND3';
534       label 'ENRIND4'n = 'ENRIND4';
535       label 'ENRIND5'n = 'ENRIND5';
536       label 'ENRIND6'n = 'ENRIND6';
537       label 'ENRIND7'n = 'ENRIND7';
538       label 'ENRIND8'n = 'ENRIND8';
539       label 'ENRIND9'n = 'ENRIND9';
540       label 'ENRIND10'n = 'ENRIND10';
541       label 'ENRIND11'n = 'ENRIND11';
542       label 'ENRIND12'n = 'ENRIND12';
543       label 'PLNTYP1'n = 'PLNTYP1';
544       label 'PLNTYP2'n = 'PLNTYP2';
545       label 'PLNTYP3'n = 'PLNTYP3';
546       label 'PLNTYP4'n = 'PLNTYP4';
547       label 'PLNTYP5'n = 'PLNTYP5';
548       label 'PLNTYP6'n = 'PLNTYP6';
549       label 'PLNTYP7'n = 'PLNTYP7';
550       label 'PLNTYP8'n = 'PLNTYP8';
551       label 'PLNTYP9'n = 'PLNTYP9';
552       label 'PLNTYP10'n = 'PLNTYP10';
553       label 'PLNTYP11'n = 'PLNTYP11';
554       label 'PLNTYP12'n = 'PLNTYP12';
555       input    'ENROLID'n
556       'AGE'n
557       'SEX'n $
558       'MSA'n
559       'RX'n $
560       'ENRIND1'n
561       'ENRIND2'n
562       'ENRIND3'n
563       'ENRIND4'n
564       'ENRIND5'n
565       'ENRIND6'n
566       'ENRIND7'n
567       'ENRIND8'n
568       'ENRIND9'n
18                                       The WPS System      16:10 Monday, October 29, 2018     

569       'ENRIND10'n
570       'ENRIND11'n
571       'ENRIND12'n
572       'PLNTYP1'n
573       'PLNTYP2'n
574       'PLNTYP3'n
575       'PLNTYP4'n
576       'PLNTYP5'n
577       'PLNTYP6'n
578       'PLNTYP7'n
579       'PLNTYP8'n
580       'PLNTYP9'n
581       'PLNTYP10'n
582       'PLNTYP11'n
583       'PLNTYP12'n;
584       run;

NOTE: The file '/rpscan/u071439/data/ccaea.csv' is:
      File Name=/rpscan/u071439/data/ccaea.csv,
      Access Permissions=-rwxr-xr--, Number of Links=1,
      Owner Name=u071366, Group Name=users,
      File Size=7035526, Last Modified=15:52:28 Oct 23 2018,
      Created=15:52:28 Oct 23 2018, Lrecl=32760, Recfm=V

NOTE: 100403 records were read from file '/rpscan/u071439/data/ccaea.csv'
      The minimum record length was 54
      The maximum record length was 71
NOTE: Data set "WORK.ccaea" has 100403 observation(s) and 29 variable(s)
NOTE: The data step took :
      real time : 1.820
      cpu time  : 0.692


585       
586       %Let lastmonth=%sysfunc(month(&StartDate.),2.);
587       proc sql;
588       Create Table temp.SamplewClassification as select a.enrolid,
589       ' ' as AssignmentFinal
590       from ccaea a
591       inner join enrolids e  On e.enrolid = a.enrolid
592       where a.enrind&lastmonth.=1;
NOTE: Data set "TEMP.SamplewClassification" has 1798 observation(s) and 2 variable(s)
593       quit;
NOTE: Procedure sql step took :
      real time : 0.125
      cpu time  : 0.015


594       
595       
596       
597       
598       *** importing the MetaData;
19                                       The WPS System      16:10 Monday, October 29, 2018     

599       %macro ImportMeta(inputdata,sasoutput);
600       %if &sasoutput.=SamplewClassification and &skipImport.=1 %then %return;
601       PROC IMPORT
602       datafile="/rpscan/u071439/data/&inputdata."
603       out=temp.&sasoutput.
604       replace;
605       getnames=YES;
606       guessingrows=MAX;
607       run;
608       %mend ImportMeta;
609       
610       *** Modified;
611       *** sample of 100 patients with classification;
612       *** %ImportMeta(AllClientSample&version..csv,SamplewClassification);
613       
614       
615       *** Crossmap from HCPC codes to Procedure Groups --- not used anymore;
616       %ImportMeta(HCPCcrossmapPROCGRP16r2.csv,HcpcXwalkGRP);*/
MLOGIC(IMPORTMETA): Beginning execution
MLOGIC(IMPORTMETA): Parameter INPUTDATA has value HCPCcrossmapPROCGRP16r2.csv
MLOGIC(IMPORTMETA): Parameter SASOUTPUT has value HcpcXwalkGRP
MLOGIC(IMPORTMETA): %IF condition &sasoutput.=SamplewClassification and &skipImport.=1  evaluate
                    d to FALSE
MPRINT(IMPORTMETA):  PROC IMPORT datafile="/rpscan/u071439/data/HCPCcrossmapPROCGRP16r2.csv"
                     out=temp.HcpcXwalkGRP replace;
MPRINT(IMPORTMETA):  getnames=YES;
MPRINT(IMPORTMETA):  guessingrows=MAX;
MPRINT(IMPORTMETA):  run;
NOTE: Procedure IMPORT step took :
      real time : 0.356
      cpu time  : 0.097


MPRINT(IMPORTMETA):  data temp.HcpcXwalkGRP;
617       data temp.HcpcXwalkGRP;
MPRINT(IMPORTMETA):  infile '/rpscan/u071439/data/HCPCcrossmapPROCGRP16r2.csv' delimiter=','
                     MISSOVER DSD firstobs=2 LRECL=32760;
618         infile '/rpscan/u071439/data/HCPCcrossmapPROCGRP16r2.csv' delimiter=',' MISSOVER DSD
618     !  firstobs=2 LRECL=32760;
MPRINT(IMPORTMETA):  informat 'HCPC'n $5.;
619         informat 'HCPC'n $5.;
MPRINT(IMPORTMETA):  informat 'ProcGRP'n BEST32.;
620         informat 'ProcGRP'n BEST32.;
MPRINT(IMPORTMETA):  informat 'csc'n $15.;
621         informat 'csc'n $15.;
MPRINT(IMPORTMETA):  informat 'atg'n $14.;
622         informat 'atg'n $14.;
MPRINT(IMPORTMETA):  informat 'atg_priority'n BEST32.;
623         informat 'atg_priority'n BEST32.;
MPRINT(IMPORTMETA):  informat 'procgrp_intensity'n BEST32.;
624         informat 'procgrp_intensity'n BEST32.;
MPRINT(IMPORTMETA):  informat 'hcpcs_intensity'n BEST32.;
625         informat 'hcpcs_intensity'n BEST32.;
20                                       The WPS System      16:10 Monday, October 29, 2018     

MPRINT(IMPORTMETA):  informat 'imputed_rel_wgt'n BEST32.;
626         informat 'imputed_rel_wgt'n BEST32.;
MPRINT(IMPORTMETA):  informat 'status_ind'n $3.;
627         informat 'status_ind'n $3.;
MPRINT(IMPORTMETA):  informat 'procgrp_ver'n BEST32.;
628         informat 'procgrp_ver'n BEST32.;
MPRINT(IMPORTMETA):  informat 'release'n BEST32.;
629         informat 'release'n BEST32.;
MPRINT(IMPORTMETA):  format 'HCPC'n $5.;
630         format 'HCPC'n $5.;
MPRINT(IMPORTMETA):  format 'ProcGRP'n BEST12.;
631         format 'ProcGRP'n BEST12.;
MPRINT(IMPORTMETA):  format 'csc'n $15.;
632         format 'csc'n $15.;
MPRINT(IMPORTMETA):  format 'atg'n $14.;
633         format 'atg'n $14.;
MPRINT(IMPORTMETA):  format 'atg_priority'n BEST12.;
634         format 'atg_priority'n BEST12.;
MPRINT(IMPORTMETA):  format 'procgrp_intensity'n BEST12.;
635         format 'procgrp_intensity'n BEST12.;
MPRINT(IMPORTMETA):  format 'hcpcs_intensity'n BEST12.;
636         format 'hcpcs_intensity'n BEST12.;
MPRINT(IMPORTMETA):  format 'imputed_rel_wgt'n BEST12.;
637         format 'imputed_rel_wgt'n BEST12.;
MPRINT(IMPORTMETA):  format 'status_ind'n $3.;
638         format 'status_ind'n $3.;
MPRINT(IMPORTMETA):  format 'procgrp_ver'n BEST12.;
639         format 'procgrp_ver'n BEST12.;
MPRINT(IMPORTMETA):  format 'release'n BEST12.;
640         format 'release'n BEST12.;
MPRINT(IMPORTMETA):  label 'HCPC'n = 'HCPC';
641         label 'HCPC'n = 'HCPC';
MPRINT(IMPORTMETA):  label 'ProcGRP'n = 'ProcGRP';
642         label 'ProcGRP'n = 'ProcGRP';
MPRINT(IMPORTMETA):  label 'csc'n = 'csc';
643         label 'csc'n = 'csc';
MPRINT(IMPORTMETA):  label 'atg'n = 'atg';
644         label 'atg'n = 'atg';
MPRINT(IMPORTMETA):  label 'atg_priority'n = 'atg_priority';
645         label 'atg_priority'n = 'atg_priority';
MPRINT(IMPORTMETA):  label 'procgrp_intensity'n = 'procgrp_intensity';
646         label 'procgrp_intensity'n = 'procgrp_intensity';
MPRINT(IMPORTMETA):  label 'hcpcs_intensity'n = 'hcpcs_intensity';
647         label 'hcpcs_intensity'n = 'hcpcs_intensity';
MPRINT(IMPORTMETA):  label 'imputed_rel_wgt'n = 'imputed_rel_wgt';
648         label 'imputed_rel_wgt'n = 'imputed_rel_wgt';
MPRINT(IMPORTMETA):  label 'status_ind'n = 'status_ind';
649         label 'status_ind'n = 'status_ind';
MPRINT(IMPORTMETA):  label 'procgrp_ver'n = 'procgrp_ver';
650         label 'procgrp_ver'n = 'procgrp_ver';
MPRINT(IMPORTMETA):  label 'release'n = 'release';
651         label 'release'n = 'release';
652         input    'HCPC'n $
21                                       The WPS System      16:10 Monday, October 29, 2018     

653           'ProcGRP'n
654           'csc'n $
655           'atg'n $
656           'atg_priority'n
657           'procgrp_intensity'n
658           'hcpcs_intensity'n
659           'imputed_rel_wgt'n
660           'status_ind'n $
MPRINT(IMPORTMETA):  input 'HCPC'n $   'ProcGRP'n  'csc'n $   'atg'n $   'atg_priority'n 
                     'procgrp_intensity'n  'hcpcs_intensity'n  'imputed_rel_wgt'n  'status_ind'n
                     $   'procgrp_ver'n  'release'n  ;
661           'procgrp_ver'n
662           'release'n
MPRINT(IMPORTMETA):  run;
663         ;
664         run;

NOTE: The file '/rpscan/u071439/data/HCPCcrossmapPROCGRP16r2.csv' is:
      File Name=/rpscan/u071439/data/HCPCcrossmapPROCGRP16r2.csv,
      Access Permissions=-rwxrwxr--, Number of Links=1,
      Owner Name=u071439, Group Name=devl,
      File Size=1310814, Last Modified=13:34:52 Oct 16 2018,
      Created=15:53:16 Oct 23 2018, Lrecl=32760, Recfm=V

NOTE: 19423 records were read from file '/rpscan/u071439/data/HCPCcrossmapPROCGRP16r2.csv'
      The minimum record length was 42
      The maximum record length was 82
NOTE: Data set "TEMP.HcpcXwalkGRP" has 19423 observation(s) and 11 variable(s)
NOTE: The data step took :
      real time : 0.244
      cpu time  : 0.074


MPRINT(IMPORTMETA):  FILENAME ##IMPORT CLEAR;
665       FILENAME ##IMPORT CLEAR;
MLOGIC(IMPORTMETA): Ending execution
666       *** List of DxCat and HCPC that define cancer treamtent;
667       %ImportMeta(JanetMetadata_CancerTreatment.csv,CancerTreatment);
MLOGIC(IMPORTMETA): Beginning execution
MLOGIC(IMPORTMETA): Parameter INPUTDATA has value JanetMetadata_CancerTreatment.csv
MLOGIC(IMPORTMETA): Parameter SASOUTPUT has value CancerTreatment
MLOGIC(IMPORTMETA): %IF condition &sasoutput.=SamplewClassification and &skipImport.=1  evaluate
                    d to FALSE
MPRINT(IMPORTMETA):  PROC IMPORT
                     datafile="/rpscan/u071439/data/JanetMetadata_CancerTreatment.csv"
                     out=temp.CancerTreatment replace;
MPRINT(IMPORTMETA):  getnames=YES;
MPRINT(IMPORTMETA):  guessingrows=MAX;
MPRINT(IMPORTMETA):  run;
NOTE: Procedure IMPORT step took :
      real time : 0.008
      cpu time  : 0.000

22                                       The WPS System      16:10 Monday, October 29, 2018     


MPRINT(IMPORTMETA):  data temp.CancerTreatment;
668       data temp.CancerTreatment;
MPRINT(IMPORTMETA):  infile '/rpscan/u071439/data/JanetMetadata_CancerTreatment.csv'
                     delimiter=',' MISSOVER DSD firstobs=2 LRECL=32760;
669         infile '/rpscan/u071439/data/JanetMetadata_CancerTreatment.csv' delimiter=',' MISSOV
669     ! ER DSD firstobs=2 LRECL=32760;
MPRINT(IMPORTMETA):  informat 'DxCAT'n $5.;
670         informat 'DxCAT'n $5.;
MPRINT(IMPORTMETA):  informat 'Type'n $10.;
671         informat 'Type'n $10.;
MPRINT(IMPORTMETA):  informat 'Procedure'n $6.;
672         informat 'Procedure'n $6.;
MPRINT(IMPORTMETA):  informat 'GroupDescription'n $46.;
673         informat 'GroupDescription'n $46.;
MPRINT(IMPORTMETA):  format 'DxCAT'n $5.;
674         format 'DxCAT'n $5.;
MPRINT(IMPORTMETA):  format 'Type'n $10.;
675         format 'Type'n $10.;
MPRINT(IMPORTMETA):  format 'Procedure'n $6.;
676         format 'Procedure'n $6.;
MPRINT(IMPORTMETA):  format 'GroupDescription'n $46.;
677         format 'GroupDescription'n $46.;
MPRINT(IMPORTMETA):  label 'DxCAT'n = 'DxCAT';
678         label 'DxCAT'n = 'DxCAT';
MPRINT(IMPORTMETA):  label 'Type'n = 'Type';
679         label 'Type'n = 'Type';
MPRINT(IMPORTMETA):  label 'Procedure'n = 'Procedure';
680         label 'Procedure'n = 'Procedure';
MPRINT(IMPORTMETA):  label 'GroupDescription'n = 'GroupDescription';
681         label 'GroupDescription'n = 'GroupDescription';
682         input    'DxCAT'n $
683           'Type'n $
684           'Procedure'n $
MPRINT(IMPORTMETA):  input 'DxCAT'n $   'Type'n $   'Procedure'n $   'GroupDescription'n $   ;
685           'GroupDescription'n $
MPRINT(IMPORTMETA):  run;
686         ;
687         run;

NOTE: The file '/rpscan/u071439/data/JanetMetadata_CancerTreatment.csv' is:
      File Name=/rpscan/u071439/data/JanetMetadata_CancerTreatment.csv,
      Access Permissions=-rwxrwxr--, Number of Links=1,
      Owner Name=u071439, Group Name=devl,
      File Size=7464, Last Modified=13:34:46 Oct 16 2018,
      Created=15:53:16 Oct 23 2018, Lrecl=32760, Recfm=V

NOTE: 138 records were read from file '/rpscan/u071439/data/JanetMetadata_CancerTreatment.csv'
      The minimum record length was 33
      The maximum record length was 62
NOTE: Data set "TEMP.CancerTreatment" has 138 observation(s) and 4 variable(s)
NOTE: The data step took :
      real time : 0.079
23                                       The WPS System      16:10 Monday, October 29, 2018     

      cpu time  : 0.002


MPRINT(IMPORTMETA):  FILENAME ##IMPORT CLEAR;
688       FILENAME ##IMPORT CLEAR;
MLOGIC(IMPORTMETA): Ending execution
689       *** DxCat mapping into chronic or acute;
690       %ImportMeta(JanetMetadata_GeneralAssignments.csv,GeneralAssignments);
MLOGIC(IMPORTMETA): Beginning execution
MLOGIC(IMPORTMETA): Parameter INPUTDATA has value JanetMetadata_GeneralAssignments.csv
MLOGIC(IMPORTMETA): Parameter SASOUTPUT has value GeneralAssignments
MLOGIC(IMPORTMETA): %IF condition &sasoutput.=SamplewClassification and &skipImport.=1  evaluate
                    d to FALSE
MPRINT(IMPORTMETA):  PROC IMPORT
                     datafile="/rpscan/u071439/data/JanetMetadata_GeneralAssignments.csv"
                     out=temp.GeneralAssignments replace;
MPRINT(IMPORTMETA):  getnames=YES;
MPRINT(IMPORTMETA):  guessingrows=MAX;
MPRINT(IMPORTMETA):  run;
NOTE: Procedure IMPORT step took :
      real time : 0.031
      cpu time  : 0.001


MPRINT(IMPORTMETA):  data temp.GeneralAssignments;
691       data temp.GeneralAssignments;
MPRINT(IMPORTMETA):  infile '/rpscan/u071439/data/JanetMetadata_GeneralAssignments.csv'
                     delimiter=',' MISSOVER DSD firstobs=2 LRECL=32760;
692         infile '/rpscan/u071439/data/JanetMetadata_GeneralAssignments.csv' delimiter=',' MIS
692     ! SOVER DSD firstobs=2 LRECL=32760;
MPRINT(IMPORTMETA):  informat 'DxCat'n $5.;
693         informat 'DxCat'n $5.;
MPRINT(IMPORTMETA):  informat 'Description'n $77.;
694         informat 'Description'n $77.;
MPRINT(IMPORTMETA):  informat 'Category'n $7.;
695         informat 'Category'n $7.;
MPRINT(IMPORTMETA):  format 'DxCat'n $5.;
696         format 'DxCat'n $5.;
MPRINT(IMPORTMETA):  format 'Description'n $77.;
697         format 'Description'n $77.;
MPRINT(IMPORTMETA):  format 'Category'n $7.;
698         format 'Category'n $7.;
MPRINT(IMPORTMETA):  label 'DxCat'n = 'DxCat';
699         label 'DxCat'n = 'DxCat';
MPRINT(IMPORTMETA):  label 'Description'n = 'Description';
700         label 'Description'n = 'Description';
MPRINT(IMPORTMETA):  label 'Category'n = 'Category';
701         label 'Category'n = 'Category';
702         input    'DxCat'n $
703           'Description'n $
MPRINT(IMPORTMETA):  input 'DxCat'n $   'Description'n $   'Category'n $   ;
704           'Category'n $
MPRINT(IMPORTMETA):  run;
24                                       The WPS System      16:10 Monday, October 29, 2018     

705         ;
706         run;

NOTE: The file '/rpscan/u071439/data/JanetMetadata_GeneralAssignments.csv' is:
      File Name=/rpscan/u071439/data/JanetMetadata_GeneralAssignments.csv,
      Access Permissions=-rwxrwxr--, Number of Links=1,
      Owner Name=u071439, Group Name=devl,
      File Size=24670, Last Modified=13:34:46 Oct 16 2018,
      Created=15:53:16 Oct 23 2018, Lrecl=32760, Recfm=V

NOTE: 565 records were read from file
      '/rpscan/u071439/data/JanetMetadata_GeneralAssignments.csv'
      The minimum record length was 17
      The maximum record length was 76
NOTE: Data set "TEMP.GeneralAssignments" has 565 observation(s) and 3 variable(s)
NOTE: The data step took :
      real time : 0.047
      cpu time  : 0.002


MPRINT(IMPORTMETA):  FILENAME ##IMPORT CLEAR;
707       FILENAME ##IMPORT CLEAR;
MLOGIC(IMPORTMETA): Ending execution
708       *** Import the Mapping of Procedure Group (OPEG) to ATG;
709       %ImportMeta(FromOPEG_ProcedureGroup_lookup_v2015_2.csv,OPEGLookup);
MLOGIC(IMPORTMETA): Beginning execution
MLOGIC(IMPORTMETA): Parameter INPUTDATA has value FromOPEG_ProcedureGroup_lookup_v2015_2.csv
MLOGIC(IMPORTMETA): Parameter SASOUTPUT has value OPEGLookup
MLOGIC(IMPORTMETA): %IF condition &sasoutput.=SamplewClassification and &skipImport.=1  evaluate
                    d to FALSE
MPRINT(IMPORTMETA):  PROC IMPORT
                     datafile="/rpscan/u071439/data/FromOPEG_ProcedureGroup_lookup_v2015_2.csv"
                     out=temp.OPEGLookup replace;
MPRINT(IMPORTMETA):  getnames=YES;
MPRINT(IMPORTMETA):  guessingrows=MAX;
MPRINT(IMPORTMETA):  run;
NOTE: Procedure IMPORT step took :
      real time : 0.249
      cpu time  : 0.084


MPRINT(IMPORTMETA):  data temp.OPEGLookup;
710       data temp.OPEGLookup;
MPRINT(IMPORTMETA):  infile '/rpscan/u071439/data/FromOPEG_ProcedureGroup_lookup_v2015_2.csv'
                     delimiter=',' MISSOVER DSD firstobs=2 LRECL=32760;
711         infile '/rpscan/u071439/data/FromOPEG_ProcedureGroup_lookup_v2015_2.csv' delimiter='
711     ! ,' MISSOVER DSD firstobs=2 LRECL=32760;
MPRINT(IMPORTMETA):  informat 'ProcedureName'n $51.;
712         informat 'ProcedureName'n $51.;
MPRINT(IMPORTMETA):  informat 'ProcedureGroup'n BEST32.;
713         informat 'ProcedureGroup'n BEST32.;
MPRINT(IMPORTMETA):  informat 'atg'n $12.;
714         informat 'atg'n $12.;
25                                       The WPS System      16:10 Monday, October 29, 2018     

MPRINT(IMPORTMETA):  informat 'acg'n $15.;
715         informat 'acg'n $15.;
MPRINT(IMPORTMETA):  informat 'hcpcs'n $5.;
716         informat 'hcpcs'n $5.;
MPRINT(IMPORTMETA):  informat 'cpttitle'n $128.;
717         informat 'cpttitle'n $128.;
MPRINT(IMPORTMETA):  format 'ProcedureName'n $51.;
718         format 'ProcedureName'n $51.;
MPRINT(IMPORTMETA):  format 'ProcedureGroup'n BEST12.;
719         format 'ProcedureGroup'n BEST12.;
MPRINT(IMPORTMETA):  format 'atg'n $12.;
720         format 'atg'n $12.;
MPRINT(IMPORTMETA):  format 'acg'n $15.;
721         format 'acg'n $15.;
MPRINT(IMPORTMETA):  format 'hcpcs'n $5.;
722         format 'hcpcs'n $5.;
MPRINT(IMPORTMETA):  format 'cpttitle'n $128.;
723         format 'cpttitle'n $128.;
MPRINT(IMPORTMETA):  label 'ProcedureName'n = 'ProcedureName';
724         label 'ProcedureName'n = 'ProcedureName';
MPRINT(IMPORTMETA):  label 'ProcedureGroup'n = 'ProcedureGroup';
725         label 'ProcedureGroup'n = 'ProcedureGroup';
MPRINT(IMPORTMETA):  label 'atg'n = 'atg';
726         label 'atg'n = 'atg';
MPRINT(IMPORTMETA):  label 'acg'n = 'acg';
727         label 'acg'n = 'acg';
MPRINT(IMPORTMETA):  label 'hcpcs'n = 'hcpcs';
728         label 'hcpcs'n = 'hcpcs';
MPRINT(IMPORTMETA):  label 'cpttitle'n = 'cpttitle';
729         label 'cpttitle'n = 'cpttitle';
730         input    'ProcedureName'n $
731           'ProcedureGroup'n
732           'atg'n $
733           'acg'n $
734           'hcpcs'n $
MPRINT(IMPORTMETA):  input 'ProcedureName'n $   'ProcedureGroup'n  'atg'n $   'acg'n $  
                     'hcpcs'n $   'cpttitle'n $   ;
735           'cpttitle'n $
MPRINT(IMPORTMETA):  run;
736         ;
737         run;

NOTE: The file '/rpscan/u071439/data/FromOPEG_ProcedureGroup_lookup_v2015_2.csv' is:
      File Name=/rpscan/u071439/data/FromOPEG_ProcedureGroup_lookup_v2015_2.csv,
      Access Permissions=-rwxrwxr--, Number of Links=1,
      Owner Name=u071439, Group Name=devl,
      File Size=1972727, Last Modified=13:34:53 Oct 16 2018,
      Created=15:53:16 Oct 23 2018, Lrecl=32760, Recfm=V

NOTE: 18957 records were read from file
      '/rpscan/u071439/data/FromOPEG_ProcedureGroup_lookup_v2015_2.csv'
      The minimum record length was 50
      The maximum record length was 178
26                                       The WPS System      16:10 Monday, October 29, 2018     

NOTE: Data set "TEMP.OPEGLookup" has 18957 observation(s) and 6 variable(s)
NOTE: The data step took :
      real time : 0.148
      cpu time  : 0.049


MPRINT(IMPORTMETA):  FILENAME ##IMPORT CLEAR;
738       FILENAME ##IMPORT CLEAR;
MLOGIC(IMPORTMETA): Ending execution
739       *** Import the Mapping from DxCat to Significant Conditions;
740       %ImportMeta(JanetMetadata_SignificantConditions.csv,SignificantConditions);
MLOGIC(IMPORTMETA): Beginning execution
MLOGIC(IMPORTMETA): Parameter INPUTDATA has value JanetMetadata_SignificantConditions.csv
MLOGIC(IMPORTMETA): Parameter SASOUTPUT has value SignificantConditions
MLOGIC(IMPORTMETA): %IF condition &sasoutput.=SamplewClassification and &skipImport.=1  evaluate
                    d to FALSE
MPRINT(IMPORTMETA):  PROC IMPORT
                     datafile="/rpscan/u071439/data/JanetMetadata_SignificantConditions.csv"
                     out=temp.SignificantConditions replace;
MPRINT(IMPORTMETA):  getnames=YES;
MPRINT(IMPORTMETA):  guessingrows=MAX;
MPRINT(IMPORTMETA):  run;
NOTE: Procedure IMPORT step took :
      real time : 0.026
      cpu time  : 0.001


MPRINT(IMPORTMETA):  data temp.SignificantConditions;
741       data temp.SignificantConditions;
MPRINT(IMPORTMETA):  infile '/rpscan/u071439/data/JanetMetadata_SignificantConditions.csv'
                     delimiter=',' MISSOVER DSD firstobs=2 LRECL=32760;
742         infile '/rpscan/u071439/data/JanetMetadata_SignificantConditions.csv' delimiter=',' 
742     ! MISSOVER DSD firstobs=2 LRECL=32760;
MPRINT(IMPORTMETA):  informat 'DxCat'n $5.;
743         informat 'DxCat'n $5.;
MPRINT(IMPORTMETA):  informat 'Description'n $77.;
744         informat 'Description'n $77.;
MPRINT(IMPORTMETA):  informat 'Significance'n $4.;
745         informat 'Significance'n $4.;
MPRINT(IMPORTMETA):  format 'DxCat'n $5.;
746         format 'DxCat'n $5.;
MPRINT(IMPORTMETA):  format 'Description'n $77.;
747         format 'Description'n $77.;
MPRINT(IMPORTMETA):  format 'Significance'n $4.;
748         format 'Significance'n $4.;
MPRINT(IMPORTMETA):  label 'DxCat'n = 'DxCat';
749         label 'DxCat'n = 'DxCat';
MPRINT(IMPORTMETA):  label 'Description'n = 'Description';
750         label 'Description'n = 'Description';
MPRINT(IMPORTMETA):  label 'Significance'n = 'Significance';
751         label 'Significance'n = 'Significance';
752         input    'DxCat'n $
753           'Description'n $
27                                       The WPS System      16:10 Monday, October 29, 2018     

MPRINT(IMPORTMETA):  input 'DxCat'n $   'Description'n $   'Significance'n $   ;
754           'Significance'n $
MPRINT(IMPORTMETA):  run;
755         ;
756         run;

NOTE: The file '/rpscan/u071439/data/JanetMetadata_SignificantConditions.csv' is:
      File Name=/rpscan/u071439/data/JanetMetadata_SignificantConditions.csv,
      Access Permissions=-rwxrwxr--, Number of Links=1,
      Owner Name=u071439, Group Name=devl,
      File Size=12700, Last Modified=13:34:46 Oct 16 2018,
      Created=15:53:15 Oct 23 2018, Lrecl=32760, Recfm=V

NOTE: 296 records were read from file
      '/rpscan/u071439/data/JanetMetadata_SignificantConditions.csv'
      The minimum record length was 15
      The maximum record length was 73
NOTE: Data set "TEMP.SignificantConditions" has 296 observation(s) and 3 variable(s)
NOTE: The data step took :
      real time : 0.055
      cpu time  : 0.002


MPRINT(IMPORTMETA):  FILENAME ##IMPORT CLEAR;
757       FILENAME ##IMPORT CLEAR;
MLOGIC(IMPORTMETA): Ending execution
758       *** Import the Maintenance Drugs List;
759       %ImportMeta(JanetMetadata_MaintenanceDrugs.csv,ChronicRx);
MLOGIC(IMPORTMETA): Beginning execution
MLOGIC(IMPORTMETA): Parameter INPUTDATA has value JanetMetadata_MaintenanceDrugs.csv
MLOGIC(IMPORTMETA): Parameter SASOUTPUT has value ChronicRx
MLOGIC(IMPORTMETA): %IF condition &sasoutput.=SamplewClassification and &skipImport.=1  evaluate
                    d to FALSE
MPRINT(IMPORTMETA):  PROC IMPORT
                     datafile="/rpscan/u071439/data/JanetMetadata_MaintenanceDrugs.csv"
                     out=temp.ChronicRx replace;
MPRINT(IMPORTMETA):  getnames=YES;
MPRINT(IMPORTMETA):  guessingrows=MAX;
MPRINT(IMPORTMETA):  run;
NOTE: Procedure IMPORT step took :
      real time : 0.477
      cpu time  : 0.146


MPRINT(IMPORTMETA):  data temp.ChronicRx;
760       data temp.ChronicRx;
MPRINT(IMPORTMETA):  infile '/rpscan/u071439/data/JanetMetadata_MaintenanceDrugs.csv'
                     delimiter=',' MISSOVER DSD firstobs=2 LRECL=32760;
761         infile '/rpscan/u071439/data/JanetMetadata_MaintenanceDrugs.csv' delimiter=',' MISSO
761     ! VER DSD firstobs=2 LRECL=32760;
MPRINT(IMPORTMETA):  informat 'NDCNUM'n BEST32.;
762         informat 'NDCNUM'n BEST32.;
MPRINT(IMPORTMETA):  informat 'GENERID'n BEST32.;
28                                       The WPS System      16:10 Monday, October 29, 2018     

763         informat 'GENERID'n BEST32.;
MPRINT(IMPORTMETA):  informat 'Prodname'n $64.;
764         informat 'Prodname'n $64.;
MPRINT(IMPORTMETA):  informat 'Category'n $11.;
765         informat 'Category'n $11.;
MPRINT(IMPORTMETA):  format 'NDCNUM'n BEST12.;
766         format 'NDCNUM'n BEST12.;
MPRINT(IMPORTMETA):  format 'GENERID'n BEST12.;
767         format 'GENERID'n BEST12.;
MPRINT(IMPORTMETA):  format 'Prodname'n $64.;
768         format 'Prodname'n $64.;
MPRINT(IMPORTMETA):  format 'Category'n $11.;
769         format 'Category'n $11.;
MPRINT(IMPORTMETA):  label 'NDCNUM'n = 'NDCNUM';
770         label 'NDCNUM'n = 'NDCNUM';
MPRINT(IMPORTMETA):  label 'GENERID'n = 'GENERID';
771         label 'GENERID'n = 'GENERID';
MPRINT(IMPORTMETA):  label 'Prodname'n = 'Prodname';
772         label 'Prodname'n = 'Prodname';
MPRINT(IMPORTMETA):  label 'Category'n = 'Category';
773         label 'Category'n = 'Category';
774         input    'NDCNUM'n
775           'GENERID'n
776           'Prodname'n $
MPRINT(IMPORTMETA):  input 'NDCNUM'n  'GENERID'n  'Prodname'n $   'Category'n $   ;
777           'Category'n $
MPRINT(IMPORTMETA):  run;
778         ;
779         run;

NOTE: The file '/rpscan/u071439/data/JanetMetadata_MaintenanceDrugs.csv' is:
      File Name=/rpscan/u071439/data/JanetMetadata_MaintenanceDrugs.csv,
      Access Permissions=-rwxrwxr--, Number of Links=1,
      Owner Name=u071439, Group Name=devl,
      File Size=2737869, Last Modified=13:34:54 Oct 16 2018,
      Created=15:53:16 Oct 23 2018, Lrecl=32760, Recfm=V

NOTE: 58539 records were read from file
      '/rpscan/u071439/data/JanetMetadata_MaintenanceDrugs.csv'
      The minimum record length was 33
      The maximum record length was 81
NOTE: Data set "TEMP.ChronicRx" has 58539 observation(s) and 4 variable(s)
NOTE: The data step took :
      real time : 0.332
      cpu time  : 0.118


MPRINT(IMPORTMETA):  FILENAME ##IMPORT CLEAR;
780       FILENAME ##IMPORT CLEAR;
MLOGIC(IMPORTMETA): Ending execution
781       *** Import the mapping to Body Systems List;
782       %ImportMeta(JanetMetadata_BodySystem.csv,BodySystem);
MLOGIC(IMPORTMETA): Beginning execution
29                                       The WPS System      16:10 Monday, October 29, 2018     

MLOGIC(IMPORTMETA): Parameter INPUTDATA has value JanetMetadata_BodySystem.csv
MLOGIC(IMPORTMETA): Parameter SASOUTPUT has value BodySystem
MLOGIC(IMPORTMETA): %IF condition &sasoutput.=SamplewClassification and &skipImport.=1  evaluate
                    d to FALSE
MPRINT(IMPORTMETA):  PROC IMPORT datafile="/rpscan/u071439/data/JanetMetadata_BodySystem.csv"
                     out=temp.BodySystem replace;
MPRINT(IMPORTMETA):  getnames=YES;
MPRINT(IMPORTMETA):  guessingrows=MAX;
MPRINT(IMPORTMETA):  run;
NOTE: Procedure IMPORT step took :
      real time : 0.012
      cpu time  : 0.001


MPRINT(IMPORTMETA):  data temp.BodySystem;
783       data temp.BodySystem;
MPRINT(IMPORTMETA):  infile '/rpscan/u071439/data/JanetMetadata_BodySystem.csv' delimiter=','
                     MISSOVER DSD firstobs=2 LRECL=32760;
784         infile '/rpscan/u071439/data/JanetMetadata_BodySystem.csv' delimiter=',' MISSOVER DS
784     ! D firstobs=2 LRECL=32760;
MPRINT(IMPORTMETA):  informat 'DxCat'n $5.;
785         informat 'DxCat'n $5.;
MPRINT(IMPORTMETA):  informat 'Description'n $77.;
786         informat 'Description'n $77.;
MPRINT(IMPORTMETA):  informat 'Body'n BEST32.;
787         informat 'Body'n BEST32.;
MPRINT(IMPORTMETA):  informat 'BodyDescription'n $40.;
788         informat 'BodyDescription'n $40.;
MPRINT(IMPORTMETA):  format 'DxCat'n $5.;
789         format 'DxCat'n $5.;
MPRINT(IMPORTMETA):  format 'Description'n $77.;
790         format 'Description'n $77.;
MPRINT(IMPORTMETA):  format 'Body'n BEST12.;
791         format 'Body'n BEST12.;
MPRINT(IMPORTMETA):  format 'BodyDescription'n $40.;
792         format 'BodyDescription'n $40.;
MPRINT(IMPORTMETA):  label 'DxCat'n = 'DxCat';
793         label 'DxCat'n = 'DxCat';
MPRINT(IMPORTMETA):  label 'Description'n = 'Description';
794         label 'Description'n = 'Description';
MPRINT(IMPORTMETA):  label 'Body'n = 'Body';
795         label 'Body'n = 'Body';
MPRINT(IMPORTMETA):  label 'BodyDescription'n = 'BodyDescription';
796         label 'BodyDescription'n = 'BodyDescription';
797         input    'DxCat'n $
798           'Description'n $
799           'Body'n
MPRINT(IMPORTMETA):  input 'DxCat'n $   'Description'n $   'Body'n  'BodyDescription'n $   ;
800           'BodyDescription'n $
MPRINT(IMPORTMETA):  run;
801         ;
802         run;

30                                       The WPS System      16:10 Monday, October 29, 2018     

NOTE: The file '/rpscan/u071439/data/JanetMetadata_BodySystem.csv' is:
      File Name=/rpscan/u071439/data/JanetMetadata_BodySystem.csv,
      Access Permissions=-rwxrwxr--, Number of Links=1,
      Owner Name=u071439, Group Name=devl,
      File Size=28046, Last Modified=13:34:46 Oct 16 2018,
      Created=15:53:16 Oct 23 2018, Lrecl=32760, Recfm=V

NOTE: 565 records were read from file '/rpscan/u071439/data/JanetMetadata_BodySystem.csv'
      The minimum record length was 18
      The maximum record length was 89
NOTE: Data set "TEMP.BodySystem" has 565 observation(s) and 4 variable(s)
NOTE: The data step took :
      real time : 0.078
      cpu time  : 0.003


MPRINT(IMPORTMETA):  FILENAME ##IMPORT CLEAR;
803       FILENAME ##IMPORT CLEAR;
MLOGIC(IMPORTMETA): Ending execution
804       *** Import the list of conditions for Treatment Navigation logic;
805       %ImportMeta(JanetMetadata_TreatmentNavigation.csv,TreatmentNavigation);
MLOGIC(IMPORTMETA): Beginning execution
MLOGIC(IMPORTMETA): Parameter INPUTDATA has value JanetMetadata_TreatmentNavigation.csv
MLOGIC(IMPORTMETA): Parameter SASOUTPUT has value TreatmentNavigation
MLOGIC(IMPORTMETA): %IF condition &sasoutput.=SamplewClassification and &skipImport.=1  evaluate
                    d to FALSE
MPRINT(IMPORTMETA):  PROC IMPORT
                     datafile="/rpscan/u071439/data/JanetMetadata_TreatmentNavigation.csv"
                     out=temp.TreatmentNavigation replace;
MPRINT(IMPORTMETA):  getnames=YES;
MPRINT(IMPORTMETA):  guessingrows=MAX;
MPRINT(IMPORTMETA):  run;
NOTE: Procedure IMPORT step took :
      real time : 0.006
      cpu time  : 0.000


MPRINT(IMPORTMETA):  data temp.TreatmentNavigation;
806       data temp.TreatmentNavigation;
MPRINT(IMPORTMETA):  infile '/rpscan/u071439/data/JanetMetadata_TreatmentNavigation.csv'
                     delimiter=',' MISSOVER DSD firstobs=2 LRECL=32760;
807         infile '/rpscan/u071439/data/JanetMetadata_TreatmentNavigation.csv' delimiter=',' MI
807     ! SSOVER DSD firstobs=2 LRECL=32760;
MPRINT(IMPORTMETA):  informat 'Condition'n $36.;
808         informat 'Condition'n $36.;
MPRINT(IMPORTMETA):  informat 'DxCat'n $5.;
809         informat 'DxCat'n $5.;
MPRINT(IMPORTMETA):  informat 'Stage'n BEST32.;
810         informat 'Stage'n BEST32.;
MPRINT(IMPORTMETA):  format 'Condition'n $36.;
811         format 'Condition'n $36.;
MPRINT(IMPORTMETA):  format 'DxCat'n $5.;
812         format 'DxCat'n $5.;
31                                       The WPS System      16:10 Monday, October 29, 2018     

MPRINT(IMPORTMETA):  format 'Stage'n BEST12.;
813         format 'Stage'n BEST12.;
MPRINT(IMPORTMETA):  label 'Condition'n = 'Condition';
814         label 'Condition'n = 'Condition';
MPRINT(IMPORTMETA):  label 'DxCat'n = 'DxCat';
815         label 'DxCat'n = 'DxCat';
MPRINT(IMPORTMETA):  label 'Stage'n = 'Stage';
816         label 'Stage'n = 'Stage';
817         input    'Condition'n $
MPRINT(IMPORTMETA):  input 'Condition'n $   'DxCat'n $   'Stage'n  ;
818           'DxCat'n $
819           'Stage'n
MPRINT(IMPORTMETA):  run;
820         ;
821         run;

NOTE: The file '/rpscan/u071439/data/JanetMetadata_TreatmentNavigation.csv' is:
      File Name=/rpscan/u071439/data/JanetMetadata_TreatmentNavigation.csv,
      Access Permissions=-rwxrwxr--, Number of Links=1,
      Owner Name=u071439, Group Name=devl,
      File Size=981, Last Modified=13:34:46 Oct 16 2018,
      Created=15:53:13 Oct 23 2018, Lrecl=32760, Recfm=V

NOTE: 31 records were read from file
      '/rpscan/u071439/data/JanetMetadata_TreatmentNavigation.csv'
      The minimum record length was 14
      The maximum record length was 39
NOTE: Data set "TEMP.TreatmentNavigation" has 31 observation(s) and 3 variable(s)
NOTE: The data step took :
      real time : 0.089
      cpu time  : 0.002


MPRINT(IMPORTMETA):  FILENAME ##IMPORT CLEAR;
822       FILENAME ##IMPORT CLEAR;
MLOGIC(IMPORTMETA): Ending execution
823       *** Import the list of DxCats for general active cancer for Surveillance logic;
824       %ImportMeta(JanetMetadata_SurveillanceGeneralActiveCancerDxCat.csv,SurvGeneralActiveCa
824     ! ncerDxCat);
MLOGIC(IMPORTMETA): Beginning execution
MLOGIC(IMPORTMETA): Parameter INPUTDATA has value JanetMetadata_SurveillanceGeneralActiveCancerD
                    xCat.csv
MLOGIC(IMPORTMETA): Parameter SASOUTPUT has value SurvGeneralActiveCancerDxCat
MLOGIC(IMPORTMETA): %IF condition &sasoutput.=SamplewClassification and &skipImport.=1  evaluate
                    d to FALSE
MPRINT(IMPORTMETA):  PROC IMPORT
                     datafile="/rpscan/u071439/data/JanetMetadata_SurveillanceGeneralActiveCance
                     rDxCat.csv" out=temp.SurvGeneralActiveCancerDxCat replace;
MPRINT(IMPORTMETA):  getnames=YES;
MPRINT(IMPORTMETA):  guessingrows=MAX;
MPRINT(IMPORTMETA):  run;
NOTE: Procedure IMPORT step took :
      real time : 0.009
32                                       The WPS System      16:10 Monday, October 29, 2018     

      cpu time  : 0.000


MPRINT(IMPORTMETA):  data temp.SurvGeneralActiveCancerDxCat;
825       data temp.SurvGeneralActiveCancerDxCat;
MPRINT(IMPORTMETA):  infile
                     '/rpscan/u071439/data/JanetMetadata_SurveillanceGeneralActiveCancerDxCat.cs
                     v' delimiter=',' MISSOVER DSD firstobs=2 LRECL=32760;
826         infile '/rpscan/u071439/data/JanetMetadata_SurveillanceGeneralActiveCancerDxCat.csv'
826     !  delimiter=',' MISSOVER DSD firstobs=2 LRECL=32760;
MPRINT(IMPORTMETA):  informat 'Type'n $2.;
827         informat 'Type'n $2.;
MPRINT(IMPORTMETA):  informat 'DxCat'n $5.;
828         informat 'DxCat'n $5.;
MPRINT(IMPORTMETA):  informat 'Description'n $74.;
829         informat 'Description'n $74.;
MPRINT(IMPORTMETA):  format 'Type'n $2.;
830         format 'Type'n $2.;
MPRINT(IMPORTMETA):  format 'DxCat'n $5.;
831         format 'DxCat'n $5.;
MPRINT(IMPORTMETA):  format 'Description'n $74.;
832         format 'Description'n $74.;
MPRINT(IMPORTMETA):  label 'Type'n = 'Type';
833         label 'Type'n = 'Type';
MPRINT(IMPORTMETA):  label 'DxCat'n = 'DxCat';
834         label 'DxCat'n = 'DxCat';
MPRINT(IMPORTMETA):  label 'Description'n = 'Description';
835         label 'Description'n = 'Description';
836         input    'Type'n $
837           'DxCat'n $
MPRINT(IMPORTMETA):  input 'Type'n $   'DxCat'n $   'Description'n $   ;
838           'Description'n $
MPRINT(IMPORTMETA):  run;
839         ;
840         run;

NOTE: The file '/rpscan/u071439/data/JanetMetadata_SurveillanceGeneralActiveCancerDxCat.csv'
      is:
      File Name=/rpscan/u071439/data/JanetMetadata_SurveillanceGeneralActiveCancerDxCat.csv,
      Access Permissions=-rwxrwxr--, Number of Links=1,
      Owner Name=u071439, Group Name=devl,
      File Size=4152, Last Modified=13:34:46 Oct 16 2018,
      Created=15:53:14 Oct 23 2018, Lrecl=32760, Recfm=V

NOTE: 77 records were read from file
      '/rpscan/u071439/data/JanetMetadata_SurveillanceGeneralActiveCancerDxCat.csv'
      The minimum record length was 27
      The maximum record length was 71
NOTE: Data set "TEMP.SurvGeneralActiveCancerDxCat" has 77 observation(s) and 3 variable(s)
NOTE: The data step took :
      real time : 0.041
      cpu time  : 0.002

33                                       The WPS System      16:10 Monday, October 29, 2018     


MPRINT(IMPORTMETA):  FILENAME ##IMPORT CLEAR;
841       FILENAME ##IMPORT CLEAR;
MLOGIC(IMPORTMETA): Ending execution
842       *** Import the list of PROCGRP for general active cancer for Surveillance logic;
843       %ImportMeta(JanetMetadata_SurveillanceGeneralActiveCancerPROCGRP.csv,SurvGeneralActive
843     ! CancerPROCGRP);
MLOGIC(IMPORTMETA): Beginning execution
MLOGIC(IMPORTMETA): Parameter INPUTDATA has value JanetMetadata_SurveillanceGeneralActiveCancerP
                    ROCGRP.csv
MLOGIC(IMPORTMETA): Parameter SASOUTPUT has value SurvGeneralActiveCancerPROCGRP
MLOGIC(IMPORTMETA): %IF condition &sasoutput.=SamplewClassification and &skipImport.=1  evaluate
                    d to FALSE
MPRINT(IMPORTMETA):  PROC IMPORT
                     datafile="/rpscan/u071439/data/JanetMetadata_SurveillanceGeneralActiveCance
                     rPROCGRP.csv" out=temp.SurvGeneralActiveCancerPROCGRP replace;
MPRINT(IMPORTMETA):  getnames=YES;
MPRINT(IMPORTMETA):  guessingrows=MAX;
MPRINT(IMPORTMETA):  run;
NOTE: Procedure IMPORT step took :
      real time : 0.015
      cpu time  : 0.000


MPRINT(IMPORTMETA):  data temp.SurvGeneralActiveCancerPROCGRP;
844       data temp.SurvGeneralActiveCancerPROCGRP;
MPRINT(IMPORTMETA):  infile
                     '/rpscan/u071439/data/JanetMetadata_SurveillanceGeneralActiveCancerPROCGRP.
                     csv' delimiter=',' MISSOVER DSD firstobs=2 LRECL=32760;
845         infile '/rpscan/u071439/data/JanetMetadata_SurveillanceGeneralActiveCancerPROCGRP.cs
845     ! v' delimiter=',' MISSOVER DSD firstobs=2 LRECL=32760;
MPRINT(IMPORTMETA):  informat 'PROCGRP'n BEST32.;
846         informat 'PROCGRP'n BEST32.;
MPRINT(IMPORTMETA):  informat 'Description'n $46.;
847         informat 'Description'n $46.;
MPRINT(IMPORTMETA):  format 'PROCGRP'n BEST12.;
848         format 'PROCGRP'n BEST12.;
MPRINT(IMPORTMETA):  format 'Description'n $46.;
849         format 'Description'n $46.;
MPRINT(IMPORTMETA):  label 'PROCGRP'n = 'PROCGRP';
850         label 'PROCGRP'n = 'PROCGRP';
MPRINT(IMPORTMETA):  label 'Description'n = 'Description';
851         label 'Description'n = 'Description';
852         input    'PROCGRP'n
MPRINT(IMPORTMETA):  input 'PROCGRP'n  'Description'n $   ;
853           'Description'n $
MPRINT(IMPORTMETA):  run;
854         ;
855         run;

NOTE: The file '/rpscan/u071439/data/JanetMetadata_SurveillanceGeneralActiveCancerPROCGRP.csv'
      is:
      File Name=/rpscan/u071439/data/JanetMetadata_SurveillanceGeneralActiveCancerPROCGRP.csv,
34                                       The WPS System      16:10 Monday, October 29, 2018     

      Access Permissions=-rwxrwxr--, Number of Links=1,
      Owner Name=u071439, Group Name=devl,
      File Size=952, Last Modified=13:34:46 Oct 16 2018,
      Created=15:53:14 Oct 23 2018, Lrecl=32760, Recfm=V

NOTE: 25 records were read from file
      '/rpscan/u071439/data/JanetMetadata_SurveillanceGeneralActiveCancerPROCGRP.csv'
      The minimum record length was 19
      The maximum record length was 45
NOTE: Data set "TEMP.SurvGeneralActiveCancerPROCGRP" has 25 observation(s) and 2 variable(s)
NOTE: The data step took :
      real time : 0.051
      cpu time  : 0.002


MPRINT(IMPORTMETA):  FILENAME ##IMPORT CLEAR;
856       FILENAME ##IMPORT CLEAR;
MLOGIC(IMPORTMETA): Ending execution
857       
858       
859       *** Modified ;
860       *** Import the list of PROCGRP for specific active cancer for Surveillance logic;
861       *** %ImportMeta(JanetMetadata_SurveillanceSpecificActiveCancer.csv,SurvSpecificActiveC
861     ! ancer);
862       *** line 144 - Q2043;
863       data  temp.SurvSpecificActiveCancer;
864       infile '/rpscan/u071439/data/JanetMetadata_SurveillanceSpecificActiveCancer.csv' delim
864     ! iter=',' MISSOVER DSD firstobs=2 LRECL=32760;
865       informat 'DxCat'n $5.;
866       informat 'DxCatDesc'n $75.;
867       informat 'PROCGRP'n BEST32.;
868       informat 'Procedure_group'n $51.;
869       informat 'stage'n BEST32.;
870       format 'DxCat'n $5.;
871       format 'DxCatDesc'n $75.;
872       format 'PROCGRP'n BEST12.;
873       format 'Procedure_group'n $51.;
874       format 'stage'n BEST12.;
875       label 'DxCat'n = 'DxCat';
876       label 'DxCatDesc'n = 'DxCatDesc';
877       label 'PROCGRP'n = 'PROCGRP';
878       label 'Procedure_group'n = 'Procedure group';
879       label 'stage'n = 'stage';
880       input    'DxCat'n $
881       'DxCatDesc'n $
882       'PROCGRP'n
883       'Procedure_group'n $
884       'stage'n;
885       run;

NOTE: The file '/rpscan/u071439/data/JanetMetadata_SurveillanceSpecificActiveCancer.csv' is:
      File Name=/rpscan/u071439/data/JanetMetadata_SurveillanceSpecificActiveCancer.csv,
      Access Permissions=-rwxrwxr--, Number of Links=1,
35                                       The WPS System      16:10 Monday, October 29, 2018     

      Owner Name=u071439, Group Name=devl,
      File Size=12684, Last Modified=14:04:35 Oct 23 2018,
      Created=15:53:13 Oct 23 2018, Lrecl=32760, Recfm=V

NOTE: 157 records were read from file
      '/rpscan/u071439/data/JanetMetadata_SurveillanceSpecificActiveCancer.csv'
      The minimum record length was 35
      The maximum record length was 100
NOTE: Data set "TEMP.SurvSpecificActiveCancer" has 157 observation(s) and 5 variable(s)
NOTE: The data step took :
      real time : 0.062
      cpu time  : 0.002


886       
887       
888       *** Import the list of PROCGRP for miscellaneous for Surveillance logic;
889       %ImportMeta(JanetMetadata_SurveillanceMiscellaneous.csv,SurvMiscellaneous);
MLOGIC(IMPORTMETA): Beginning execution
MLOGIC(IMPORTMETA): Parameter INPUTDATA has value JanetMetadata_SurveillanceMiscellaneous.csv
MLOGIC(IMPORTMETA): Parameter SASOUTPUT has value SurvMiscellaneous
MLOGIC(IMPORTMETA): %IF condition &sasoutput.=SamplewClassification and &skipImport.=1  evaluate
                    d to FALSE
MPRINT(IMPORTMETA):  PROC IMPORT
                     datafile="/rpscan/u071439/data/JanetMetadata_SurveillanceMiscellaneous.csv"
                     out=temp.SurvMiscellaneous replace;
MPRINT(IMPORTMETA):  getnames=YES;
MPRINT(IMPORTMETA):  guessingrows=MAX;
MPRINT(IMPORTMETA):  run;
NOTE: Procedure IMPORT step took :
      real time : 0.007
      cpu time  : 0.000


MPRINT(IMPORTMETA):  data temp.SurvMiscellaneous;
890       data temp.SurvMiscellaneous;
MPRINT(IMPORTMETA):  infile '/rpscan/u071439/data/JanetMetadata_SurveillanceMiscellaneous.csv'
                     delimiter=',' MISSOVER DSD firstobs=2 LRECL=32760;
891         infile '/rpscan/u071439/data/JanetMetadata_SurveillanceMiscellaneous.csv' delimiter=
891     ! ',' MISSOVER DSD firstobs=2 LRECL=32760;
MPRINT(IMPORTMETA):  informat 'CodeType'n $3.;
892         informat 'CodeType'n $3.;
MPRINT(IMPORTMETA):  informat 'Code'n BEST32.;
893         informat 'Code'n BEST32.;
MPRINT(IMPORTMETA):  informat 'Description'n $48.;
894         informat 'Description'n $48.;
MPRINT(IMPORTMETA):  format 'CodeType'n $3.;
895         format 'CodeType'n $3.;
MPRINT(IMPORTMETA):  format 'Code'n BEST12.;
896         format 'Code'n BEST12.;
MPRINT(IMPORTMETA):  format 'Description'n $48.;
897         format 'Description'n $48.;
MPRINT(IMPORTMETA):  label 'CodeType'n = 'CodeType';
36                                       The WPS System      16:10 Monday, October 29, 2018     

898         label 'CodeType'n = 'CodeType';
MPRINT(IMPORTMETA):  label 'Code'n = 'Code';
899         label 'Code'n = 'Code';
MPRINT(IMPORTMETA):  label 'Description'n = 'Description';
900         label 'Description'n = 'Description';
901         input    'CodeType'n $
902           'Code'n
MPRINT(IMPORTMETA):  input 'CodeType'n $   'Code'n  'Description'n $   ;
903           'Description'n $
MPRINT(IMPORTMETA):  run;
904         ;
905         run;

NOTE: The file '/rpscan/u071439/data/JanetMetadata_SurveillanceMiscellaneous.csv' is:
      File Name=/rpscan/u071439/data/JanetMetadata_SurveillanceMiscellaneous.csv,
      Access Permissions=-rwxrwxr--, Number of Links=1,
      Owner Name=u071439, Group Name=devl,
      File Size=480, Last Modified=13:34:46 Oct 16 2018,
      Created=15:53:13 Oct 23 2018, Lrecl=32760, Recfm=V

NOTE: 13 records were read from file
      '/rpscan/u071439/data/JanetMetadata_SurveillanceMiscellaneous.csv'
      The minimum record length was 21
      The maximum record length was 48
NOTE: Data set "TEMP.SurvMiscellaneous" has 13 observation(s) and 3 variable(s)
NOTE: The data step took :
      real time : 0.068
      cpu time  : 0.001


MPRINT(IMPORTMETA):  FILENAME ##IMPORT CLEAR;
906       FILENAME ##IMPORT CLEAR;
MLOGIC(IMPORTMETA): Ending execution
907       *** Import the list of PROCGRP for Chemo Active for Surveillance;
908       %ImportMeta(JanetMetadata_SurveillanceChemoActive.csv,SurvChemoActive);
MLOGIC(IMPORTMETA): Beginning execution
MLOGIC(IMPORTMETA): Parameter INPUTDATA has value JanetMetadata_SurveillanceChemoActive.csv
MLOGIC(IMPORTMETA): Parameter SASOUTPUT has value SurvChemoActive
MLOGIC(IMPORTMETA): %IF condition &sasoutput.=SamplewClassification and &skipImport.=1  evaluate
                    d to FALSE
MPRINT(IMPORTMETA):  PROC IMPORT
                     datafile="/rpscan/u071439/data/JanetMetadata_SurveillanceChemoActive.csv"
                     out=temp.SurvChemoActive replace;
MPRINT(IMPORTMETA):  getnames=YES;
MPRINT(IMPORTMETA):  guessingrows=MAX;
MPRINT(IMPORTMETA):  run;
NOTE: Procedure IMPORT step took :
      real time : 0.036
      cpu time  : 0.000


MPRINT(IMPORTMETA):  data temp.SurvChemoActive;
909       data temp.SurvChemoActive;
37                                       The WPS System      16:10 Monday, October 29, 2018     

MPRINT(IMPORTMETA):  infile '/rpscan/u071439/data/JanetMetadata_SurveillanceChemoActive.csv'
                     delimiter=',' MISSOVER DSD firstobs=2 LRECL=32760;
910         infile '/rpscan/u071439/data/JanetMetadata_SurveillanceChemoActive.csv' delimiter=',
910     ! ' MISSOVER DSD firstobs=2 LRECL=32760;
MPRINT(IMPORTMETA):  informat 'ndc'n BEST32.;
911         informat 'ndc'n BEST32.;
MPRINT(IMPORTMETA):  informat 'therClassCode'n BEST32.;
912         informat 'therClassCode'n BEST32.;
MPRINT(IMPORTMETA):  informat 'Inttherclass'n BEST32.;
913         informat 'Inttherclass'n BEST32.;
MPRINT(IMPORTMETA):  informat 'therDesc'n $25.;
914         informat 'therDesc'n $25.;
MPRINT(IMPORTMETA):  informat 'gcrTitles'n $36.;
915         informat 'gcrTitles'n $36.;
MPRINT(IMPORTMETA):  informat 'genindDesc'n $32.;
916         informat 'genindDesc'n $32.;
MPRINT(IMPORTMETA):  informat 'roa'n $2.;
917         informat 'roa'n $2.;
MPRINT(IMPORTMETA):  informat 'cyle'n $5.;
918         informat 'cyle'n $5.;
MPRINT(IMPORTMETA):  informat 'Active'n $6.;
919         informat 'Active'n $6.;
MPRINT(IMPORTMETA):  format 'ndc'n BEST12.;
920         format 'ndc'n BEST12.;
MPRINT(IMPORTMETA):  format 'therClassCode'n BEST12.;
921         format 'therClassCode'n BEST12.;
MPRINT(IMPORTMETA):  format 'Inttherclass'n BEST12.;
922         format 'Inttherclass'n BEST12.;
MPRINT(IMPORTMETA):  format 'therDesc'n $25.;
923         format 'therDesc'n $25.;
MPRINT(IMPORTMETA):  format 'gcrTitles'n $36.;
924         format 'gcrTitles'n $36.;
MPRINT(IMPORTMETA):  format 'genindDesc'n $32.;
925         format 'genindDesc'n $32.;
MPRINT(IMPORTMETA):  format 'roa'n $2.;
926         format 'roa'n $2.;
MPRINT(IMPORTMETA):  format 'cyle'n $5.;
927         format 'cyle'n $5.;
MPRINT(IMPORTMETA):  format 'Active'n $6.;
928         format 'Active'n $6.;
MPRINT(IMPORTMETA):  label 'ndc'n = 'ndc';
929         label 'ndc'n = 'ndc';
MPRINT(IMPORTMETA):  label 'therClassCode'n = 'therClassCode';
930         label 'therClassCode'n = 'therClassCode';
MPRINT(IMPORTMETA):  label 'Inttherclass'n = 'Inttherclass';
931         label 'Inttherclass'n = 'Inttherclass';
MPRINT(IMPORTMETA):  label 'therDesc'n = 'therDesc';
932         label 'therDesc'n = 'therDesc';
MPRINT(IMPORTMETA):  label 'gcrTitles'n = 'gcrTitles';
933         label 'gcrTitles'n = 'gcrTitles';
MPRINT(IMPORTMETA):  label 'genindDesc'n = 'genindDesc';
934         label 'genindDesc'n = 'genindDesc';
MPRINT(IMPORTMETA):  label 'roa'n = 'roa';
38                                       The WPS System      16:10 Monday, October 29, 2018     

935         label 'roa'n = 'roa';
MPRINT(IMPORTMETA):  label 'cyle'n = 'cyle';
936         label 'cyle'n = 'cyle';
MPRINT(IMPORTMETA):  label 'Active'n = 'Active';
937         label 'Active'n = 'Active';
938         input    'ndc'n
939           'therClassCode'n
940           'Inttherclass'n
941           'therDesc'n $
942           'gcrTitles'n $
943           'genindDesc'n $
944           'roa'n $
945           'cyle'n $
MPRINT(IMPORTMETA):  input 'ndc'n  'therClassCode'n  'Inttherclass'n  'therDesc'n $  
                     'gcrTitles'n $   'genindDesc'n $   'roa'n $   'cyle'n $   'Active'n $   ;
946           'Active'n $
MPRINT(IMPORTMETA):  run;
947         ;
948         run;

NOTE: The file '/rpscan/u071439/data/JanetMetadata_SurveillanceChemoActive.csv' is:
      File Name=/rpscan/u071439/data/JanetMetadata_SurveillanceChemoActive.csv,
      Access Permissions=-rwxrwxr--, Number of Links=1,
      Owner Name=u071439, Group Name=devl,
      File Size=30227, Last Modified=13:34:46 Oct 16 2018,
      Created=15:53:14 Oct 23 2018, Lrecl=32760, Recfm=V

NOTE: 308 records were read from file
      '/rpscan/u071439/data/JanetMetadata_SurveillanceChemoActive.csv'
      The minimum record length was 82
      The maximum record length was 108
NOTE: Data set "TEMP.SurvChemoActive" has 308 observation(s) and 9 variable(s)
NOTE: The data step took :
      real time : 0.092
      cpu time  : 0.005


MPRINT(IMPORTMETA):  FILENAME ##IMPORT CLEAR;
949       FILENAME ##IMPORT CLEAR;
MLOGIC(IMPORTMETA): Ending execution
950       *** Import the list of PROCGRP for Chemo Chronic for Surveillance;
951       %ImportMeta(JanetMetadata_SurveillanceChemoChronic.csv,SurvChemoChronic);
MLOGIC(IMPORTMETA): Beginning execution
MLOGIC(IMPORTMETA): Parameter INPUTDATA has value JanetMetadata_SurveillanceChemoChronic.csv
MLOGIC(IMPORTMETA): Parameter SASOUTPUT has value SurvChemoChronic
MLOGIC(IMPORTMETA): %IF condition &sasoutput.=SamplewClassification and &skipImport.=1  evaluate
                    d to FALSE
MPRINT(IMPORTMETA):  PROC IMPORT
                     datafile="/rpscan/u071439/data/JanetMetadata_SurveillanceChemoChronic.csv"
                     out=temp.SurvChemoChronic replace;
MPRINT(IMPORTMETA):  getnames=YES;
MPRINT(IMPORTMETA):  guessingrows=MAX;
MPRINT(IMPORTMETA):  run;
39                                       The WPS System      16:10 Monday, October 29, 2018     

NOTE: Procedure IMPORT step took :
      real time : 0.021
      cpu time  : 0.001


MPRINT(IMPORTMETA):  data temp.SurvChemoChronic;
952       data temp.SurvChemoChronic;
MPRINT(IMPORTMETA):  infile '/rpscan/u071439/data/JanetMetadata_SurveillanceChemoChronic.csv'
                     delimiter=',' MISSOVER DSD firstobs=2 LRECL=32760;
953         infile '/rpscan/u071439/data/JanetMetadata_SurveillanceChemoChronic.csv' delimiter='
953     ! ,' MISSOVER DSD firstobs=2 LRECL=32760;
MPRINT(IMPORTMETA):  informat 'ndc'n BEST32.;
954         informat 'ndc'n BEST32.;
MPRINT(IMPORTMETA):  informat 'therClassCode'n BEST32.;
955         informat 'therClassCode'n BEST32.;
MPRINT(IMPORTMETA):  informat 'Inttherclass'n BEST32.;
956         informat 'Inttherclass'n BEST32.;
MPRINT(IMPORTMETA):  informat 'therDesc'n $25.;
957         informat 'therDesc'n $25.;
MPRINT(IMPORTMETA):  informat 'gcrTitles'n $49.;
958         informat 'gcrTitles'n $49.;
MPRINT(IMPORTMETA):  informat 'genindDesc'n $29.;
959         informat 'genindDesc'n $29.;
MPRINT(IMPORTMETA):  informat 'roa'n $2.;
960         informat 'roa'n $2.;
MPRINT(IMPORTMETA):  informat 'cyle'n $1.;
961         informat 'cyle'n $1.;
MPRINT(IMPORTMETA):  informat 'Active'n $1.;
962         informat 'Active'n $1.;
MPRINT(IMPORTMETA):  format 'ndc'n BEST12.;
963         format 'ndc'n BEST12.;
MPRINT(IMPORTMETA):  format 'therClassCode'n BEST12.;
964         format 'therClassCode'n BEST12.;
MPRINT(IMPORTMETA):  format 'Inttherclass'n BEST12.;
965         format 'Inttherclass'n BEST12.;
MPRINT(IMPORTMETA):  format 'therDesc'n $25.;
966         format 'therDesc'n $25.;
MPRINT(IMPORTMETA):  format 'gcrTitles'n $49.;
967         format 'gcrTitles'n $49.;
MPRINT(IMPORTMETA):  format 'genindDesc'n $29.;
968         format 'genindDesc'n $29.;
MPRINT(IMPORTMETA):  format 'roa'n $2.;
969         format 'roa'n $2.;
MPRINT(IMPORTMETA):  format 'cyle'n $1.;
970         format 'cyle'n $1.;
MPRINT(IMPORTMETA):  format 'Active'n $1.;
971         format 'Active'n $1.;
MPRINT(IMPORTMETA):  label 'ndc'n = 'ndc';
972         label 'ndc'n = 'ndc';
MPRINT(IMPORTMETA):  label 'therClassCode'n = 'therClassCode';
973         label 'therClassCode'n = 'therClassCode';
MPRINT(IMPORTMETA):  label 'Inttherclass'n = 'Inttherclass';
974         label 'Inttherclass'n = 'Inttherclass';
40                                       The WPS System      16:10 Monday, October 29, 2018     

MPRINT(IMPORTMETA):  label 'therDesc'n = 'therDesc';
975         label 'therDesc'n = 'therDesc';
MPRINT(IMPORTMETA):  label 'gcrTitles'n = 'gcrTitles';
976         label 'gcrTitles'n = 'gcrTitles';
MPRINT(IMPORTMETA):  label 'genindDesc'n = 'genindDesc';
977         label 'genindDesc'n = 'genindDesc';
MPRINT(IMPORTMETA):  label 'roa'n = 'roa';
978         label 'roa'n = 'roa';
MPRINT(IMPORTMETA):  label 'cyle'n = 'cyle';
979         label 'cyle'n = 'cyle';
MPRINT(IMPORTMETA):  label 'Active'n = 'Active';
980         label 'Active'n = 'Active';
981         input    'ndc'n
982           'therClassCode'n
983           'Inttherclass'n
984           'therDesc'n $
985           'gcrTitles'n $
986           'genindDesc'n $
987           'roa'n $
988           'cyle'n $
MPRINT(IMPORTMETA):  input 'ndc'n  'therClassCode'n  'Inttherclass'n  'therDesc'n $  
                     'gcrTitles'n $   'genindDesc'n $   'roa'n $   'cyle'n $   'Active'n $   ;
989           'Active'n $
MPRINT(IMPORTMETA):  run;
990         ;
991         run;

NOTE: The file '/rpscan/u071439/data/JanetMetadata_SurveillanceChemoChronic.csv' is:
      File Name=/rpscan/u071439/data/JanetMetadata_SurveillanceChemoChronic.csv,
      Access Permissions=-rwxrwxr--, Number of Links=1,
      Owner Name=u071439, Group Name=devl,
      File Size=46172, Last Modified=13:34:46 Oct 16 2018,
      Created=15:53:14 Oct 23 2018, Lrecl=32760, Recfm=V

NOTE: 546 records were read from file
      '/rpscan/u071439/data/JanetMetadata_SurveillanceChemoChronic.csv'
      The minimum record length was 71
      The maximum record length was 106
NOTE: Data set "TEMP.SurvChemoChronic" has 546 observation(s) and 9 variable(s)
NOTE: The data step took :
      real time : 0.063
      cpu time  : 0.006


MPRINT(IMPORTMETA):  FILENAME ##IMPORT CLEAR;
992       FILENAME ##IMPORT CLEAR;
MLOGIC(IMPORTMETA): Ending execution
993       
994       
995       *** Modified;
996       *** convert NDCNUM to character for table;
997       data temp.SurvChemoActive(drop=ndc_old);
998       set temp.SurvChemoActive(rename=(ndc=ndc_old));
41                                       The WPS System      16:10 Monday, October 29, 2018     

999       ndc=put(ndc_old,z11.);
1000      run;

NOTE: 308 observations were read from "TEMP.SurvChemoActive"
NOTE: Data set "TEMP.SurvChemoActive" has 308 observation(s) and 9 variable(s)
NOTE: The data step took :
      real time : 0.067
      cpu time  : 0.002


1001      
1002      *** Modified;
1003      *** convert NDCNUM to character for table;
1004      data temp.SurvChemoChronic(drop=ndc_old);
1005      set temp.SurvChemoChronic(rename=(ndc=ndc_old));
1006      ndc=put(ndc_old,z11.);
1007      run;

NOTE: 546 observations were read from "TEMP.SurvChemoChronic"
NOTE: Data set "TEMP.SurvChemoChronic" has 546 observation(s) and 9 variable(s)
NOTE: The data step took :
      real time : 0.037
      cpu time  : 0.002


1008      
1009      
1010      *** Import the list of DxCat for Rebalance, new conditions;
1011      %ImportMeta(JanetMetadata_RebalanceNewDxCat.csv,RebalanceNewDxCat);
MLOGIC(IMPORTMETA): Beginning execution
MLOGIC(IMPORTMETA): Parameter INPUTDATA has value JanetMetadata_RebalanceNewDxCat.csv
MLOGIC(IMPORTMETA): Parameter SASOUTPUT has value RebalanceNewDxCat
MLOGIC(IMPORTMETA): %IF condition &sasoutput.=SamplewClassification and &skipImport.=1  evaluate
                    d to FALSE
MPRINT(IMPORTMETA):  PROC IMPORT
                     datafile="/rpscan/u071439/data/JanetMetadata_RebalanceNewDxCat.csv"
                     out=temp.RebalanceNewDxCat replace;
MPRINT(IMPORTMETA):  getnames=YES;
MPRINT(IMPORTMETA):  guessingrows=MAX;
MPRINT(IMPORTMETA):  run;
NOTE: Procedure IMPORT step took :
      real time : 0.002
      cpu time  : 0.000


MPRINT(IMPORTMETA):  data temp.RebalanceNewDxCat;
1012      data temp.RebalanceNewDxCat;
MPRINT(IMPORTMETA):  infile '/rpscan/u071439/data/JanetMetadata_RebalanceNewDxCat.csv'
                     delimiter=',' MISSOVER DSD firstobs=2 LRECL=32760;
1013        infile '/rpscan/u071439/data/JanetMetadata_RebalanceNewDxCat.csv' delimiter=',' MISS
1013    ! OVER DSD firstobs=2 LRECL=32760;
MPRINT(IMPORTMETA):  informat 'DxCat'n $5.;
1014        informat 'DxCat'n $5.;
42                                       The WPS System      16:10 Monday, October 29, 2018     

MPRINT(IMPORTMETA):  informat 'Stage'n BEST32.;
1015        informat 'Stage'n BEST32.;
MPRINT(IMPORTMETA):  informat 'StageHistory'n BEST32.;
1016        informat 'StageHistory'n BEST32.;
MPRINT(IMPORTMETA):  format 'DxCat'n $5.;
1017        format 'DxCat'n $5.;
MPRINT(IMPORTMETA):  format 'Stage'n BEST12.;
1018        format 'Stage'n BEST12.;
MPRINT(IMPORTMETA):  format 'StageHistory'n BEST12.;
1019        format 'StageHistory'n BEST12.;
MPRINT(IMPORTMETA):  label 'DxCat'n = 'DxCat';
1020        label 'DxCat'n = 'DxCat';
MPRINT(IMPORTMETA):  label 'Stage'n = 'Stage';
1021        label 'Stage'n = 'Stage';
MPRINT(IMPORTMETA):  label 'StageHistory'n = 'StageHistory';
1022        label 'StageHistory'n = 'StageHistory';
1023        input    'DxCat'n $
MPRINT(IMPORTMETA):  input 'DxCat'n $   'Stage'n  'StageHistory'n  ;
1024          'Stage'n
1025          'StageHistory'n
MPRINT(IMPORTMETA):  run;
1026        ;
1027        run;

NOTE: The file '/rpscan/u071439/data/JanetMetadata_RebalanceNewDxCat.csv' is:
      File Name=/rpscan/u071439/data/JanetMetadata_RebalanceNewDxCat.csv,
      Access Permissions=-rwxrwxr--, Number of Links=1,
      Owner Name=u071439, Group Name=devl,
      File Size=1061, Last Modified=13:34:46 Oct 16 2018,
      Created=15:53:15 Oct 23 2018, Lrecl=32760, Recfm=V

NOTE: 93 records were read from file '/rpscan/u071439/data/JanetMetadata_RebalanceNewDxCat.csv'
      The minimum record length was 9
      The maximum record length was 15
NOTE: Data set "TEMP.RebalanceNewDxCat" has 93 observation(s) and 3 variable(s)
NOTE: The data step took :
      real time : 0.085
      cpu time  : 0.002


MPRINT(IMPORTMETA):  FILENAME ##IMPORT CLEAR;
1028      FILENAME ##IMPORT CLEAR;
MLOGIC(IMPORTMETA): Ending execution
1029      *** Import the list of DxCat for Rebalance, new conditions wo drugs in the prior 90 da
1029    ! ys;
1030      %ImportMeta(JanetMetadata_RebalanceNewDxCatwoRx.csv,RebalanceNewDxCatwoRx);
MLOGIC(IMPORTMETA): Beginning execution
MLOGIC(IMPORTMETA): Parameter INPUTDATA has value JanetMetadata_RebalanceNewDxCatwoRx.csv
MLOGIC(IMPORTMETA): Parameter SASOUTPUT has value RebalanceNewDxCatwoRx
MLOGIC(IMPORTMETA): %IF condition &sasoutput.=SamplewClassification and &skipImport.=1  evaluate
                    d to FALSE
MPRINT(IMPORTMETA):  PROC IMPORT
                     datafile="/rpscan/u071439/data/JanetMetadata_RebalanceNewDxCatwoRx.csv"
43                                       The WPS System      16:10 Monday, October 29, 2018     

                     out=temp.RebalanceNewDxCatwoRx replace;
MPRINT(IMPORTMETA):  getnames=YES;
MPRINT(IMPORTMETA):  guessingrows=MAX;
MPRINT(IMPORTMETA):  run;
NOTE: Procedure IMPORT step took :
      real time : 0.001
      cpu time  : 0.000


MPRINT(IMPORTMETA):  data temp.RebalanceNewDxCatwoRx;
1031      data temp.RebalanceNewDxCatwoRx;
MPRINT(IMPORTMETA):  infile '/rpscan/u071439/data/JanetMetadata_RebalanceNewDxCatwoRx.csv'
                     delimiter=',' MISSOVER DSD firstobs=2 LRECL=32760;
1032        infile '/rpscan/u071439/data/JanetMetadata_RebalanceNewDxCatwoRx.csv' delimiter=',' 
1032    ! MISSOVER DSD firstobs=2 LRECL=32760;
MPRINT(IMPORTMETA):  informat 'DxCat'n $5.;
1033        informat 'DxCat'n $5.;
MPRINT(IMPORTMETA):  informat 'TherCls'n BEST32.;
1034        informat 'TherCls'n BEST32.;
MPRINT(IMPORTMETA):  format 'DxCat'n $5.;
1035        format 'DxCat'n $5.;
MPRINT(IMPORTMETA):  format 'TherCls'n BEST12.;
1036        format 'TherCls'n BEST12.;
MPRINT(IMPORTMETA):  label 'DxCat'n = 'DxCat';
1037        label 'DxCat'n = 'DxCat';
MPRINT(IMPORTMETA):  label 'TherCls'n = 'TherCls';
1038        label 'TherCls'n = 'TherCls';
MPRINT(IMPORTMETA):  input 'DxCat'n $   'TherCls'n  ;
1039        input    'DxCat'n $
1040          'TherCls'n
MPRINT(IMPORTMETA):  run;
1041        ;
1042        run;

NOTE: The file '/rpscan/u071439/data/JanetMetadata_RebalanceNewDxCatwoRx.csv' is:
      File Name=/rpscan/u071439/data/JanetMetadata_RebalanceNewDxCatwoRx.csv,
      Access Permissions=-rwxrwxr--, Number of Links=1,
      Owner Name=u071439, Group Name=devl,
      File Size=154, Last Modified=13:34:46 Oct 16 2018,
      Created=15:53:15 Oct 23 2018, Lrecl=32760, Recfm=V

NOTE: 13 records were read from file
      '/rpscan/u071439/data/JanetMetadata_RebalanceNewDxCatwoRx.csv'
      The minimum record length was 8
      The maximum record length was 9
NOTE: Data set "TEMP.RebalanceNewDxCatwoRx" has 13 observation(s) and 2 variable(s)
NOTE: The data step took :
      real time : 0.048
      cpu time  : 0.002


MPRINT(IMPORTMETA):  FILENAME ##IMPORT CLEAR;
1043      FILENAME ##IMPORT CLEAR;
44                                       The WPS System      16:10 Monday, October 29, 2018     

MLOGIC(IMPORTMETA): Ending execution
1044      
1045      
1046      *** Modified;
1047      *** Import the list of DxCat for Rebalance, new ICD9;
1048      *** %ImportMeta(JanetMetadata_RebalanceNewDx.csv,RebalanceNewDx);
1049      data  temp.RebalanceNewDx;
1050      infile '/rpscan/u0086308/POPSTRATIFICATION/data/JanetMetadata_RebalanceNewDx.csv' deli
1050    ! miter=',' MISSOVER DSD firstobs=2 LRECL=32760;
1051      informat 'ICD'n $4.;
1052      informat 'Description'n $13.;
1053      format 'ICD'n $4.;
1054      format 'Description'n $13.;
1055      label 'ICD'n = 'ICD';
1056      label 'Description'n = 'Description';
1057      input    'ICD'n $
1058      'Description'n $
1059      ;
1060      run;

NOTE: The file '/rpscan/u0086308/POPSTRATIFICATION/data/JanetMetadata_RebalanceNewDx.csv' is:
      File Name=/rpscan/u0086308/POPSTRATIFICATION/data/JanetMetadata_RebalanceNewDx.csv,
      Access Permissions=-rwxr-xr-x, Number of Links=1,
      Owner Name=u0086308, Group Name=devl,
      File Size=449, Last Modified=16:28:16 Mar 31 2017,
      Created=16:26:12 Oct 15 2018, Lrecl=32760, Recfm=V

NOTE: 18 records were read from file
      '/rpscan/u0086308/POPSTRATIFICATION/data/JanetMetadata_RebalanceNewDx.csv'
      The minimum record length was 22
      The maximum record length was 22
NOTE: Data set "TEMP.RebalanceNewDx" has 18 observation(s) and 2 variable(s)
NOTE: The data step took :
      real time : 0.052
      cpu time  : 0.002


1061      
1062      
1063      *** Import the list of DxCat for Rebalance, new DRG;
1064      %ImportMeta(JanetMetadata_RebalanceNewDRG.csv,RebalanceNewDRG);
MLOGIC(IMPORTMETA): Beginning execution
MLOGIC(IMPORTMETA): Parameter INPUTDATA has value JanetMetadata_RebalanceNewDRG.csv
MLOGIC(IMPORTMETA): Parameter SASOUTPUT has value RebalanceNewDRG
MLOGIC(IMPORTMETA): %IF condition &sasoutput.=SamplewClassification and &skipImport.=1  evaluate
                    d to FALSE
MPRINT(IMPORTMETA):  PROC IMPORT
                     datafile="/rpscan/u071439/data/JanetMetadata_RebalanceNewDRG.csv"
                     out=temp.RebalanceNewDRG replace;
MPRINT(IMPORTMETA):  getnames=YES;
MPRINT(IMPORTMETA):  guessingrows=MAX;
MPRINT(IMPORTMETA):  run;
NOTE: Procedure IMPORT step took :
45                                       The WPS System      16:10 Monday, October 29, 2018     

      real time : 0.004
      cpu time  : 0.000


MPRINT(IMPORTMETA):  data temp.RebalanceNewDRG;
1065      data temp.RebalanceNewDRG;
MPRINT(IMPORTMETA):  infile '/rpscan/u071439/data/JanetMetadata_RebalanceNewDRG.csv'
                     delimiter=',' MISSOVER DSD firstobs=2 LRECL=32760;
1066        infile '/rpscan/u071439/data/JanetMetadata_RebalanceNewDRG.csv' delimiter=',' MISSOV
1066    ! ER DSD firstobs=2 LRECL=32760;
MPRINT(IMPORTMETA):  informat 'DRG'n BEST32.;
1067        informat 'DRG'n BEST32.;
MPRINT(IMPORTMETA):  informat 'Description'n $24.;
1068        informat 'Description'n $24.;
MPRINT(IMPORTMETA):  format 'DRG'n BEST12.;
1069        format 'DRG'n BEST12.;
MPRINT(IMPORTMETA):  format 'Description'n $24.;
1070        format 'Description'n $24.;
MPRINT(IMPORTMETA):  label 'DRG'n = 'DRG';
1071        label 'DRG'n = 'DRG';
MPRINT(IMPORTMETA):  label 'Description'n = 'Description';
1072        label 'Description'n = 'Description';
1073        input    'DRG'n
MPRINT(IMPORTMETA):  input 'DRG'n  'Description'n $   ;
1074          'Description'n $
MPRINT(IMPORTMETA):  run;
1075        ;
1076        run;

NOTE: The file '/rpscan/u071439/data/JanetMetadata_RebalanceNewDRG.csv' is:
      File Name=/rpscan/u071439/data/JanetMetadata_RebalanceNewDRG.csv,
      Access Permissions=-rwxrwxr--, Number of Links=1,
      Owner Name=u071439, Group Name=devl,
      File Size=213, Last Modified=13:34:46 Oct 16 2018,
      Created=15:53:15 Oct 23 2018, Lrecl=32760, Recfm=V

NOTE: 9 records were read from file '/rpscan/u071439/data/JanetMetadata_RebalanceNewDRG.csv'
      The minimum record length was 14
      The maximum record length was 32
NOTE: Data set "TEMP.RebalanceNewDRG" has 9 observation(s) and 2 variable(s)
NOTE: The data step took :
      real time : 0.099
      cpu time  : 0.002


MPRINT(IMPORTMETA):  FILENAME ##IMPORT CLEAR;
1077      FILENAME ##IMPORT CLEAR;
MLOGIC(IMPORTMETA): Ending execution
1078      
1079      *** labels for all categories, the ranking is important!!!;
1080      proc format;
1081      value categories
1082      10='Crisis Management'
46                                       The WPS System      16:10 Monday, October 29, 2018     

1083      9='Surveillance'
1084      8='Rebalancing'
1085      7='Recovery Guidance'
1086      6='Monitoring'
1087      5='Coordination'
1088      4='Treatment Navigation'
1089      3='Support'
1090      2='Prevention'
1091      1='Engagement'
1092      ;
NOTE: Format categories output
1093      
1094      value RuleConfidence
1095      1= 0.933
1096      2= 0.6
1097      3= 0.667
1098      4= 0.865
1099      5= 0.667
1100      6= 0.667
1101      7= 0.851
1102      8= 0.727
1103      9= 0.75
1104      10= 0.765
1105      11= 0.667
1106      12= 0.909
1107      13= 0.667
1108      ;
NOTE: Format RuleConfidence output
1109      
1110      *** sort the sample by ENROLID, it is needed for the last merge at the end;
NOTE: Procedure format step took :
      real time : 0.055
      cpu time  : 0.001


1111      proc sort data=temp.SamplewClassification;
1112      by enrolid;
1113      run;
NOTE: 1798 observations were read from "TEMP.SamplewClassification"
NOTE: Data set "TEMP.SamplewClassification" has 1798 observation(s) and 2 variable(s)
NOTE: Procedure sort step took :
      real time : 0.115
      cpu time  : 0.007


1114      
1115      *** convert NDCNUM to character;
1116      data temp.ChronicRx(drop=ndcnum_old);
1117      set temp.ChronicRx(rename=(ndcnum=ndcnum_old));
1118      NDCNUM=put(ndcnum_old,z11.);
1119      run;

NOTE: 58539 observations were read from "TEMP.ChronicRx"
47                                       The WPS System      16:10 Monday, October 29, 2018     

NOTE: Data set "TEMP.ChronicRx" has 58539 observation(s) and 4 variable(s)
NOTE: The data step took :
      real time : 0.143
      cpu time  : 0.038


1120      
1121      *** creating a format for Acute/Chronic;
1122      data trash(keep=start label fmtname);
1123      set temp.GeneralAssignments;
1124      start=DxCat;
1125      label=Category;
1126      fmtname='$DxCatAssign';
1127      run;

NOTE: 565 observations were read from "TEMP.GeneralAssignments"
NOTE: Data set "WORK.trash" has 565 observation(s) and 3 variable(s)
NOTE: The data step took :
      real time : 0.037
      cpu time  : 0.001


1128      proc format cntlin=trash; run;
NOTE: Format $DxCatAssign output
NOTE: 565 observations were read from "WORK.trash"
NOTE: Procedure format step took :
      real time : 0.039
      cpu time  : 0.002


1129      
1130      *** creating a format for Significant DxCat;
1131      data trash(keep=start label fmtname);
1132      set temp.SignificantConditions;
1133      start=DxCat;
1134      label=Significance;
1135      fmtname='$DxCatHigh';
1136      run;

NOTE: 296 observations were read from "TEMP.SignificantConditions"
NOTE: Data set "WORK.trash" has 296 observation(s) and 3 variable(s)
NOTE: The data step took :
      real time : 0.047
      cpu time  : 0.001


1137      proc format cntlin=trash; run;
NOTE: Format $DxCatHigh output
NOTE: 296 observations were read from "WORK.trash"
NOTE: Procedure format step took :
      real time : 0.031
      cpu time  : 0.002

48                                       The WPS System      16:10 Monday, October 29, 2018     


1138      
1139      *** creating a format for Body Systems;
1140      data trash(keep=start label fmtname hlo);
1141      set temp.BodySystem end=end;
1142      start=DxCat;
1143      label=Body;
1144      fmtname='$DxCatBody';
1145      if end then do;
1146      hlo='O';                            /* for DxCats that are not in the map from Janet, 
1146    ! just map them to '99'-Other */
1147      label='99';
1148      end;
1149      run;

NOTE: Character values have been converted to numeric values at the places given by:
      (Line):(Column)
      1147:7   
NOTE: 565 observations were read from "TEMP.BodySystem"
NOTE: Data set "WORK.trash" has 565 observation(s) and 4 variable(s)
NOTE: The data step took :
      real time : 0.067
      cpu time  : 0.002


1150      proc format cntlin=trash; run;
NOTE: Format $DxCatBody output
NOTE: 565 observations were read from "WORK.trash"
NOTE: Procedure format step took :
      real time : 0.046
      cpu time  : 0.002


1151      
1152      *** creating a format for list of DxCat (based on Dx conditions) for Surveillance - Ac
1152    ! tive Cancer definition;
1153      data trash(keep=start label fmtname);
1154      set temp.SurvGeneralActiveCancerDxCat end=end;
1155      where Type='Dx';
1156      start=DxCat;
1157      label='Y';
1158      fmtname='$SurvActiveCancerDxcat';
1159      run;

NOTE: 76 observations were read from "TEMP.SurvGeneralActiveCancerDxCat"
NOTE: Data set "WORK.trash" has 76 observation(s) and 3 variable(s)
NOTE: The data step took :
      real time : 0.073
      cpu time  : 0.002


1160      proc format cntlin=trash; run;
NOTE: Format $SurvActiveCancerDxcat output
49                                       The WPS System      16:10 Monday, October 29, 2018     

NOTE: 76 observations were read from "WORK.trash"
NOTE: Procedure format step took :
      real time : 0.049
      cpu time  : 0.000


1161      
1162      *** creating a format for list of DxCat (based on Px conditions) for Surveillance - Ac
1162    ! tive Cancer definition;
1163      data trash(keep=start label fmtname);
1164      set temp.SurvGeneralActiveCancerDxCat end=end;
1165      where Type='Px';
1166      start=DxCat;
1167      label='Y';
1168      fmtname='$SurvActiveCancerPxDxcat';
1169      run;

NOTE: 1 observations were read from "TEMP.SurvGeneralActiveCancerDxCat"
NOTE: Data set "WORK.trash" has 1 observation(s) and 3 variable(s)
NOTE: The data step took :
      real time : 0.058
      cpu time  : 0.001


1170      proc format cntlin=trash; run;
NOTE: Format $SurvActiveCancerPxDxcat output
NOTE: 1 observations were read from "WORK.trash"
NOTE: Procedure format step took :
      real time : 0.017
      cpu time  : 0.000


1171      
1172      *** creating a format for list of ProcGRP (based on Px conditions) for Surveillance - 
1172    ! Active Cancer definition;
1173      data trash_1(keep=start label fmtname);
1174      set temp.SurvGeneralActiveCancerPROCGRP end=end;
1175      start=PROCGRP;
1176      label='Y';
1177      fmtname='SurvActiveCancerPROCGRP';
1178      run;

NOTE: 25 observations were read from "TEMP.SurvGeneralActiveCancerPROCGRP"
NOTE: Data set "WORK.trash_1" has 25 observation(s) and 3 variable(s)
NOTE: The data step took :
      real time : 0.031
      cpu time  : 0.001


1179      proc format cntlin=trash_1; run;
NOTE: Format SurvActiveCancerPROCGRP output
NOTE: 25 observations were read from "WORK.trash_1"
NOTE: Procedure format step took :
50                                       The WPS System      16:10 Monday, October 29, 2018     

      real time : 0.067
      cpu time  : 0.001


1180      
1181      ********************************************************************************;
1182      *%include '/rpscan/u071439/script/PopClassModel_BeforeAE_YL.sas';
1183      
1184      ********** run AE for DS using above configuration file-AE not working on nike;
1185      ****************x "&AEpath./AnalyticsEngine.sh &AEpath./Configfile.properties";
1186      
1187      ******************************************************************************;
1188      *%include '/rpscan/u071439/script/PopClassModel_AfterAE_YL.sas';
1189      
1190      
1191      
1192      
1193      
1194      
1195      
1196      
1197      
1198      
1199      /* import AE back into the data */
1200      data temp.SampleIPOPwDS1;
1201      	infile "&AEoutpath./&username._DISEASESTAGING6.34_&version._Dsoutput.csv"
1202      	delimiter = ','
1203      	MISSOVER
1204      	DSD
1205      	lrecl=32767
1206      	firstobs=2;
1207      input
1208                        enrolid
1209                        fac_prof :$1.
1210                        eventid :$16.
1211                        age
1212                        sex :$1.
1213                        proc1 :$7.
1214                        icd_flag :$1.
1215                        dx1 :$7.
1216                        dx2 :$7.
1217                        dx3 :$7.
1218                        dx4 :$7.
1219                        rec_type :$1.
1220                        std_place :$1.
1221      				  admtyp :$1.
1222      				  svcscat :$5.
1223      				  svcdate :mmddyy10.
1224                        dxcat1 :$5.
1225                        dxcat2 :$5.
1226                        dxcat3 :$5.
1227                        dxcat4 :$5.
1228                        dxstage1
51                                       The WPS System      16:10 Monday, October 29, 2018     

1229                        dxstage2
1230                        dxstage3
1231                        dxstage4
1232      ;
1233      format svcdate mmddyy10.;
1234      run;

NOTE: The file
      '/rpscan/u071439/AEout/31DEC2015Enrolids2000_10292018/u071439_DISEASESTAGING6.34_31DEC2015
      Enrolids2000_10292018_Dsoutput.csv' is:
      File
      Name=/rpscan/u071439/AEout/31DEC2015Enrolids2000_10292018/u071439_DISEASESTAGING6.34_31DEC
      2015Enrolids2000_10292018_Dsoutput.csv,
      Access Permissions=-rw-r--r--, Number of Links=1,
      Owner Name=u071439, Group Name=devl,
      File Size=3100854, Last Modified=11:25:24 Oct 29 2018,
      Created=11:25:24 Oct 29 2018, Lrecl=32767, Recfm=V

NOTE: 34163 records were read from file
      '/rpscan/u071439/AEout/31DEC2015Enrolids2000_10292018/u071439_DISEASESTAGING6.34_31DEC2015
      Enrolids2000_10292018_Dsoutput.csv'
      The minimum record length was 68
      The maximum record length was 126
NOTE: Data set "TEMP.SampleIPOPwDS1" has 34163 observation(s) and 24 variable(s)
NOTE: The data step took :
      real time : 0.529
      cpu time  : 0.164


1235      
1236      *** flag the patients with MHSA and maternity history;
1237      proc sql;
1238      create view trash501 as select
1239      	enrolid,
1240      	max(
1241      				(admtyp='4'	 				or
1242      				dxcat1 in (&SvcCatMHSA.)	or
1243      				dxcat2 in (&SvcCatMHSA.)	or
1244      				dxcat3 in (&SvcCatMHSA.)	or
1245      				dxcat4 in (&SvcCatMHSA.))
1246      		)												as flag12mMHSA,
1247      	max(		
1248      				(svcdate > &StartDate.-90)		and
1249      				(dxcat1 in (&SvcCatGYN.)	or
1250      				 dxcat2 in (&SvcCatGYN.)	or
1251      				 dxcat3 in (&SvcCatGYN.)	or
1252      				 dxcat4 in (&SvcCatGYN.))
1253      		)												as flag3mGYN
1254      from
1255      	temp.SampleIPOPwDS1
1256      group by
1257      	enrolid;
NOTE: View WORK.trash501 successfully created
52                                       The WPS System      16:10 Monday, October 29, 2018     

1258      
1259      *** create the flags for all the DxCats that satisfy the conditions for Acute/Chrnic/S
1259    ! tage>3/HighSignificance;
NOTE: Procedure sql step took :
      real time : 0.022
      cpu time  : 0.001


1260      data trash502(keep=
1261      				enrolid
1262      				svcdate flag3mStage3
1263      				dxcat flag3mAcuteStage3 flag3mChronicStage3 flag6mChronicStage3 flag3mAcuteSign fl
1263    ! ag3mChronicSign flag6mChronicSign flag12mChronicSign flag3mAcute flag6mAcute flag3mChr
1263    ! onic flag12mChronic
1264      				body flag3mBody flag3mBodySign
1265      				flagNew3mChronicSign flagNew12mChronicSign);
1266      set temp.SampleIPOPwDS1;
1267      length dxcat $5. body $2.;
1268      array dxarray dxcat1-dxcat4;
1269      array dxstage dxstage1-dxstage4;
1270      	do i=1 to 4;
1271      		dxcat=' '; body=' ';
1272      /* flags for days with Stage3 */
1273      		if svcdate > &StartDate.-90  and dxstage[i] ge 3 and
1274      			^(rec_type='O' and (substr(svcscat,4,2) in (&SvcCatExclusionList.) or proc1 in (&Pr
1274    ! ocExclusionList.)))
1275      		then do; dxcat=dxarray[i]; flag3mStage3=1;   end;
1276      /* flags for DxCat counts */
1277      		if svcdate > &StartDate.-90  and put(dxarray[i],$DxCatAssign.)='Acute' and dxstage[i
1277    ! ] ge 3 and
1278      			^(rec_type='O' and (substr(svcscat,4,2) in (&SvcCatExclusionList.) or proc1 in (&Pr
1278    ! ocExclusionList.)))
1279      		then do; dxcat=dxarray[i]; flag3mAcuteStage3=1; end;
1280      		if svcdate > &StartDate.-90  and put(dxarray[i],$DxCatAssign.)='Chronic' and dxstage
1280    ! [i] ge 3 and
1281      		   	^(rec_type='O' and (substr(svcscat,4,2) in (&SvcCatExclusionList.) or proc1 in (
1281    ! &ProcExclusionList.)))
1282      		then do; dxcat=dxarray[i]; flag3mChronicStage3=1; end;
1283      		if svcdate > &StartDate.-180 and put(dxarray[i],$DxCatAssign.)='Chronic' and dxstage
1283    ! [i] ge 3 and
1284      		   	^(rec_type='O' and (substr(svcscat,4,2) in (&SvcCatExclusionList.) or proc1 in (
1284    ! &ProcExclusionList.)))
1285      		then do; dxcat=dxarray[i]; flag6mChronicStage3=1; end;
1286      		if svcdate > &StartDate.-90  and put(dxarray[i],$DxCatAssign.)='Acute'   and put(dxa
1286    ! rray[i],$DxCatHigh.)='High' and
1287      			^(rec_type='O' and (substr(svcscat,4,2) in (&SvcCatExclusionList.) or proc1 in (&Pr
1287    ! ocExclusionList.)))
1288      		then do; dxcat=dxarray[i]; flag3mAcuteSign=1;   end;
1289      		if svcdate > &StartDate.-90  and put(dxarray[i],$DxCatAssign.)='Chronic' and put(dxa
1289    ! rray[i],$DxCatHigh.)='High' and
1290      			^(rec_type='O' and (substr(svcscat,4,2) in (&SvcCatExclusionList.) or proc1 in (&Pr
1290    ! ocExclusionList.)))
1291      		then do; dxcat=dxarray[i]; flag3mChronicSign=1; end;
53                                       The WPS System      16:10 Monday, October 29, 2018     

1292      		if svcdate > &StartDate.-180 and put(dxarray[i],$DxCatAssign.)='Chronic' and put(dxa
1292    ! rray[i],$DxCatHigh.)='High' and
1293      			^(rec_type='O' and (substr(svcscat,4,2) in (&SvcCatExclusionList.) or proc1 in (&Pr
1293    ! ocExclusionList.)))
1294      		then do; dxcat=dxarray[i]; flag6mChronicSign=1; end;
1295      		if svcdate > &StartDate.-366 and put(dxarray[i],$DxCatAssign.)='Chronic' and put(dxa
1295    ! rray[i],$DxCatHigh.)='High' and
1296      			^(rec_type='O' and (substr(svcscat,4,2) in (&SvcCatExclusionList.) or proc1 in (&Pr
1296    ! ocExclusionList.)))
1297      		then do; dxcat=dxarray[i]; flag12mChronicSign=1; end;
1298      		if svcdate > &StartDate.-90  and put(dxarray[i],$DxCatAssign.)='Acute' and
1299      			^(rec_type='O' and (substr(svcscat,4,2) in (&SvcCatExclusionList.) or proc1 in (&Pr
1299    ! ocExclusionList.)))
1300      		then do; dxcat=dxarray[i]; flag3mAcute=1;   end;
1301      		if svcdate > &StartDate.-180 and put(dxarray[i],$DxCatAssign.)='Acute'  and
1302      			^(rec_type='O' and (substr(svcscat,4,2) in (&SvcCatExclusionList.) or proc1 in (&Pr
1302    ! ocExclusionList.)))
1303      		then do; dxcat=dxarray[i]; flag6mAcute=1;   end;
1304      		if svcdate > &StartDate.-90  and put(dxarray[i],$DxCatAssign.)='Chronic' and
1305      			^(rec_type='O' and (substr(svcscat,4,2) in (&SvcCatExclusionList.) or proc1 in (&Pr
1305    ! ocExclusionList.)))
1306      		then do; dxcat=dxarray[i]; flag3mChronic=1; end;
1307      		if svcdate > &StartDate.-366 and put(dxarray[i],$DxCatAssign.)='Chronic' and
1308      			^(rec_type='O' and (substr(svcscat,4,2) in (&SvcCatExclusionList.) or proc1 in (&Pr
1308    ! ocExclusionList.)))
1309      		then do; dxcat=dxarray[i]; flag12mChronic=1; end;
1310      /* flags for body counts */
1311      		if svcdate > &StartDate.-90 and missing(dxarray[i])=0 				then do; body=put(dxarray[
1311    ! i],$DxCatBody.); flag3mBody=1; dxcat=dxarray[i]; end;
1312      		if svcdate > &StartDate.-90 and put(dxarray[i],$DxCatHigh.)='High' 	then do; body=pu
1312    ! t(dxarray[i],$DxCatBody.); flag3mBodySign=1; end;
1313      /* flags for new chronic significant condition */
1314      		if svcdate > &StartDate.-90  and put(dxarray[i],$DxCatAssign.)='Chronic' and put(dxa
1314    ! rray[i],$DxCatHigh.)='High' and
1315      		   ^(rec_type='O' and (substr(svcscat,4,2) in (&SvcCatExclusionList.) or proc1 in (&
1315    ! ProcExclusionList.)))
1316      		then do; dxcat=dxarray[i]; flagNew3mChronicSign=1; end;
1317      		if &StartDate.-366 < svcdate <= &StartDate.-90  and put(dxarray[i],$DxCatAssign.)='C
1317    ! hronic' and put(dxarray[i],$DxCatHigh.)='High' and
1318      		   ^(rec_type='O' and (substr(svcscat,4,2) in (&SvcCatExclusionList.) or proc1 in (&
1318    ! ProcExclusionList.)))
1319      		then do; dxcat=dxarray[i]; flagNew12mChronicSign=1; end;
1320      		if missing(dxcat)=0 or missing(body)=0 then output;
1321      	end;
1322      run;

NOTE: 34163 observations were read from "TEMP.SampleIPOPwDS1"
NOTE: Data set "WORK.trash502" has 14294 observation(s) and 20 variable(s)
NOTE: The data step took :
      real time : 1.168
      cpu time  : 0.421


54                                       The WPS System      16:10 Monday, October 29, 2018     

1323      
1324      *** count the unique DxCats for different combinations of Acute/Chronic/Sign/3m/6m/eac
1324    ! h, it's using the flags defined in the previous step;
1325      proc sql;
1326      create view trash503 as select
1327      	enrolid,
1328      	count(distinct dxcat) as Count3mAcuteStage3
1329      from trash502
1330      where flag3mAcuteStage3=1
1331      group by enrolid;
NOTE: View WORK.trash503 successfully created
1332      
1333      create view trash504 as select
1334      	enrolid,
1335      	count(distinct dxcat) as Count3mChronicStage3
1336      from trash502
1337      where flag3mChronicStage3=1
1338      group by enrolid;
NOTE: View WORK.trash504 successfully created
1339      
1340      create view trash505 as select
1341      	enrolid,
1342      	count(distinct dxcat) as Count6mChronicStage3
1343      from trash502
1344      where flag6mChronicStage3=1
1345      group by enrolid;
NOTE: View WORK.trash505 successfully created
1346      
1347      create view trash506 as select
1348      	enrolid,
1349      	count(distinct dxcat) as Count3mAcuteSign
1350      from trash502
1351      where flag3mAcuteSign=1
1352      group by enrolid;
NOTE: View WORK.trash506 successfully created
1353      
1354      create view trash507 as select
1355      	enrolid,
1356      	count(distinct dxcat) as Count3mChronicSign
1357      from trash502
1358      where flag3mChronicSign=1
1359      group by enrolid;
NOTE: View WORK.trash507 successfully created
1360      
1361      create view trash508 as select
1362      	enrolid,
1363      	count(distinct dxcat) as Count6mChronicSign
1364      from trash502
1365      where flag6mChronicSign=1
1366      group by enrolid;
NOTE: View WORK.trash508 successfully created
1367      
1368      create view trash508_1 as select
55                                       The WPS System      16:10 Monday, October 29, 2018     

1369      	enrolid,
1370      	count(distinct dxcat) as Count12mChronicSign
1371      from trash502
1372      where flag12mChronicSign=1
1373      group by enrolid;
NOTE: View WORK.trash508_1 successfully created
1374      
1375      create view trash509 as select
1376      	enrolid,
1377      	count(distinct dxcat) as Count3mAcute
1378      from trash502
1379      where flag3mAcute=1
1380      group by enrolid;
NOTE: View WORK.trash509 successfully created
1381      
1382      create view trash510 as select
1383      	enrolid,
1384      	count(distinct dxcat) as Count6mAcute
1385      from trash502
1386      where flag6mAcute=1
1387      group by enrolid;
NOTE: View WORK.trash510 successfully created
1388      
1389      create view trash511 as select
1390      	enrolid,
1391      	count(distinct dxcat) as Count3mChronic
1392      from trash502
1393      where flag3mChronic=1
1394      group by enrolid;
NOTE: View WORK.trash511 successfully created
1395      
1396      create view trash512 as select
1397      	enrolid,
1398      	count(distinct dxcat) as Count12mChronic
1399      from trash502
1400      where flag12mChronic=1
1401      group by enrolid;
NOTE: View WORK.trash512 successfully created
1402      
1403      *** count the unique Body systems;
1404      create view trash513 as select
1405      	enrolid,
1406      	count(distinct body) as Count3mBody
1407      from trash502
1408      where flag3mBody=1
1409      group by enrolid;
NOTE: View WORK.trash513 successfully created
1410      
1411      create view trash514 as select
1412      	enrolid,
1413      	count(distinct body) as Count3mBodySign
1414      from trash502
1415      where flag3mBodySign=1
56                                       The WPS System      16:10 Monday, October 29, 2018     

1416      group by enrolid;
NOTE: View WORK.trash514 successfully created
1417      
1418      *** create flag for new significant chronic condition;
NOTE: Procedure sql step took :
      real time : 0.519
      cpu time  : 0.008


1419      proc sql;
1420      create view trash515 as select distinct
1421      	a.enrolid,
1422      	1 as flag3mNewChronicSign
1423      from
1424      	trash502(where=(flagNew3mChronicSign=1)) as a
1425      left join
1426      	trash502(where=(flagNew12mChronicSign=1)) as b
1427      on
1428      	a.enrolid=b.enrolid and a.dxcat=b.dxcat
1429      where
1430      	a.dxcat ne b.dxcat;
NOTE: View WORK.trash515 successfully created
1431      
1432      *** create flag for number of days with Stage3 within last 3m;
NOTE: Procedure sql step took :
      real time : 0.047
      cpu time  : 0.001


1433      proc sql;
1434      create view trash516 as select
1435      	enrolid,
1436      	count(distinct svcdate) as Days3mStage3
1437      from trash502
1438      where flag3mStage3=1
1439      group by enrolid;
NOTE: View WORK.trash516 successfully created
1440      
1441      *** put all the DxCat related variables from IP and OP claims together;
NOTE: Procedure sql step took :
      real time : 0.048
      cpu time  : 0.000


1442      DATA
1443      	trash531;
1444      Merge
1445      	trash501(in=a)
1446      	trash503(in=b)
1447      	trash504(in=c)
1448      	trash505(in=d)
1449      	trash506(in=e)
1450      	trash507(in=f)
57                                       The WPS System      16:10 Monday, October 29, 2018     

1451      	trash508(in=g)
1452      	trash508_1(in=g_1)
1453      	trash509(in=h)
1454      	trash510(in=i)
1455      	trash511(in=j)
1456      	trash512(in=k)
1457      	trash513(in=l)
1458      	trash514(in=m)
1459      	trash515(in=n)
1460      	trash516(in=o);
1461      By
1462      	enrolid;
1463      If
1464      	a or b or c or d or e or f or g or g_1 or h or i or j or k or l or m or n or o;
1465      run;

NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: 1344 observations were read from "WORK.trash501"
NOTE: 0 observations were read from "WORK.trash503"
NOTE: 0 observations were read from "WORK.trash504"
NOTE: 6 observations were read from "WORK.trash505"
NOTE: 0 observations were read from "WORK.trash506"
NOTE: 0 observations were read from "WORK.trash507"
NOTE: 168 observations were read from "WORK.trash508"
NOTE: 318 observations were read from "WORK.trash508_1"
NOTE: 0 observations were read from "WORK.trash509"
NOTE: 541 observations were read from "WORK.trash510"
NOTE: 1 observations were read from "WORK.trash511"
NOTE: 752 observations were read from "WORK.trash512"
NOTE: 1 observations were read from "WORK.trash513"
NOTE: 0 observations were read from "WORK.trash514"
NOTE: 0 observations were read from "WORK.trash515"
NOTE: 0 observations were read from "WORK.trash516"
NOTE: Data set "WORK.trash531" has 1344 observation(s) and 18 variable(s)
NOTE: The data step took :
      real time : 2.259
      cpu time  : 0.158

58                                       The WPS System      16:10 Monday, October 29, 2018     


1466      
1467      *** Merge with the original Sample and use counts of zero when no admissions;
1468      PROC SQL;
1469      Create Table temp.IPandOP as
1470      Select
1471      	a.enrolid,
1472      	max(0,b.flag12mMHSA) as flag12mMHSA,
1473      	max(0,b.flag3mGYN) as flag3mGYN,
1474      	max(0,b.Count3mAcuteStage3) as Count3mAcuteStage3,
1475      	max(0,b.Count3mChronicStage3) as Count3mChronicStage3,
1476      	max(0,b.Count6mChronicStage3) as Count6mChronicStage3,
1477      	max(0,b.Count3mAcuteSign) as Count3mAcuteSign,
1478      	max(0,b.Count3mChronicSign) as Count3mChronicSign,
1479      	max(0,b.Count6mChronicSign) as Count6mChronicSign,
1480      	max(0,b.Count12mChronicSign) as Count12mChronicSign,
1481      	max(0,b.Count3mAcute) as Count3mAcute,
1482      	max(0,b.Count6mAcute) as Count6mAcute,
1483      	max(0,b.Count3mChronic) as Count3mChronic,
1484      	max(0,b.Count12mChronic) as Count12mChronic,
1485      	max(0,b.Count3mBody) as Count3mBody,
1486      	max(0,b.Count3mBodySign) as Count3mBodySign,
1487      	max(0,b.flag3mNewChronicSign) as flag3mNewChronicSign,
1488      	max(0,b.Days3mStage3) as Days3mStage3
1489      From
1490      	(Select distinct enrolid from temp.SamplewClassification) as a
1491      Left Join
1492      	work.trash531 as b
1493      On
1494      	a.enrolid=b.enrolid
1495      Order by
1496      	a.enrolid;
NOTE: View opening spill file for output observations.
NOTE: Data set "TEMP.IPandOP" has 1798 observation(s) and 18 variable(s)
1497      quit;
NOTE: Procedure SQL step took :
      real time : 0.640
      cpu time  : 0.046


1498      
1499      
1500      *** summarize the outpatient data ***;
1501      ************************************;
1502      
1503      PROC SQL;
1504      *** get all the outpatient data from the matched IDs;
1505      Create View trash001 as select distinct
1506      	a.enrolid,
1507      	a.msclmid,
1508      	a.facprof,
1509      	a.fachdid,
1510      	a.proc1,
59                                       The WPS System      16:10 Monday, October 29, 2018     

1511      	a.procgrp,
1512      	a.dxcat,
1513      	a.svcscat,
1514      	a.stdprov,
1515      	a.svcdate,
1516      	a.pay
1517      from
1518      	arch&year..ccaeo&MSversion.			as a,
1519      	temp.SamplewClassification	as b	
1520      where
1521      	a.enrolid=b.enrolid
1522      order by
1523      	a.enrolid,
1524      	a.svcdate;
NOTE: View WORK.trash001 successfully created
1525      
1526      *** map the principal DxCat from the outpatient claim to chronic/acute;
1527      Create View trash002 as select
1528      	a.*,
1529      	b.category
1530      from
1531      	trash001					as a
1532      left join
1533      	temp.GeneralAssignments		as b
1534      on
1535      	a.dxcat=b.dxcat;
NOTE: View WORK.trash002 successfully created
1536      
1537      *** link to ATG from OPEG Lookup;
1538      Create View trash003 as select
1539      	a.*,
1540      	b.ATG
1541      from
1542      	trash002 		as a
1543      left join
1544      	temp.OPEGLookup		as b
1545      on
1546      	a.proc1=b.hcpcs;
NOTE: View WORK.trash003 successfully created
1547      
1548      *** link to Significant Conditions based on ProcGrp map;
1549      Create View trash004 as select
1550      	a.*,
1551      	b.Significance
1552      from
1553      	trash003 		as a
1554      left join
1555      	temp.SignificantConditions		as b
1556      on
1557      	a.dxcat=b.dxcat;
NOTE: View WORK.trash004 successfully created
1558      
1559      *** link to facility header table to get the inpatient flag based on CASEID being pres
60                                       The WPS System      16:10 Monday, October 29, 2018     

1559    ! ent;
1560      Create Table temp.SampleOtp1 as select distinct
1561      	a.*,
1562      	b.caseid
1563      from
1564      	trash004			as a
1565      left join
1566      	arch&year..ccaef&MSversion.	as b
1567      on
1568      	a.enrolid=b.enrolid and
1569      	a.fachdid=b.fachdid;
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: Data set "TEMP.SampleOtp1" has 32108 observation(s) and 15 variable(s)
1570      Quit;
NOTE: Procedure SQL step took :
      real time : 57:37.296
      cpu time  : 10:41.270


1571      
1572      
1573      /*** check some counts of patients/claims in the data selected above;
1574      proc sql;
1575      select count (distinct enrolid) from temp.SampleOtp1;
1576      select enrolid format=15.0, count(distinct svcdate) as count_claims from temp.SampleOt
1576    ! p1 group by enrolid;
1577      quit;*/
1578      
1579      PROC SQL;
1580      *** counting 3/12 months office visits to any provider for any conditions by service d
1580    ! ate;
1581      Create View work.trash001_1 as
1582      select
1583      	enrolid,
1584      	count(distinct msclmid) as Count3mOV
1585      from
1586      	temp.SampleOtp1
1587      where
1588      	svcdate > &StartDate. - 90							and		/*3 months*/
1589      	substr(svcscat,4,2) in ("25","24")							and		/*office visits*/
1590      	^(proc1 in (&ProcExclusionList.))							/*exclusion based on procedures*/
1591      group by
1592      	enrolid
1593      ;
NOTE: View WORK.trash001_1 successfully created
1594      Create View work.trash001_2 as
1595      select
1596      	enrolid,
1597      	count(distinct msclmid) as Count12mOV
1598      from
61                                       The WPS System      16:10 Monday, October 29, 2018     

1599      	temp.SampleOtp1
1600      where
1601      	svcdate > &StartDate. - 366							and		/*12 months*/
1602      	substr(svcscat,4,2) in ("25","24")							and		/*office visits*/
1603      	^(proc1 in (&ProcExclusionList.))							/*exclusion based on procedures*/
1604      group by
1605      	enrolid
1606      ;
NOTE: View WORK.trash001_2 successfully created
1607      
1608      *** counting 3/6 months office visits to any provider for Chronic conditions by servic
1608    ! e date;
1609      Create View work.trash002_1 as
1610      select
1611      	enrolid,
1612      	count(distinct msclmid) as Count3mOVChronic
1613      from
1614      	temp.SampleOtp1
1615      where
1616      	category='Chronic'									and		/*Chronic*/
1617      	svcdate > &StartDate. - 90 							and		/*3 months*/
1618      	substr(svcscat,4,2) in ("25","24")							and		/*office visits*/
1619      	^(proc1 in (&ProcExclusionList.))							/*exclusion based on procedures*/
1620      group by
1621      	enrolid
1622      ;
NOTE: View WORK.trash002_1 successfully created
1623      Create View work.trash002_2 as
1624      select
1625      	enrolid,
1626      	count(distinct msclmid) as Count6mOVChronic
1627      from
1628      	temp.SampleOtp1
1629      where
1630      	category='Chronic'									and		/*Chronic*/
1631      	svcdate > &StartDate. - 180							and		/*6 months*/
1632      	substr(svcscat,4,2) in ("25","24")							and		/*office visits*/
1633      	^(proc1 in (&ProcExclusionList.))							/*exclusion based on procedures*/
1634      group by
1635      	enrolid
1636      ;
NOTE: View WORK.trash002_2 successfully created
1637      
1638      *** counting 3/6 months office visits to specialists for Chronic conditions by service
1638    !  date;
1639      Create View work.trash003_1 as
1640      select
1641      	enrolid,
1642      	count(distinct msclmid) as Count3mOVChronicSpecialist
1643      from
1644      	temp.SampleOtp1
1645      where
1646      	category='Chronic'							and		/*Chronic*/
62                                       The WPS System      16:10 Monday, October 29, 2018     

1647      	svcdate > &StartDate. - 90 					and		/*3 months*/
1648      	substr(svcscat,4,2) in ("25","24")					and		/*office visits*/
1649      	stdprov between 100 and 799					and		/*specialists*/
1650      	^(stdprov in (&SpecExclusionList.))			and		/*exclusions from specialists*/
1651      	^(proc1 in (&ProcExclusionList.))					/*exclusion based on procedures*/
1652      group by
1653      	enrolid
1654      ;
NOTE: View WORK.trash003_1 successfully created
1655      Create View work.trash003_2 as
1656      select
1657      	enrolid,
1658      	count(distinct msclmid) as Count6mOVChronicSpecialist
1659      from
1660      	temp.SampleOtp1
1661      where
1662      	category='Chronic'							and		/*Chronic*/
1663      	svcdate > &StartDate. - 180 				and		/*6 months*/
1664      	substr(svcscat,4,2) in ("25","24")					and		/*office visits*/
1665      	stdprov between 100 and 799					and		/*specialists*/
1666      	^(stdprov in (&SpecExclusionList))			and		/*exclusions from specialists*/
1667      	^(proc1 in (&ProcExclusionList.))					/*exclusion based on procedures*/
1668      group by
1669      	enrolid
1670      ;
NOTE: View WORK.trash003_2 successfully created
1671      
1672      *** counting 3 months unique specialties for office visits;
1673      Create View work.trash004 as
1674      select
1675      	enrolid,
1676      	count(distinct stdprov) as Count3mOVSpecialties
1677      from
1678      	temp.SampleOtp1
1679      where
1680      	svcdate > &StartDate. - 90					and		/*3 months*/
1681      	stdprov between 100 and 799					and		/*specialists*/
1682      	^(stdprov in (&SpecExclusionList))			and		/*exclusions from specialists*/
1683      	^(proc1 in (&ProcExclusionList.))			and		/*exclusion based on procedures*/
1684      	substr(svcscat,4,2) in ("25","24")							/*office visits*/
1685      group by
1686      	enrolid
1687      ;
NOTE: View WORK.trash004 successfully created
1688      
1689      *** counting 3 months unique specialties for office visits Chronic;
1690      Create View work.trash005 as
1691      select
1692      	enrolid,
1693      	count(distinct stdprov) as Count3mOVChronicSpecialties
1694      from
1695      	temp.SampleOtp1
1696      where
63                                       The WPS System      16:10 Monday, October 29, 2018     

1697      	svcdate > &StartDate. - 90					and		/*3 months*/
1698      	stdprov between 100 and 799					and		/*specialists*/
1699      	^(stdprov in (&SpecExclusionList))			and		/*exclusions from specialists*/
1700      	^(proc1 in (&ProcExclusionList.))			and		/*exclusion based on procedures*/
1701      	substr(svcscat,4,2) in ("25","24")					and		/*office visits*/
1702      	category='Chronic'									/*Chronic*/
1703      group by
1704      	enrolid
1705      ;
NOTE: View WORK.trash005 successfully created
1706      
1707      *** counting 3/6 months ER visits for any conditions by claim id;
1708      Create View work.trash006_1 as
1709      select
1710      	enrolid,
1711      	count(distinct msclmid) as Count3mER
1712      from
1713      	temp.SampleOtp1
1714      where
1715      	svcdate > &StartDate. - 90					and		/*3 months*/
1716      	facprof='F'									and		/*Facility claim*/
1717      	substr(svcscat,4,2)="20"					and		/*ER visits*/
1718      	missing(caseid)=1							and 	/*no inpatient*/
1719      	^(proc1 in (&ProcExclusionList.))					/*exclusion based on procedures*/
1720      group by
1721      	enrolid
1722      ;
NOTE: View WORK.trash006_1 successfully created
1723      
1724      Create View work.trash006_2 as
1725      select
1726      	enrolid,
1727      	count(distinct msclmid) as Count12mER
1728      from
1729      	temp.SampleOtp1
1730      where
1731      	svcdate > &StartDate. - 366					and		/*12 months*/
1732      	facprof='F'									and		/*Facility claim*/
1733      	substr(svcscat,4,2)="20"					and		/*ER visits*/
1734      	missing(caseid)=1							and 	/*no inpatient*/
1735      	^(proc1 in (&ProcExclusionList.))					/*exclusion based on procedures*/
1736      group by
1737      	enrolid
1738      ;
NOTE: View WORK.trash006_2 successfully created
1739      
1740      *** counting 3/6 months ER visits for Chronic conditions by claim id;
1741      Create View work.trash007_1 as
1742      select
1743      	enrolid,
1744      	count(distinct msclmid) as Count3mERChronic
1745      from
1746      	temp.SampleOtp1
64                                       The WPS System      16:10 Monday, October 29, 2018     

1747      where
1748      	category='Chronic'							and		/*Chronic*/
1749      	svcdate > &StartDate. - 90					and		/*3 months*/
1750      	facprof='F'									and		/*Facility claim*/
1751      	substr(svcscat,4,2)="20"					and		/*ER visits*/
1752      	missing(caseid)=1							and 	/*no inpatient*/
1753      	^(proc1 in (&ProcExclusionList.))					/*exclusion based on procedures*/
1754      group by
1755      	enrolid
1756      ;
NOTE: View WORK.trash007_1 successfully created
1757      
1758      Create View work.trash007_2 as
1759      select
1760      	enrolid,
1761      	count(distinct msclmid) as Count6mERChronic
1762      from
1763      	temp.SampleOtp1
1764      where
1765      	category='Chronic'							and		/*Chronic*/
1766      	svcdate > &StartDate. - 180					and		/*6 months*/
1767      	facprof='F'									and		/*Facility claim*/
1768      	substr(svcscat,4,2)="20"					and		/*ER visits*/
1769      	missing(caseid)=1							and 	/*no inpatient*/
1770      	^(proc1 in (&ProcExclusionList.))					/*exclusion based on procedures*/
1771      group by
1772      	enrolid
1773      ;
NOTE: View WORK.trash007_2 successfully created
1774      
1775      *** days since any ER;
1776      Create View work.trash008 as
1777      select
1778      	enrolid,
1779      	&StartDate.-max(svcdate) 	as DaysER
1780      from
1781      	temp.SampleOtp1
1782      where
1783      	facprof='F'									and		/*Facility claim*/
1784      	substr(svcscat,4,2)="20"					and		/*ER visits*/
1785      	missing(caseid)=1							and 	/*no inpatient*/
1786      	^(proc1 in (&ProcExclusionList.))					/*exclusion based on procedures*/
1787      group by
1788      	enrolid
1789      ;
NOTE: View WORK.trash008 successfully created
1790      
1791      *** days since Major ER;
1792      *** from DS output transpose the dxcat and stage, one per row and dedup, so that can b
1792    ! e merged into OP data;
NOTE: Procedure SQL step took :
      real time : 0.335
      cpu time  : 0.009
65                                       The WPS System      16:10 Monday, October 29, 2018     



1793      data work.trash0091(keep=enrolid svcdate dxcat dxstage);
1794      set temp.SampleIPOPwDS1;
1795      array listcat[4] dxcat1-dxcat4;
1796      array liststage[4] dxstage1-dxstage4;
1797      do i=1 to 4;
1798      	dxcat=listcat[i];
1799      	dxstage=liststage[i];
1800      	if dxstage >= 3 then output;
1801      end;
1802      run;

NOTE: 34163 observations were read from "TEMP.SampleIPOPwDS1"
NOTE: Data set "WORK.trash0091" has 894 observation(s) and 4 variable(s)
NOTE: The data step took :
      real time : 0.147
      cpu time  : 0.031


1803      proc sort data=work.trash0091 nodupkey; by enrolid svcdate dxcat; run;
NOTE: 894 observations were read from "WORK.trash0091"
NOTE: 679 observations were found and deleted due to having duplicate sort keys
NOTE: Data set "WORK.trash0091" has 215 observation(s) and 4 variable(s)
NOTE: Procedure sort step took :
      real time : 0.048
      cpu time  : 0.004


1804      *** Merge the Stage from DS;
1805      proc sql;
1806      Create View work.trash0092 as
1807      Select
1808      	a.*,
1809      	b.dxstage
1810      From
1811      	temp.SampleOtp1 as a
1812      Left Join
1813      	work.trash0091 as b
1814      On
1815      	a.enrolid=b.enrolid and
1816      	a.svcdate=b.svcdate and
1817      	a.dxcat=b.dxcat;
NOTE: View WORK.trash0092 successfully created
1818      *** count the days using all the criteria including DS stage;
1819      Create View work.trash009 as
1820      Select
1821      	enrolid,
1822      	&StartDate.-max(svcdate) 	as DaysMajorER
1823      from
1824      	work.trash0092
1825      where
1826      	facprof='F'									and		/*Facility claim*/
66                                       The WPS System      16:10 Monday, October 29, 2018     

1827      	substr(svcscat,4,2)="20"					and		/*ER visits*/
1828      	missing(caseid)=1							and 	/*no inpatient*/
1829      	^(proc1 in (&ProcExclusionList.))			and		/*exclusion based on procedures*/
1830      	(Significance="High" or dxstage>=3)					/*must be significant or stage higher than 3*
1830    ! /
1831      group by
1832      	enrolid
1833      ;
NOTE: View WORK.trash009 successfully created
1834      
1835      *** days since home health;
1836      Create View work.trash010 as
1837      select
1838      	enrolid,
1839      	&StartDate.-max(svcdate) 	as DaysHH
1840      from
1841      	temp.SampleOtp1
1842      where
1843      	substr(svcscat,4,2)="33"					and		/*Home Health claim*/
1844      	missing(caseid)=1							and 	/*no inpatient*/
1845      	^(proc1 in (&ProcExclusionList.))					/*exclusion based on procedures*/
1846      group by
1847      	enrolid
1848      ;
NOTE: View WORK.trash010 successfully created
1849      
1850      *** days since Major Surgery;
1851      Create View work.trash011 as
1852      select
1853      	enrolid,
1854      	&StartDate.-max(svcdate) 	as DaysMajorSurg
1855      from
1856      	temp.SampleOtp1
1857      where
1858      	missing(caseid)=1							and 	/*no inpatient*/
1859      	ATG="SURG MAJOR"
1860      group by
1861      	enrolid
1862      ;
NOTE: View WORK.trash011 successfully created
1863      
1864      *** days since Oxygen treatment;
1865      Create View work.trash012 as
1866      select
1867      	enrolid,
1868      	&StartDate.-max(svcdate) 	as DaysOxygen
1869      from
1870      	temp.SampleOtp1
1871      where
1872      	missing(caseid)=1							and 	/*no inpatient*/
1873      	proc1 in (&OxygenCPTList.)
1874      group by
1875      	enrolid
67                                       The WPS System      16:10 Monday, October 29, 2018     

1876      ;
NOTE: View WORK.trash012 successfully created
1877      
1878      *** Days in LTC and Flag for LTC in the last 90 days (LTC defined based on svcscat = 1
1878    ! 02xx);
1879      Create View work.trash013 as
1880      select
1881      	a.enrolid,
1882      	a.fachdid,
1883      	a.svcscat,
1884      	b.svcdate as header_date,
1885      	b.tsvcdat as header_last,
1886      	b.days
1887      from
1888      	temp.SampleOTP1(where=
1889      					(substr(svcscat,1,3)='102' and svcdate > &StartDate. - 90)
1890      					) as a,
1891      	arch&year..ccaef&MSversion. as b
1892      where
1893      	a.enrolid=b.enrolid and
1894      	a.fachdid=b.fachdid
1895      order by
1896      	enrolid,
1897      	header_date;
NOTE: View WORK.trash013 successfully created
1898      ;
1899      Quit;
NOTE: Procedure sql step took :
      real time : 0.167
      cpu time  : 0.005


1900      
1901      data work.trash013_1(keep=enrolid Days3mLTC flag3mLTC);
1902      	set work.trash013;
1903      	by enrolid;
1904      	retain first last Days3mLTC 0;
1905      	if first.enrolid then do;
1906      		first=header_date;
1907      		last=header_last;
1908      		Days3mLTC=0;
1909      	end;
1910      	if header_date <= last then
1911      		last=max(last,header_last);
1912      	else do;
1913      		Days3mLTC=Days3mLTC + last-first;
1914      		first=header_date;
1915      		last=header_last;
1916      	end;
1917      	if last.enrolid then do;
1918      		Days3mLTC=Days3mLTC + last-first;
1919      		flag3mLTC=1;
1920      		output;
68                                       The WPS System      16:10 Monday, October 29, 2018     

1921      	end;
1922      run;

NOTE: View opening spill file for output observations.
NOTE: 0 observations were read from "WORK.trash013"
NOTE: Data set "WORK.trash013_1" has 0 observation(s) and 3 variable(s)
NOTE: The data step took :
      real time : 14:18.016
      cpu time  : 2:05.963


1923      
1924      *** put the all the outpatient related variables together;
1925      DATA
1926      	work.trash101;
1927      merge
1928      	trash001_1(in=a)
1929      	trash001_2(in=b)
1930      	trash002_1(in=c)
1931      	trash002_2(in=d)
1932      	trash003_1(in=e)
1933      	trash003_2(in=f)
1934      	trash004 (in=g)
1935      	trash005 (in=h)
1936      	trash006_1(in=i)
1937      	trash006_2(in=j)
1938      	trash007_1(in=k)
1939      	trash007_2(in=l)
1940      	trash008  (in=m)
1941      	trash009  (in=n)
1942      	trash010  (in=o)
1943      	trash011  (in=p)
1944      	trash012  (in=q)
1945      	trash013_1(in=r)
1946      ;
1947      by
1948      	enrolid;
1949      if
1950      	a or b or c or d or e or f or g or h or i or j or k or l or m or n or o or p or q or 
1950    ! r;
1951      run;

NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
69                                       The WPS System      16:10 Monday, October 29, 2018     

NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: 766 observations were read from "WORK.trash001_1"
NOTE: 1297 observations were read from "WORK.trash001_2"
NOTE: 281 observations were read from "WORK.trash002_1"
NOTE: 434 observations were read from "WORK.trash002_2"
NOTE: 124 observations were read from "WORK.trash003_1"
NOTE: 177 observations were read from "WORK.trash003_2"
NOTE: 257 observations were read from "WORK.trash004"
NOTE: 124 observations were read from "WORK.trash005"
NOTE: 54 observations were read from "WORK.trash006_1"
NOTE: 203 observations were read from "WORK.trash006_2"
NOTE: 9 observations were read from "WORK.trash007_1"
NOTE: 18 observations were read from "WORK.trash007_2"
NOTE: 203 observations were read from "WORK.trash008"
NOTE: 34 observations were read from "WORK.trash009"
NOTE: 3 observations were read from "WORK.trash010"
NOTE: 64 observations were read from "WORK.trash011"
NOTE: 2 observations were read from "WORK.trash012"
NOTE: 0 observations were read from "WORK.trash013_1"
NOTE: Data set "WORK.trash101" has 1310 observation(s) and 20 variable(s)
NOTE: The data step took :
      real time : 1.535
      cpu time  : 0.114


1952      
1953      *** Merge with the original Sample and use counts of zero when no admissions;
1954      PROC SQL;
1955      Create Table temp.OP as
1956      select
1957      	a.enrolid,
1958      	max(0,b.Count3mOV)							as Count3mOV,
1959      	max(0,b.Count12mOV)							as Count12mOV,
1960      	max(0,b.Count3mOVChronic)					as Count3mOVChronic,
1961      	max(0,b.Count6mOVChronic)					as Count6mOVChronic,
1962      	max(0,b.Count3mOVChronicSpecialist)			as Count3mOVChronicSpecialist,
1963      	max(0,b.Count6mOVChronicSpecialist)			as Count6mOVChronicSpecialist,
1964      	max(0,b.Count3mOVSpecialties)				as Count3mOVSpecialties,
1965      	max(0,b.Count3mOVChronicSpecialties)		as Count3mOVChronicSpecialties,
1966      	max(0,b.Count3mEr)							as Count3mER,
1967      	max(0,b.Count12mER)							as Count12mER,
1968      	max(0,b.Count3mERChronic)					as Count3mERChronic,
1969      	max(0,b.Count6mERChronic)					as Count6mERChronic,
1970      	min(365,b.DaysER)							as DaysER,
1971      	min(365,b.DaysMajorER)						as DaysMajorER,
1972      	min(365,b.DaysHH)							as DaysHH,
1973      	min(365,b.DaysMajorSurg)					as DaysMajorSurg,
70                                       The WPS System      16:10 Monday, October 29, 2018     

1974      	min(365,b.DaysOxygen)						as DaysOxygen,
1975      	max(0,b.Days3mLTC)							as Days3mLTC,
1976      	max(0,b.flag3mLTC)							as flag3mLTC
1977      from
1978      	(Select distinct enrolid from temp.SamplewClassification) as a
1979      left join
1980      	work.trash101 as b
1981      on
1982      	a.enrolid=b.enrolid
1983      Order by
1984      	a.enrolid;
NOTE: View opening spill file for output observations.
NOTE: Data set "TEMP.OP" has 1798 observation(s) and 20 variable(s)
1985      
1986      *************************************************************;
1987      *** Merge all the variables from all claims OP/IP/Rx together;
NOTE: Procedure SQL step took :
      real time : 0.626
      cpu time  : 0.050


1988      data temp.AllModelInputs;
1989      merge
1990      	temp.SamplewClassification(in=orig)
1991          temp.OP        (in=a)
1992          temp.IP        (in=b)
1993          temp.Rx        (in=c)
1994          temp.IPandOP(in=d);
1995      if orig or a or b or c or d;
1996      by enrolid;
1997      run;

NOTE: 1798 observations were read from "TEMP.SamplewClassification"
NOTE: 1798 observations were read from "TEMP.OP"
NOTE: 1798 observations were read from "TEMP.IP"
NOTE: 1798 observations were read from "TEMP.Rx"
NOTE: 1798 observations were read from "TEMP.IPandOP"
NOTE: Data set "TEMP.AllModelInputs" has 1798 observation(s) and 61 variable(s)
NOTE: The data step took :
      real time : 0.212
      cpu time  : 0.009


1998      proc export
1999      	data=temp.AllModelInputs
2000      	outfile="&outpath./ModelInputs&version..csv"
2001      	replace;
2002      run;
NOTE: Procedure export step took :
      real time : 0.002
      cpu time  : 0.000


71                                       The WPS System      16:10 Monday, October 29, 2018     

2003      data _null_;
2004        file '/rpscan/u071439/output/31DEC2015Enrolids2000_10292018/ModelInputs31DEC2015Enro
2004    ! lids2000_10292018.csv' delimiter=',' DSD DROPOVER LRECL=1145;
2005        format ENROLID BEST12.;
2006        format AssignmentFinal $1.;
2007        format Count3mOV BEST12.;
2008        format Count12mOV BEST12.;
2009        format Count3mOVChronic BEST12.;
2010        format Count6mOVChronic BEST12.;
2011        format Count3mOVChronicSpecialist BEST12.;
2012        format Count6mOVChronicSpecialist BEST12.;
2013        format Count3mOVSpecialties BEST12.;
2014        format Count3mOVChronicSpecialties BEST12.;
2015        format Count3mER BEST12.;
2016        format Count12mER BEST12.;
2017        format Count3mERChronic BEST12.;
2018        format Count6mERChronic BEST12.;
2019        format DaysER BEST12.;
2020        format DaysMajorER BEST12.;
2021        format DaysHH BEST12.;
2022        format DaysMajorSurg BEST12.;
2023        format DaysOxygen BEST12.;
2024        format Days3mLTC BEST12.;
2025        format flag3mLTC BEST12.;
2026        format CountAdm3mAll BEST12.;
2027        format CountAdm3mChronic BEST12.;
2028        format CountAdm6mAll BEST12.;
2029        format CountAdm6mChronic BEST12.;
2030        format SumLOS3mAll BEST12.;
2031        format DaysAnyAdm BEST12.;
2032        format DaysChronicAdm BEST12.;
2033        format DaysSurgAdm BEST12.;
2034        format DaysMedicalAdm BEST12.;
2035        format DaysMtrntyAdm BEST12.;
2036        format DaysMHSAAdm BEST12.;
2037        format FlagChronicRx BEST12.;
2038        format FlagNewChronicRx BEST12.;
2039        format CountDaysSupp3m BEST12.;
2040        format CountDaysSupp6m BEST12.;
2041        format CountDaysSuppChronic3m BEST12.;
2042        format CountDaysSuppChronic6m BEST12.;
2043        format CountDaysSuppOpiates3m BEST12.;
2044        format CountDaysSuppOpiates6m BEST12.;
2045        format CountTherClass3m BEST12.;
2046        format CountTherClass6m BEST12.;
2047        format CountTherClassChronic3m BEST12.;
2048        format CountTherClassChronic6m BEST12.;
2049        format flag12mMHSA BEST12.;
2050        format flag3mGYN BEST12.;
2051        format Count3mAcuteStage3 BEST12.;
2052        format Count3mChronicStage3 BEST12.;
2053        format Count6mChronicStage3 BEST12.;
2054        format Count3mAcuteSign BEST12.;
72                                       The WPS System      16:10 Monday, October 29, 2018     

2055        format Count3mChronicSign BEST12.;
2056        format Count6mChronicSign BEST12.;
2057        format Count12mChronicSign BEST12.;
2058        format Count3mAcute BEST12.;
2059        format Count6mAcute BEST12.;
2060        format Count3mChronic BEST12.;
2061        format Count12mChronic BEST12.;
2062        format Count3mBody BEST12.;
2063        format Count3mBodySign BEST12.;
2064        format flag3mNewChronicSign BEST12.;
2065        format Days3mStage3 BEST12.;
2066        if _n_=1 then do;
2067            put
2068               'ENROLID'        ','
2069               'AssignmentFinal'        ','
2070               'Count3mOV'        ','
2071               'Count12mOV'        ','
2072               'Count3mOVChronic'        ','
2073               'Count6mOVChronic'        ','
2074               'Count3mOVChronicSpecialist'        ','
2075               'Count6mOVChronicSpecialist'        ','
2076               'Count3mOVSpecialties'        ','
2077               'Count3mOVChronicSpecialties'        ','
2078               'Count3mER'        ','
2079               'Count12mER'        ','
2080               'Count3mERChronic'        ','
2081               'Count6mERChronic'        ','
2082               'DaysER'        ','
2083               'DaysMajorER'        ','
2084               'DaysHH'        ','
2085               'DaysMajorSurg'        ','
2086               'DaysOxygen'        ','
2087               'Days3mLTC'        ','
2088               'flag3mLTC'        ','
2089               'CountAdm3mAll'        ','
2090               'CountAdm3mChronic'        ','
2091               'CountAdm6mAll'        ','
2092               'CountAdm6mChronic'        ','
2093               'SumLOS3mAll'        ','
2094               'DaysAnyAdm'        ','
2095               'DaysChronicAdm'        ','
2096               'DaysSurgAdm'        ','
2097               'DaysMedicalAdm'        ','
2098               'DaysMtrntyAdm'        ','
2099               'DaysMHSAAdm'        ','
2100               'FlagChronicRx'        ','
2101               'FlagNewChronicRx'        ','
2102               'CountDaysSupp3m'        ','
2103               'CountDaysSupp6m'        ','
2104               'CountDaysSuppChronic3m'        ','
2105               'CountDaysSuppChronic6m'        ','
2106               'CountDaysSuppOpiates3m'        ','
2107               'CountDaysSuppOpiates6m'        ','
73                                       The WPS System      16:10 Monday, October 29, 2018     

2108               'CountTherClass3m'        ','
2109               'CountTherClass6m'        ','
2110               'CountTherClassChronic3m'        ','
2111               'CountTherClassChronic6m'        ','
2112               'flag12mMHSA'        ','
2113               'flag3mGYN'        ','
2114               'Count3mAcuteStage3'        ','
2115               'Count3mChronicStage3'        ','
2116               'Count6mChronicStage3'        ','
2117               'Count3mAcuteSign'        ','
2118               'Count3mChronicSign'        ','
2119               'Count6mChronicSign'        ','
2120               'Count12mChronicSign'        ','
2121               'Count3mAcute'        ','
2122               'Count6mAcute'        ','
2123               'Count3mChronic'        ','
2124               'Count12mChronic'        ','
2125               'Count3mBody'        ','
2126               'Count3mBodySign'        ','
2127               'flag3mNewChronicSign'        ','
2128               'Days3mStage3';
2129          end;
2130        set temp.AllModelInputs;
2131        put ENROLID @;
2132        put AssignmentFinal @;
2133        put Count3mOV @;
2134        put Count12mOV @;
2135        put Count3mOVChronic @;
2136        put Count6mOVChronic @;
2137        put Count3mOVChronicSpecialist @;
2138        put Count6mOVChronicSpecialist @;
2139        put Count3mOVSpecialties @;
2140        put Count3mOVChronicSpecialties @;
2141        put Count3mER @;
2142        put Count12mER @;
2143        put Count3mERChronic @;
2144        put Count6mERChronic @;
2145        put DaysER @;
2146        put DaysMajorER @;
2147        put DaysHH @;
2148        put DaysMajorSurg @;
2149        put DaysOxygen @;
2150        put Days3mLTC @;
2151        put flag3mLTC @;
2152        put CountAdm3mAll @;
2153        put CountAdm3mChronic @;
2154        put CountAdm6mAll @;
2155        put CountAdm6mChronic @;
2156        put SumLOS3mAll @;
2157        put DaysAnyAdm @;
2158        put DaysChronicAdm @;
2159        put DaysSurgAdm @;
2160        put DaysMedicalAdm @;
74                                       The WPS System      16:10 Monday, October 29, 2018     

2161        put DaysMtrntyAdm @;
2162        put DaysMHSAAdm @;
2163        put FlagChronicRx @;
2164        put FlagNewChronicRx @;
2165        put CountDaysSupp3m @;
2166        put CountDaysSupp6m @;
2167        put CountDaysSuppChronic3m @;
2168        put CountDaysSuppChronic6m @;
2169        put CountDaysSuppOpiates3m @;
2170        put CountDaysSuppOpiates6m @;
2171        put CountTherClass3m @;
2172        put CountTherClass6m @;
2173        put CountTherClassChronic3m @;
2174        put CountTherClassChronic6m @;
2175        put flag12mMHSA @;
2176        put flag3mGYN @;
2177        put Count3mAcuteStage3 @;
2178        put Count3mChronicStage3 @;
2179        put Count6mChronicStage3 @;
2180        put Count3mAcuteSign @;
2181        put Count3mChronicSign @;
2182        put Count6mChronicSign @;
2183        put Count12mChronicSign @;
2184        put Count3mAcute @;
2185        put Count6mAcute @;
2186        put Count3mChronic @;
2187        put Count12mChronic @;
2188        put Count3mBody @;
2189        put Count3mBodySign @;
2190        put flag3mNewChronicSign @;
2191        put Days3mStage3;
2192      run;

NOTE: The file
      '/rpscan/u071439/output/31DEC2015Enrolids2000_10292018/ModelInputs31DEC2015Enrolids2000_10
      292018.csv' is:
      File
      Name=/rpscan/u071439/output/31DEC2015Enrolids2000_10292018/ModelInputs31DEC2015Enrolids200
      0_10292018.csv,
      Access Permissions=-rw-rw-r--, Number of Links=1,
      Owner Name=u071439, Group Name=devl,
      File Size=0, Last Modified=17:22:18 Oct 29 2018,
      Created=17:22:18 Oct 29 2018, Lrecl=1145, Recfm=V

NOTE: 1799 records were written to file
      '/rpscan/u071439/output/31DEC2015Enrolids2000_10292018/ModelInputs31DEC2015Enrolids2000_10
      292018.csv'
      The minimum record length was 143
      The maximum record length was 976
NOTE: 1798 observations were read from "TEMP.AllModelInputs"
NOTE: The data step took :
      real time : 0.103
      cpu time  : 0.032
75                                       The WPS System      16:10 Monday, October 29, 2018     



2193      FILENAME ##EXPOUT CLEAR;
2194      
2195      
2196      /*** RUN SPSS and get the Decision Tree model ***/
2197      /*** Implement the Decision Tree Model from SPSS ***/									*************** <<<<<<<<
2197    ! ---------- Put all model+rules together;
2198      data temp.DTModel
2199      /*	(keep=	
2200      			enrolid
2201      			AssignmentFinal /* not available when just scoring, it was used when testing the in
2201    ! itial model with the manual labels *
2202      			Count6mChronicStage3
2203      			CountDaysSuppOpiates3m
2204      			Count12mChronicSign
2205      			Count12mOV
2206      			CountDaysSupp3m
2207      			DaysAnyAdm
2208      			DaysMajorER
2209      			CountTherClassChronic6m
2210      			CountAdm3mAll
2211      			Count6mERChronic
2212      			Count12mER /* not used in the model but we'll use it for validation analysis *
2213      			Count3mER  /* not used in the model but we'll use it for validation analysis *
2214      			PopClass
2215      			Rule)*/;
2216      set temp.AllModelInputs;
2217      if Count6mChronicStage3 <= 0 then do;
2218      	if	CountDaysSuppOpiates3m <= 50 then do;
2219      		if	Count12mChronicSign <= 0 then do;
2220      			if Count12mOV <= 0 then do;
2221      				if CountDaysSupp3m <= 37 then do; PopClass=1; Rule=1; RuleConfidence=input(put(Rul
2221    ! e,RuleConfidence.),best5.3); end;
2222      				else do; PopClass=2; Rule=2; RuleConfidence=input(put(Rule,RuleConfidence.),best5.
2222    ! 3); end;
2223      			end;
2224      			else do;
2225      				if DaysAnyAdm <= 32 then do; PopClass=7; Rule=3; RuleConfidence=input(put(Rule,Rul
2225    ! eConfidence.),best5.3); end;
2226      				else do; PopClass=2; Rule=4; RuleConfidence=input(put(Rule,RuleConfidence.),best5.
2226    ! 3); end;
2227      			end;
2228      		end;
2229      		else do;
2230      			if DaysAnyAdm <= 38 then do; PopClass=7; Rule=5; RuleConfidence=input(put(Rule,Rule
2230    ! Confidence.),best5.3); end;
2231      			else do;
2232      				if Count12mChronicSign <= 4 then do;
2233      					if DaysMajorER <= 255 then do; PopClass=6; Rule=6; RuleConfidence=input(put(Rule,
2233    ! RuleConfidence.),best5.3); end;
2234      					else do;
2235      						if CountTherClassChronic6m <= 6 then do; PopClass=3; Rule=7; RuleConfidence=inpu
76                                       The WPS System      16:10 Monday, October 29, 2018     

2235    ! t(put(Rule,RuleConfidence.),best5.3); end;
2236      						else do; PopClass=5; Rule=8; RuleConfidence=input(put(Rule,RuleConfidence.),best
2236    ! 5.3); end;
2237      					end;
2238      				end;
2239      				else do; PopClass=5; Rule=9; RuleConfidence=input(put(Rule,RuleConfidence.),best5.
2239    ! 3); end;
2240      			end;
2241      		end;
2242      	end;
2243      	else do; PopClass=6; Rule=10; RuleConfidence=input(put(Rule,RuleConfidence.),best5.3)
2243    ! ; end;
2244      end;
2245      else do;
2246      	if CountAdm3mAll <= 0 then do; PopClass=6; Rule=11; RuleConfidence=input(put(Rule,Rul
2246    ! eConfidence.),best5.3); end;
2247      	else do;
2248      		if Count6mERChronic <= 0 then do; PopClass=10; Rule=12; RuleConfidence=input(put(Rul
2248    ! e,RuleConfidence.),best5.3); end;
2249      		else do; PopClass=7; Rule=13; RuleConfidence=input(put(Rule,RuleConfidence.),best5.3
2249    ! ); end;
2250      	end;
2251      end;
2252      run;

NOTE: 1798 observations were read from "TEMP.AllModelInputs"
NOTE: Data set "TEMP.DTModel" has 1798 observation(s) and 64 variable(s)
NOTE: The data step took :
      real time : 0.102
      cpu time  : 0.009


2253      proc export
2254      	data=temp.DTModel
2255      	outfile="&outpath./DTModel&version..csv"
2256      	replace;
2257      run;
NOTE: Procedure export step took :
      real time : 0.001
      cpu time  : 0.000


2258      data _null_;
2259        file '/rpscan/u071439/output/31DEC2015Enrolids2000_10292018/DTModel31DEC2015Enrolids
2259    ! 2000_10292018.csv' delimiter=',' DSD DROPOVER LRECL=1192;
2260        format ENROLID BEST12.;
2261        format AssignmentFinal $1.;
2262        format Count3mOV BEST12.;
2263        format Count12mOV BEST12.;
2264        format Count3mOVChronic BEST12.;
2265        format Count6mOVChronic BEST12.;
2266        format Count3mOVChronicSpecialist BEST12.;
2267        format Count6mOVChronicSpecialist BEST12.;
77                                       The WPS System      16:10 Monday, October 29, 2018     

2268        format Count3mOVSpecialties BEST12.;
2269        format Count3mOVChronicSpecialties BEST12.;
2270        format Count3mER BEST12.;
2271        format Count12mER BEST12.;
2272        format Count3mERChronic BEST12.;
2273        format Count6mERChronic BEST12.;
2274        format DaysER BEST12.;
2275        format DaysMajorER BEST12.;
2276        format DaysHH BEST12.;
2277        format DaysMajorSurg BEST12.;
2278        format DaysOxygen BEST12.;
2279        format Days3mLTC BEST12.;
2280        format flag3mLTC BEST12.;
2281        format CountAdm3mAll BEST12.;
2282        format CountAdm3mChronic BEST12.;
2283        format CountAdm6mAll BEST12.;
2284        format CountAdm6mChronic BEST12.;
2285        format SumLOS3mAll BEST12.;
2286        format DaysAnyAdm BEST12.;
2287        format DaysChronicAdm BEST12.;
2288        format DaysSurgAdm BEST12.;
2289        format DaysMedicalAdm BEST12.;
2290        format DaysMtrntyAdm BEST12.;
2291        format DaysMHSAAdm BEST12.;
2292        format FlagChronicRx BEST12.;
2293        format FlagNewChronicRx BEST12.;
2294        format CountDaysSupp3m BEST12.;
2295        format CountDaysSupp6m BEST12.;
2296        format CountDaysSuppChronic3m BEST12.;
2297        format CountDaysSuppChronic6m BEST12.;
2298        format CountDaysSuppOpiates3m BEST12.;
2299        format CountDaysSuppOpiates6m BEST12.;
2300        format CountTherClass3m BEST12.;
2301        format CountTherClass6m BEST12.;
2302        format CountTherClassChronic3m BEST12.;
2303        format CountTherClassChronic6m BEST12.;
2304        format flag12mMHSA BEST12.;
2305        format flag3mGYN BEST12.;
2306        format Count3mAcuteStage3 BEST12.;
2307        format Count3mChronicStage3 BEST12.;
2308        format Count6mChronicStage3 BEST12.;
2309        format Count3mAcuteSign BEST12.;
2310        format Count3mChronicSign BEST12.;
2311        format Count6mChronicSign BEST12.;
2312        format Count12mChronicSign BEST12.;
2313        format Count3mAcute BEST12.;
2314        format Count6mAcute BEST12.;
2315        format Count3mChronic BEST12.;
2316        format Count12mChronic BEST12.;
2317        format Count3mBody BEST12.;
2318        format Count3mBodySign BEST12.;
2319        format flag3mNewChronicSign BEST12.;
2320        format Days3mStage3 BEST12.;
78                                       The WPS System      16:10 Monday, October 29, 2018     

2321        format PopClass BEST12.;
2322        format Rule BEST12.;
2323        format RuleConfidence BEST12.;
2324        if _n_=1 then do;
2325            put
2326               'ENROLID'        ','
2327               'AssignmentFinal'        ','
2328               'Count3mOV'        ','
2329               'Count12mOV'        ','
2330               'Count3mOVChronic'        ','
2331               'Count6mOVChronic'        ','
2332               'Count3mOVChronicSpecialist'        ','
2333               'Count6mOVChronicSpecialist'        ','
2334               'Count3mOVSpecialties'        ','
2335               'Count3mOVChronicSpecialties'        ','
2336               'Count3mER'        ','
2337               'Count12mER'        ','
2338               'Count3mERChronic'        ','
2339               'Count6mERChronic'        ','
2340               'DaysER'        ','
2341               'DaysMajorER'        ','
2342               'DaysHH'        ','
2343               'DaysMajorSurg'        ','
2344               'DaysOxygen'        ','
2345               'Days3mLTC'        ','
2346               'flag3mLTC'        ','
2347               'CountAdm3mAll'        ','
2348               'CountAdm3mChronic'        ','
2349               'CountAdm6mAll'        ','
2350               'CountAdm6mChronic'        ','
2351               'SumLOS3mAll'        ','
2352               'DaysAnyAdm'        ','
2353               'DaysChronicAdm'        ','
2354               'DaysSurgAdm'        ','
2355               'DaysMedicalAdm'        ','
2356               'DaysMtrntyAdm'        ','
2357               'DaysMHSAAdm'        ','
2358               'FlagChronicRx'        ','
2359               'FlagNewChronicRx'        ','
2360               'CountDaysSupp3m'        ','
2361               'CountDaysSupp6m'        ','
2362               'CountDaysSuppChronic3m'        ','
2363               'CountDaysSuppChronic6m'        ','
2364               'CountDaysSuppOpiates3m'        ','
2365               'CountDaysSuppOpiates6m'        ','
2366               'CountTherClass3m'        ','
2367               'CountTherClass6m'        ','
2368               'CountTherClassChronic3m'        ','
2369               'CountTherClassChronic6m'        ','
2370               'flag12mMHSA'        ','
2371               'flag3mGYN'        ','
2372               'Count3mAcuteStage3'        ','
2373               'Count3mChronicStage3'        ','
79                                       The WPS System      16:10 Monday, October 29, 2018     

2374               'Count6mChronicStage3'        ','
2375               'Count3mAcuteSign'        ','
2376               'Count3mChronicSign'        ','
2377               'Count6mChronicSign'        ','
2378               'Count12mChronicSign'        ','
2379               'Count3mAcute'        ','
2380               'Count6mAcute'        ','
2381               'Count3mChronic'        ','
2382               'Count12mChronic'        ','
2383               'Count3mBody'        ','
2384               'Count3mBodySign'        ','
2385               'flag3mNewChronicSign'        ','
2386               'Days3mStage3'        ','
2387               'PopClass'        ','
2388               'Rule'        ','
2389               'RuleConfidence';
2390          end;
2391        set temp.DTModel;
2392        put ENROLID @;
2393        put AssignmentFinal @;
2394        put Count3mOV @;
2395        put Count12mOV @;
2396        put Count3mOVChronic @;
2397        put Count6mOVChronic @;
2398        put Count3mOVChronicSpecialist @;
2399        put Count6mOVChronicSpecialist @;
2400        put Count3mOVSpecialties @;
2401        put Count3mOVChronicSpecialties @;
2402        put Count3mER @;
2403        put Count12mER @;
2404        put Count3mERChronic @;
2405        put Count6mERChronic @;
2406        put DaysER @;
2407        put DaysMajorER @;
2408        put DaysHH @;
2409        put DaysMajorSurg @;
2410        put DaysOxygen @;
2411        put Days3mLTC @;
2412        put flag3mLTC @;
2413        put CountAdm3mAll @;
2414        put CountAdm3mChronic @;
2415        put CountAdm6mAll @;
2416        put CountAdm6mChronic @;
2417        put SumLOS3mAll @;
2418        put DaysAnyAdm @;
2419        put DaysChronicAdm @;
2420        put DaysSurgAdm @;
2421        put DaysMedicalAdm @;
2422        put DaysMtrntyAdm @;
2423        put DaysMHSAAdm @;
2424        put FlagChronicRx @;
2425        put FlagNewChronicRx @;
2426        put CountDaysSupp3m @;
80                                       The WPS System      16:10 Monday, October 29, 2018     

2427        put CountDaysSupp6m @;
2428        put CountDaysSuppChronic3m @;
2429        put CountDaysSuppChronic6m @;
2430        put CountDaysSuppOpiates3m @;
2431        put CountDaysSuppOpiates6m @;
2432        put CountTherClass3m @;
2433        put CountTherClass6m @;
2434        put CountTherClassChronic3m @;
2435        put CountTherClassChronic6m @;
2436        put flag12mMHSA @;
2437        put flag3mGYN @;
2438        put Count3mAcuteStage3 @;
2439        put Count3mChronicStage3 @;
2440        put Count6mChronicStage3 @;
2441        put Count3mAcuteSign @;
2442        put Count3mChronicSign @;
2443        put Count6mChronicSign @;
2444        put Count12mChronicSign @;
2445        put Count3mAcute @;
2446        put Count6mAcute @;
2447        put Count3mChronic @;
2448        put Count12mChronic @;
2449        put Count3mBody @;
2450        put Count3mBodySign @;
2451        put flag3mNewChronicSign @;
2452        put Days3mStage3 @;
2453        put PopClass @;
2454        put Rule @;
2455        put RuleConfidence;
2456      run;

NOTE: The file
      '/rpscan/u071439/output/31DEC2015Enrolids2000_10292018/DTModel31DEC2015Enrolids2000_102920
      18.csv' is:
      File
      Name=/rpscan/u071439/output/31DEC2015Enrolids2000_10292018/DTModel31DEC2015Enrolids2000_10
      292018.csv,
      Access Permissions=-rw-rw-r--, Number of Links=1,
      Owner Name=u071439, Group Name=devl,
      File Size=0, Last Modified=17:22:18 Oct 29 2018,
      Created=17:22:18 Oct 29 2018, Lrecl=1192, Recfm=V

NOTE: 1799 records were written to file
      '/rpscan/u071439/output/31DEC2015Enrolids2000_10292018/DTModel31DEC2015Enrolids2000_102920
      18.csv'
      The minimum record length was 153
      The maximum record length was 1005
NOTE: 1798 observations were read from "TEMP.DTModel"
NOTE: The data step took :
      real time : 0.094
      cpu time  : 0.032


81                                       The WPS System      16:10 Monday, October 29, 2018     

2457      FILENAME ##EXPOUT CLEAR;
2458      
2459      
2460      *** TREATMENT NAVIGATION ***;
2461      *** transpose the DxCat;
2462      data trash517_1(/*keep=enrolid svcdate DxCat DxStage*/ drop=dxcat1-dxcat4 dxstage1-dxs
2462    ! tage4 dx1-dx4 i);
2463      	set temp.SampleIPOPwDS1;	
2464      	array c[4] dxcat1  -dxcat4;
2465      	array s[4] dxstage1-dxstage4;
2466      	do i=1 to 4;
2467      		if
2468      			missing(c[i])=0 and
2469      			^(rec_type='O' and (substr(svcscat,4,2) in (&SvcCatExclusionList.) or proc1 in (&Pr
2469    ! ocExclusionList.)))
2470      		then do;
2471      			DxCat=c[i];
2472      			DxStage=s[i];
2473      			output;
2474      		end;
2475      	end;
2476      run;

NOTE: 34163 observations were read from "TEMP.SampleIPOPwDS1"
NOTE: Data set "WORK.trash517_1" has 24926 observation(s) and 14 variable(s)
NOTE: The data step took :
      real time : 0.284
      cpu time  : 0.048


2477      
2478      *** Select patient who qualify as Treatment Navigation in the past 30 days;
2479      proc sql;
2480      
2481      create table trash517_2 as select distinct
2482      	a.enrolid,
2483      	a.Dxcat,
2484      	b.condition
2485      from
2486      	trash517_1 as a
2487      inner join
2488      	temp.TreatmentNavigation as b
2489      on
2490      	a.DxCat=b.DxCat and
2491      	a.DxStage=b.stage
2492      where
2493      	svcdate > &StartDate. - 30;
NOTE: Data set "WORK.trash517_2" has 0 observation(s) and 3 variable(s)
2494      
2495      *** find the previous conditions for same dxcat and stage in the past year (366 days);
2496      create table trash517_3 as select distinct
2497      	a.enrolid,
2498      	b.condition
82                                       The WPS System      16:10 Monday, October 29, 2018     

2499      from
2500      	trash517_1 as a
2501      inner join
2502      	temp.TreatmentNavigation as b
2503      on
2504      	a.DxCat=b.DxCat and
2505      	a.DxStage=b.stage
2506      where
2507      	&StartDate. - 30 >= svcdate > &StartDate. - 366;
NOTE: Data set "WORK.trash517_3" has 332 observation(s) and 2 variable(s)
2508      
2509      *** join with the new patients found previously;
2510      create table trash517_4 as select
2511      	a.*,
2512      	1-missing(b.condition) as FlagPriorTrNav
2513      from
2514      	trash517_2 as a
2515      left join
2516      	trash517_3 as b
2517      on
2518      	a.enrolid=b.enrolid and
2519      	a.condition=b.condition
2520      order by
2521      	a.enrolid,
2522      	a.DxCat;
NOTE: Data set "WORK.trash517_4" has 0 observation(s) and 4 variable(s)
2523      
2524      *** find the higher stages for any dxcat in the past 366 days;
2525      create table trash517_5 as select distinct
2526      	a.enrolid,
2527      	b.condition,
2528      	b.max_TrNavStage
2529      from
2530      	trash517_1 as a
2531      inner join
2532      	(select distinct dxcat, condition, max(stage) as max_TrNavStage from temp.TreatmentNa
2532    ! vigation group by dxcat) as b
2533      on
2534      	a.DxCat=b.DxCat and
2535      	a.DxStage>b.max_TrNavStage
2536      where
2537      	svcdate > &StartDate. - 366;
NOTE: Summary results are required to be remerged with the original data
NOTE: View opening spill file for output observations.
NOTE: Data set "WORK.trash517_5" has 31 observation(s) and 3 variable(s)
2538      
2539      *** join with the new patients found previously									*************** <<<<<<<<------
2539    ! ---- Put all model+rules together;
2540      create table temp.TrNav as select distinct
2541      	a.enrolid,
2542      	1 as FlagTrNav,
2543      	4 as PopClass,
2544      	a.FlagPriorTrNav,
83                                       The WPS System      16:10 Monday, October 29, 2018     

2545      	1-missing(b.max_TrNavStage) as FlagHigherStage
2546      from
2547      	trash517_4 as a
2548      left join
2549      	trash517_5 as b
2550      on
2551      	a.enrolid=b.enrolid and
2552      	a.condition=b.condition
2553      where
2554      	a.FlagPriorTrNav=0 and missing(b.max_TrNavStage)=1
2555      order by
2556      	a.enrolid;
NOTE: Data set "TEMP.TrNav" has 0 observation(s) and 5 variable(s)
2557      quit;
NOTE: Procedure sql step took :
      real time : 0.926
      cpu time  : 0.047


2558      
2559      proc export
2560      	data=temp.TrNav
2561      	outfile="&outpath./TreatmentNavigation&version..csv"
2562      	replace;
2563      run;
NOTE: Procedure export step took :
      real time : 0.000
      cpu time  : 0.000


2564      data _null_;
2565        file '/rpscan/u071439/output/31DEC2015Enrolids2000_10292018/TreatmentNavigation31DEC
2565    ! 2015Enrolids2000_10292018.csv' delimiter=',' DSD DROPOVER LRECL=80;
2566        format enrolid BEST12.;
2567        format FlagTrNav BEST12.;
2568        format PopClass BEST12.;
2569        format FlagPriorTrNav BEST12.;
2570        format FlagHigherStage BEST12.;
2571        if _n_=1 then do;
2572            put
2573               'enrolid'        ','
2574               'FlagTrNav'        ','
2575               'PopClass'        ','
2576               'FlagPriorTrNav'        ','
2577               'FlagHigherStage';
2578          end;
2579        set temp.TrNav;
2580        put enrolid @;
2581        put FlagTrNav @;
2582        put PopClass @;
2583        put FlagPriorTrNav @;
2584        put FlagHigherStage;
2585      run;
84                                       The WPS System      16:10 Monday, October 29, 2018     


NOTE: The file
      '/rpscan/u071439/output/31DEC2015Enrolids2000_10292018/TreatmentNavigation31DEC2015Enrolid
      s2000_10292018.csv' is:
      File
      Name=/rpscan/u071439/output/31DEC2015Enrolids2000_10292018/TreatmentNavigation31DEC2015Enr
      olids2000_10292018.csv,
      Access Permissions=-rw-rw-r--, Number of Links=1,
      Owner Name=u071439, Group Name=devl,
      File Size=0, Last Modified=17:22:19 Oct 29 2018,
      Created=17:22:19 Oct 29 2018, Lrecl=80, Recfm=V

NOTE: 1 record was written to file
      '/rpscan/u071439/output/31DEC2015Enrolids2000_10292018/TreatmentNavigation31DEC2015Enrolid
      s2000_10292018.csv'
      The minimum record length was 57
      The maximum record length was 57
NOTE: 0 observations were read from "TEMP.TrNav"
NOTE: The data step took :
      real time : 0.005
      cpu time  : 0.001


2586      FILENAME ##EXPOUT CLEAR;
2587      
2588      
2589      *** SURVEILLANCE ***;
2590      *** transpose the Dxcat + Stage to have one per record, also apply the exclusion crite
2590    ! ria;
2591      data trash518_1(keep=enrolid svcdate rec_type svcscat proc1 DxCat DxStage);
2592      	set temp.SampleIPOPwDS1;
2593      	where svcdate > &StartDate. - 90;	
2594      	array c[4] dxcat1  -dxcat4;
2595      	array s[4] dxstage1-dxstage4;
2596      	do i=1 to 4;
2597      		if (rec_type='O' and (substr(svcscat,4,2) in (&SvcCatExclusionList.) or proc1 in (&P
2597    ! rocExclusionList.))) then c[i]=' ';
2598      		if
2599      			(missing(c[i])=0 or missing(proc1)=0)
2600      		then do;
2601      			DxCat=c[i];
2602      			DxStage=s[i];
2603      			output;
2604      		end;
2605      	end;
2606      run;

NOTE: 9230 observations were read from "TEMP.SampleIPOPwDS1"
NOTE: Data set "WORK.trash518_1" has 34592 observation(s) and 7 variable(s)
NOTE: The data step took :
      real time : 0.173
      cpu time  : 0.023

85                                       The WPS System      16:10 Monday, October 29, 2018     


2607      
2608      *** join the IP+OP data with HCPCxWalkPROCGRP to bring the PROCGRP codes;
2609      proc sql;
2610      create table trash518_2 as select
2611      	a.enrolid,
2612      	a.svcdate,
2613      	a.dxcat,
2614      	a.dxstage,
2615      	a.proc1,
2616      	a.svcscat,
2617      	a.rec_type,
2618      	b.ProcGRP
2619      from
2620      	trash518_1 as a
2621      left join
2622      	temp.HcpcXwalkGRP as b
2623      on
2624      	a.proc1=b.hcpc
2625      order by
2626      	a.enrolid;
NOTE: Data set "WORK.trash518_2" has 34592 observation(s) and 8 variable(s)
2627      quit;
NOTE: Procedure sql step took :
      real time : 0.965
      cpu time  : 0.186


2628      
2629      *** create the flags for General Active Cancer;
2630      data trash518_3(keep=enrolid flag_GeneralActiveCancer);
2631      set trash518_2;	
2632      by enrolid;
2633      retain flag_SurvActiveCancerDxcat flag_SurvActiveCancerProcGRP 0;
2634      if first.enrolid then do;
2635      	flag_SurvActiveCancerDxcat=0;
2636      	flag_SurvActiveCancerProcGRP=0;
2637      end;
2638      if
2639      	put(dxcat,$SurvActiveCancerDxcat.)='Y'
2640      then
2641      	flag_SurvActiveCancerDxcat=1;
2642      if
2643      	put(dxcat,$SurvActiveCancerPxDxcat.)='Y'	or
2644      	put(ProcGRP,SurvActiveCancerPROCGRP.)='Y'
2645      then
2646      	flag_SurvActiveCancerProcGRP=1;
2647      flag_GeneralActiveCancer=flag_SurvActiveCancerDxcat * flag_SurvActiveCancerProcGRP;
2648      if last.enrolid and flag_SurvActiveCancerDxcat=1 and flag_SurvActiveCancerProcGRP=1 th
2648    ! en output;
2649      run;

NOTE: 34592 observations were read from "WORK.trash518_2"
86                                       The WPS System      16:10 Monday, October 29, 2018     

NOTE: Data set "WORK.trash518_3" has 0 observation(s) and 2 variable(s)
NOTE: The data step took :
      real time : 0.148
      cpu time  : 0.035


2650      
2651      *** join with the Specific Cancer by Dxcat;
2652      proc sql;
2653      create table trash518_4 as select distinct
2654      	a.enrolid,
2655      	a.dxcat,
2656      	b.PROCGRP as ProcGRP_Specific
2657      from
2658      	trash518_2 as a
2659      inner join
2660      	temp.SurvSpecificActiveCancer as b
2661      on
2662      	a.dxcat=b.dxcat and
2663      	a.dxstage>=b.stage;
NOTE: Data set "WORK.trash518_4" has 0 observation(s) and 3 variable(s)
2664      
2665      
2666      *** join with the Specific Cancer by PROCGRP;
NOTE: Procedure sql step took :
      real time : 0.093
      cpu time  : 0.005


2667      proc sql;
2668      create table trash518_5 as select distinct
2669      	a.enrolid,
2670      	a.PROCGRP
2671      from
2672      	trash518_2 as a
2673      inner join
2674      	temp.SurvSpecificActiveCancer as b
2675      on
2676      	a.procgrp=b.procgrp;
NOTE: Data set "WORK.trash518_5" has 13 observation(s) and 2 variable(s)
2677      
2678      
2679      *** Create Flag for Specific Active Cancer (join the previous selected based on DxCat 
2679    ! with Specific Cancer by PROCGRP);
NOTE: Procedure sql step took :
      real time : 0.130
      cpu time  : 0.009


2680      proc sql;
2681      create table trash518_6 as select distinct
2682      	a.enrolid,
2683      	1 as flag_SpecificActiveCancer
87                                       The WPS System      16:10 Monday, October 29, 2018     

2684      from
2685      	trash518_4 as a
2686      inner join
2687      	trash518_5 as b
2688      on
2689      	a.enrolid=b.enrolid and
2690      	a.ProcGRP_Specific=b.ProcGRP
2691      order by
2692      	a.enrolid;
NOTE: Data set "WORK.trash518_6" has 0 observation(s) and 2 variable(s)
2693      
2694      *** Flag for Miscellaneous DRG;
NOTE: Procedure sql step took :
      real time : 0.076
      cpu time  : 0.002


2695      proc sql;
2696      create table trash518_7 as select distinct
2697      	enrolid,
2698      	1 as flag_Miscellaneous
2699      from
2700      	temp.SampleInp1 		as a
2701      inner join
2702      	temp.SurvMiscellaneous	as b
2703      on
2704      	a.DRG=b.Code and
2705      	b.CodeType='DRG' and
2706      	a.admdate > &StartDate. - 90
2707      order by
2708      	enrolid;
NOTE: Data set "WORK.trash518_7" has 1 observation(s) and 2 variable(s)
2709      
2710      *** select from ChemoActive;
NOTE: Procedure sql step took :
      real time : 0.148
      cpu time  : 0.004


2711      proc sql;
2712      create table trash518_8 as select distinct
2713      	enrolid,
2714      	1 as flag_ChemoActive
2715      from
2716      	temp.SampleRx1 			as a
2717      inner join
2718      	temp.SurvChemoActive	as b
2719      on
2720      	a.ndcnum=b.ndc and
2721      	a.svcdate > &StartDate. - 90
2722      order by
2723      	enrolid;
NOTE: Data set "WORK.trash518_8" has 3 observation(s) and 2 variable(s)
88                                       The WPS System      16:10 Monday, October 29, 2018     

2724      
2725      *** select from ChemoChronic;
NOTE: Procedure sql step took :
      real time : 0.203
      cpu time  : 0.008


2726      proc sql;
2727      create table trash518_9 as select distinct
2728      	enrolid
2729      from
2730      	temp.SampleRx1 			as a
2731      inner join
2732      	temp.SurvChemoChronic	as b
2733      on
2734      	a.ndcnum=b.ndc and
2735      	a.svcdate > &StartDate. - 90;
NOTE: Data set "WORK.trash518_9" has 3 observation(s) and 1 variable(s)
NOTE: Procedure sql step took :
      real time : 0.187
      cpu time  : 0.007


2736      proc sql;
2737      create table trash518_10 as select distinct
2738      	enrolid
2739      from
2740      	temp.SampleRx1 			as a
2741      inner join
2742      	temp.SurvChemoChronic	as b
2743      on
2744      	a.ndcnum=b.ndc and
2745      	a.svcdate <= &StartDate. - 90;
NOTE: Data set "WORK.trash518_10" has 3 observation(s) and 1 variable(s)
NOTE: Procedure sql step took :
      real time : 0.147
      cpu time  : 0.006


2746      proc sql;
2747      create table trash518_11 as select distinct
2748      	a.enrolid,
2749      	1 as flag_ChemoChronic
2750      from
2751      	trash518_9 	as a
2752      left join
2753      	trash518_10	as b
2754      on
2755      	a.enrolid=b.enrolid
2756      where
2757      	a.enrolid ne b.enrolid
2758      order by
2759      	a.enrolid;
89                                       The WPS System      16:10 Monday, October 29, 2018     

NOTE: Data set "WORK.trash518_11" has 1 observation(s) and 2 variable(s)
2760      
2761      *** put them all together for Surveillance													*************** <<<<<<<<-------
2761    ! --- Put all model+rules together;
NOTE: Procedure sql step took :
      real time : 0.088
      cpu time  : 0.002


2762      data temp.Surv;
2763      merge
2764      	trash518_3
2765      	trash518_6
2766      	trash518_7
2767      	trash518_8
2768      	trash518_11;
2769      by enrolid;
2770      FlagSurv=1;
2771      PopClass=9;
2772      run;

NOTE: 0 observations were read from "WORK.trash518_3"
NOTE: 0 observations were read from "WORK.trash518_6"
NOTE: 1 observations were read from "WORK.trash518_7"
NOTE: 3 observations were read from "WORK.trash518_8"
NOTE: 1 observations were read from "WORK.trash518_11"
NOTE: Data set "TEMP.Surv" has 5 observation(s) and 8 variable(s)
NOTE: The data step took :
      real time : 0.039
      cpu time  : 0.001


2773      
2774      proc export
2775      	data=temp.Surv
2776      	outfile="&outpath./Surveillance&version..csv"
2777      	replace;
2778      run;
NOTE: Procedure export step took :
      real time : 0.001
      cpu time  : 0.000


2779      data _null_;
2780        file '/rpscan/u071439/output/31DEC2015Enrolids2000_10292018/Surveillance31DEC2015Enr
2780    ! olids2000_10292018.csv' delimiter=',' DSD DROPOVER LRECL=160;
2781        format enrolid BEST12.;
2782        format flag_GeneralActiveCancer BEST12.;
2783        format flag_SpecificActiveCancer BEST12.;
2784        format flag_Miscellaneous BEST12.;
2785        format flag_ChemoActive BEST12.;
2786        format flag_ChemoChronic BEST12.;
2787        format FlagSurv BEST12.;
90                                       The WPS System      16:10 Monday, October 29, 2018     

2788        format PopClass BEST12.;
2789        if _n_=1 then do;
2790            put
2791               'enrolid'        ','
2792               'flag_GeneralActiveCancer'        ','
2793               'flag_SpecificActiveCancer'        ','
2794               'flag_Miscellaneous'        ','
2795               'flag_ChemoActive'        ','
2796               'flag_ChemoChronic'        ','
2797               'FlagSurv'        ','
2798               'PopClass';
2799          end;
2800        set temp.Surv;
2801        put enrolid @;
2802        put flag_GeneralActiveCancer @;
2803        put flag_SpecificActiveCancer @;
2804        put flag_Miscellaneous @;
2805        put flag_ChemoActive @;
2806        put flag_ChemoChronic @;
2807        put FlagSurv @;
2808        put PopClass;
2809      run;

NOTE: The file
      '/rpscan/u071439/output/31DEC2015Enrolids2000_10292018/Surveillance31DEC2015Enrolids2000_1
      0292018.csv' is:
      File
      Name=/rpscan/u071439/output/31DEC2015Enrolids2000_10292018/Surveillance31DEC2015Enrolids20
      00_10292018.csv,
      Access Permissions=-rw-rw-r--, Number of Links=1,
      Owner Name=u071439, Group Name=devl,
      File Size=0, Last Modified=17:22:22 Oct 29 2018,
      Created=17:22:22 Oct 29 2018, Lrecl=160, Recfm=V

NOTE: 6 records were written to file
      '/rpscan/u071439/output/31DEC2015Enrolids2000_10292018/Surveillance31DEC2015Enrolids2000_1
      0292018.csv'
      The minimum record length was 18
      The maximum record length was 130
NOTE: 5 observations were read from "TEMP.Surv"
NOTE: The data step took :
      real time : 0.011
      cpu time  : 0.001


2810      FILENAME ##EXPOUT CLEAR;
2811      
2812      
2813      *** REBALANCE ***;
2814      
2815      *** transpose the Dxcat + Stage to have one per record, also apply the exclusion crite
2815    ! ria. Similar to 518_1 and 518_2 but save ICD9 too;
2816      data trash519_1(keep=enrolid svcdate svcscat Dx DxCat DxStage fac_prof proc1 rec_type)
91                                       The WPS System      16:10 Monday, October 29, 2018     

2816    ! ;
2817      	set temp.SampleIPOPwDS1;
2818      	array d[4] dx1-dx4;
2819      	array c[4] dxcat1  -dxcat4;
2820      	array s[4] dxstage1-dxstage4;
2821      	do i=1 to 4;
2822      		if (rec_type='O' and (substr(svcscat,4,2) in (&SvcCatExclusionList.) or proc1 in (&P
2822    ! rocExclusionList.))) then do;
2823      			c[i]=' ';
2824      			d[i]=' ';
2825      		end;
2826      		if
2827      			(missing(c[i])=0 or missing(proc1)=0 or missing(d[i])=0)
2828      		then do;
2829      			DxCat=c[i];
2830      			DxStage=s[i];
2831      			Dx=d[i];
2832      			output;
2833      		end;
2834      	end;
2835      run;

NOTE: 34163 observations were read from "TEMP.SampleIPOPwDS1"
NOTE: Data set "WORK.trash519_1" has 129123 observation(s) and 9 variable(s)
NOTE: The data step took :
      real time : 0.284
      cpu time  : 0.083


2836      
2837      *** join the IP+OP data with HCPCxWalkPROCGRP to bring the PROCGRP codes, same as 518_
2837    ! 2;
2838      proc sql;
2839      create table trash519_2 as select
2840      	a.enrolid,
2841      	a.svcdate,
2842      	a.dx,
2843      	a.dxcat,
2844      	a.dxstage,
2845      	a.proc1,
2846      	a.svcscat,
2847      	a.rec_type,
2848      	a.fac_prof,
2849      	b.ProcGRP
2850      from
2851      	trash519_1 as a
2852      left join
2853      	temp.HcpcXwalkGRP as b
2854      on
2855      	a.proc1=b.hcpc
2856      order by
2857      	a.enrolid;
NOTE: Data set "WORK.trash519_2" has 129123 observation(s) and 10 variable(s)
92                                       The WPS System      16:10 Monday, October 29, 2018     

2858      quit;
NOTE: Procedure sql step took :
      real time : 1.370
      cpu time  : 0.448


2859      
2860      *** Rebalance based on a condition being present in the last 90 days regardless of pri
2860    ! or claims                                    <<<------ for REBALANCE final merge;
2861      proc sql;
2862      create table trash519_3 as select distinct *
2863      from
2864      /* based on PSY in ER or certain DxCats from both inp and otp */
2865      	(select distinct
2866      		enrolid,
2867      		1 as flag_NewCondNoHistCheck
2868      	from trash519_2
2869      	where
2870              svcdate > &StartDate. - 90  and
2871              (((DxCat in (&ConditionDxCat.) and DxStage >= &ConditionDxCatStage.)          
2871    !                or
2872              (substr(DxCat,1,3) in (&ConditionDxCatER.) and fac_prof='F' and    substr(svcs
2872    ! cat,4,2)="20"))      or
2873              procGRP in (&ConditionProcGRP.)))
2874      union
2875      /* based on DRG and mental admissions from inpatient data */
2876      	(select distinct
2877      		enrolid,
2878      		1 as flag_Cond
2879      	from temp.SampleInp1
2880      	where
2881              disdate >= &StartDate. - 90 and
2882              (put(drg,z3.) in (&ConditionDRG.)        or
2883              admtyp in (&ConditionAdminType.)))
2884      order by
2885      	enrolid;
NOTE: View opening spill file for output observations.
NOTE: Data set "WORK.trash519_3" has 3 observation(s) and 2 variable(s)
2886      quit;
NOTE: Procedure sql step took :
      real time : 0.466
      cpu time  : 0.027


2887      
2888      
2889      *** Rebalance based on new DxCat in the past 30 days AND there were not present before
2889    ! ;
2890      proc sql;
2891      
2892      * identify all patients who match the list of new DxCat in the past 90 days, keep the 
2892    ! first day of the encounter for future use with the exclusion of the Rx drugs;
2893      create table trash519_4 as select
93                                       The WPS System      16:10 Monday, October 29, 2018     

2894      	a.enrolid,
2895      	a.DxCat,
2896      	min(a.svcdate) as FirstDate format=date7.
2897      from
2898      	trash519_1 as a,
2899      	temp.RebalanceNewDxCat as b
2900      where
2901      	a.DxCat=b.DxCat 				and
2902      	a.DxStage>=b.Stage			and
2903      	a.svcdate > &StartDate. - 90
2904      group by
2905      	a.enrolid,
2906      	a.DxCat;
NOTE: Data set "WORK.trash519_4" has 0 observation(s) and 3 variable(s)
2907      * identify all patients who match the list of new DxCat in the past year, before 90 da
2907    ! ys, in order to exclude them when matching with the new ones;
2908      create table trash519_5 as select distinct
2909      	a.enrolid,
2910      	a.DxCat
2911      from
2912      	trash519_1 as a,
2913      	temp.RebalanceNewDxCat as b
2914      where
2915      	a.DxCat=b.DxCat 				and
2916      	a.DxStage>=b.StageHistory		and
2917      	a.svcdate <= &StartDate. - 90
2918      order by
2919      	a.enrolid,
2920      	a.DxCat;
NOTE: Data set "WORK.trash519_5" has 181 observation(s) and 2 variable(s)
2921      * exclude the patients if they match on the the Rollup of the DxCat (first 3 character
2921    ! s) if they are in both recent 90 days and past 90 days;
2922      create table trash519_6 as select distinct
2923      	a.enrolid
2924      from
2925      	trash519_4 as a
2926      left join
2927      	trash519_5 as b
2928      on
2929      	a.enrolid=b.enrolid and
2930      	substr(a.DxCat,1,3)=substr(b.DxCat,1,3)
2931      where
2932      	substr(a.DxCat,1,3)^=substr(b.DxCat,1,3)
2933      order by
2934      	enrolid;
NOTE: Data set "WORK.trash519_6" has 0 observation(s) and 1 variable(s)
2935      
2936      * select all the claims mathcing the Rx by Therapeutic Class;
2937      create table trash519_7 as select distinct
2938      	a.enrolid,
2939      	a.svcdate format=date7.,
2940      	a.thercls,
2941      	b.DxCat
94                                       The WPS System      16:10 Monday, October 29, 2018     

2942      from
2943      	temp.SampleRx1 as a,
2944      	temp.RebalanceNewDxCatwoRx as b
2945      where
2946      	a.thercls=b.thercls
2947      order by
2948      	a.enrolid,
2949      	a.svcdate;
NOTE: Data set "WORK.trash519_7" has 1672 observation(s) and 4 variable(s)
2950      * match the drug claims with the patients identified with the new DxCats based on the 
2950    ! Dxcat from the exlcusion Rx logic, if the drug is 90 days before the first encounter o
2950    ! f DxCAt then flag it;
2951      create table trash519_8 as select
2952      	a.*,
2953      	b.svcdate,
2954      	b.thercls,
2955      	case when a.FirstDate - b.svcdate > 90 then 1 else 0 end as flag_RxlogicExclude
2956      from
2957      	trash519_4 as a
2958      left join
2959      	trash519_7 as b
2960      on
2961      	a.enrolid=b.enrolid and
2962      	a.DxCat=b.DxCat
2963      order by
2964      	a.enrolid,
2965      	a.DxCat,
2966      	b.SvcDate;
NOTE: Data set "WORK.trash519_8" has 0 observation(s) and 6 variable(s)
2967      * keep only the patients that need to be excluded, having at least a flag of 1;
2968      create table trash519_9 as select
2969      	enrolid
2970      from
2971      	trash519_8
2972      group by
2973      	enrolid
2974      having
2975      	max(flag_RxlogicExclude)=1;
NOTE: Data set "WORK.trash519_9" has 0 observation(s) and 1 variable(s)
2976      * exclude the patients with drugs in the past year                                   <
2976    ! <<------ for REBALANCE final merge;
2977      create table trash519_10 as select distinct
2978      	a.enrolid,
2979      	1 as flag_NewCondDxCat
2980      from
2981      	trash519_6 as a
2982      left join
2983      	trash519_9 as b
2984      on
2985      	a.enrolid=b.enrolid
2986      where
2987      	a.enrolid^=b.enrolid
2988      order by
95                                       The WPS System      16:10 Monday, October 29, 2018     

2989      	enrolid;
NOTE: Data set "WORK.trash519_10" has 0 observation(s) and 2 variable(s)
2990      quit;
NOTE: Procedure sql step took :
      real time : 0.710
      cpu time  : 0.050


2991      
2992      * Rebalance based on new DRG in the past 30 days and no prior history;
2993      proc sql;
2994      * select all members with matching of rebalance new DRG in the past 90 days;
2995      create table trash519_11 as select distinct
2996      	a.enrolid,
2997      	b.description
2998      from
2999      	temp.SampleInp1 as a
3000      inner join
3001      	temp.RebalanceNewDRG as b
3002      on
3003      	/* put(a.drg,z3.)=b.drg */
3004          a.drg = b.drg
3005      where
3006      	a.disdate > &StartDate. - 90
3007      order by
3008      	a.enrolid;
NOTE: Data set "WORK.trash519_11" has 4 observation(s) and 2 variable(s)
3009      * select all members with prior history of rebalance new DRG;
3010      create table trash519_12 as select distinct
3011      	a.enrolid,
3012      	b.description
3013      from
3014      	temp.SampleInp1 as a
3015      inner join
3016      	temp.RebalanceNewDRG as b
3017      on
3018          /* put(a.drg,z3.)=b.drg */
3019      	a.drg=b.drg
3020      where
3021      	a.disdate <= &StartDate. - 90
3022      order by
3023      	a.enrolid;
NOTE: Data set "WORK.trash519_12" has 2 observation(s) and 2 variable(s)
3024      * exclude the patients with DRG in the past                                   <<<-----
3024    ! - for REBALANCE final merge;
3025      create table trash519_13 as select distinct
3026      	a.enrolid,
3027      	1 as flag_NewCondDRG
3028      from
3029      	trash519_11 as a
3030      left join
3031      	trash519_12 as b
3032      on
96                                       The WPS System      16:10 Monday, October 29, 2018     

3033      	a.enrolid=b.enrolid and
3034      	a.description=b.description
3035      where
3036      	a.enrolid^=b.enrolid
3037      order by
3038      	enrolid;
NOTE: Data set "WORK.trash519_13" has 4 observation(s) and 2 variable(s)
3039      quit;
NOTE: Procedure sql step took :
      real time : 0.599
      cpu time  : 0.022


3040      
3041      * Rebalance based on new Dx in the past 30 days and no prior history;
3042      proc sql;
3043      * select all members with matching of rebalance new Dx in the past 90 days;
3044      create table trash519_14 as select distinct
3045      	a.enrolid,
3046      	b.description
3047      from
3048      	trash519_1 as a
3049      inner join
3050      	temp.RebalanceNewDx as b
3051      on
3052      	substr(a.dx,1,4)=b.icd
3053      where
3054      	a.svcdate > &StartDate. - 90
3055      order by
3056      	a.enrolid;
NOTE: Data set "WORK.trash519_14" has 0 observation(s) and 2 variable(s)
3057      * select all members with prior history of rebalance new Dx;
3058      create table trash519_15 as select distinct
3059      	a.enrolid,
3060      	b.description
3061      from
3062      	trash519_1 as a
3063      inner join
3064      	temp.RebalanceNewDx as b
3065      on
3066      	substr(a.dx,1,4)=b.icd
3067      where
3068      	a.svcdate <= &StartDate. - 90
3069      order by
3070      	a.enrolid;
NOTE: Data set "WORK.trash519_15" has 3 observation(s) and 2 variable(s)
3071      * exclude the patients with DRG in the past                                   <<<-----
3071    ! - for REBALANCE final merge;
3072      create table trash519_16 as select distinct
3073      	a.enrolid,
3074      	1 as flag_NewCondDx
3075      from
3076      	trash519_14 as a
97                                       The WPS System      16:10 Monday, October 29, 2018     

3077      left join
3078      	trash519_15 as b
3079      on
3080      	a.enrolid=b.enrolid and
3081      	a.description=b.description
3082      where
3083      	a.enrolid^=b.enrolid
3084      order by
3085      	enrolid;
NOTE: Data set "WORK.trash519_16" has 0 observation(s) and 2 variable(s)
3086      
3087      *** put all REBALANCE pieces together													*************** <<<<<<<<---------- P
3087    ! ut all model+rules together;
NOTE: Procedure sql step took :
      real time : 0.489
      cpu time  : 0.040


3088      data temp.Rebalance;
3089      merge
3090      	trash519_3
3091      	trash519_10
3092      	trash519_13
3093      	trash519_16;
3094      by enrolid;
3095      FlagRebalance=1;
3096      PopClass=8;
3097      run;

NOTE: 3 observations were read from "WORK.trash519_3"
NOTE: 0 observations were read from "WORK.trash519_10"
NOTE: 4 observations were read from "WORK.trash519_13"
NOTE: 0 observations were read from "WORK.trash519_16"
NOTE: Data set "TEMP.Rebalance" has 6 observation(s) and 7 variable(s)
NOTE: The data step took :
      real time : 0.028
      cpu time  : 0.001


3098      
3099      proc export
3100      	data=temp.Rebalance
3101      	outfile="&outpath./Rebalance&version..csv"
3102      	replace;
3103      run;
NOTE: Procedure export step took :
      real time : 0.001
      cpu time  : 0.000


3104      data _null_;
3105        file '/rpscan/u071439/output/31DEC2015Enrolids2000_10292018/Rebalance31DEC2015Enroli
3105    ! ds2000_10292018.csv' delimiter=',' DSD DROPOVER LRECL=127;
98                                       The WPS System      16:10 Monday, October 29, 2018     

3106        format enrolid BEST12.;
3107        format flag_NewCondNoHistCheck BEST12.;
3108        format flag_NewCondDxCat BEST12.;
3109        format flag_NewCondDRG BEST12.;
3110        format flag_NewCondDx BEST12.;
3111        format FlagRebalance BEST12.;
3112        format PopClass BEST12.;
3113        if _n_=1 then do;
3114            put
3115               'enrolid'        ','
3116               'flag_NewCondNoHistCheck'        ','
3117               'flag_NewCondDxCat'        ','
3118               'flag_NewCondDRG'        ','
3119               'flag_NewCondDx'        ','
3120               'FlagRebalance'        ','
3121               'PopClass';
3122          end;
3123        set temp.Rebalance;
3124        put enrolid @;
3125        put flag_NewCondNoHistCheck @;
3126        put flag_NewCondDxCat @;
3127        put flag_NewCondDRG @;
3128        put flag_NewCondDx @;
3129        put FlagRebalance @;
3130        put PopClass;
3131      run;

NOTE: The file
      '/rpscan/u071439/output/31DEC2015Enrolids2000_10292018/Rebalance31DEC2015Enrolids2000_1029
      2018.csv' is:
      File
      Name=/rpscan/u071439/output/31DEC2015Enrolids2000_10292018/Rebalance31DEC2015Enrolids2000_
      10292018.csv,
      Access Permissions=-rw-rw-r--, Number of Links=1,
      Owner Name=u071439, Group Name=devl,
      File Size=0, Last Modified=17:22:26 Oct 29 2018,
      Created=17:22:26 Oct 29 2018, Lrecl=127, Recfm=V

NOTE: 7 records were written to file
      '/rpscan/u071439/output/31DEC2015Enrolids2000_10292018/Rebalance31DEC2015Enrolids2000_1029
      2018.csv'
      The minimum record length was 18
      The maximum record length was 103
NOTE: 6 observations were read from "TEMP.Rebalance"
NOTE: The data step took :
      real time : 0.016
      cpu time  : 0.001


3132      FILENAME ##EXPOUT CLEAR;
3133      
3134      
3135      *** Newborn in the past month by default in Engagement DRG 790 - 795;					************
99                                       The WPS System      16:10 Monday, October 29, 2018     

3135    ! *** <<<<<<<<---------- Put all model+rules together;
3136      proc sql;
3137      * select all members with matching of rebalance new DRG in the past 90 days;
3138      create table temp.Neonates as select distinct
3139      	enrolid,
3140      	DRG,
3141      	1 as FlagNeoNate,
3142      	2 as PopCLass
3143      from
3144      	temp.SampleInp1 as a
3145      where
3146      	admdate > &StartDate. - 30 and
3147      	drg in (&NeonatesDRGList.)
3148      order by
3149      	enrolid;
NOTE: Data set "TEMP.Neonates" has 1 observation(s) and 4 variable(s)
3150      
3151      *** Newborn in the past month by default in Engagement DRG 790 - 795;					************
3151    ! *** <<<<<<<<---------- Put all model+rules together;
NOTE: Procedure sql step took :
      real time : 0.092
      cpu time  : 0.003


3152      proc sql;
3153      * select all members with matching of rebalance new DRG in the past 90 days;
3154      create table temp.Neonates as select distinct
3155      	enrolid,
3156      	DRG,
3157      	1 as FlagNeoNate,
3158      	2 as PopCLass
3159      from
3160      	temp.SampleInp1 as a
3161      where
3162      	admdate > &StartDate. - 30 and
3163      	drg in (&NeonatesDRGList.)
3164      order by
3165      	enrolid;
NOTE: Data set "TEMP.Neonates" has 1 observation(s) and 4 variable(s)
NOTE: Procedure sql step took :
      real time : 0.087
      cpu time  : 0.003


3166      
3167      proc export
3168      	data=temp.NeoNates
3169      	outfile="&outpath./Neonates&version..csv"
3170      	replace;
3171      run;
NOTE: Procedure export step took :
      real time : 0.000
      cpu time  : 0.000
100                                      The WPS System      16:10 Monday, October 29, 2018     



3172      data _null_;
3173        file '/rpscan/u071439/output/31DEC2015Enrolids2000_10292018/Neonates31DEC2015Enrolid
3173    ! s2000_10292018.csv' delimiter=',' DSD DROPOVER LRECL=60;
3174        format ENROLID BEST12.;
3175        format DRG BEST12.;
3176        format FlagNeoNate BEST12.;
3177        format PopCLass BEST12.;
3178        if _n_=1 then do;
3179            put
3180               'ENROLID'        ','
3181               'DRG'        ','
3182               'FlagNeoNate'        ','
3183               'PopCLass';
3184          end;
3185        set temp.NeoNates;
3186        put ENROLID @;
3187        put DRG @;
3188        put FlagNeoNate @;
3189        put PopCLass;
3190      run;

NOTE: The file
      '/rpscan/u071439/output/31DEC2015Enrolids2000_10292018/Neonates31DEC2015Enrolids2000_10292
      018.csv' is:
      File
      Name=/rpscan/u071439/output/31DEC2015Enrolids2000_10292018/Neonates31DEC2015Enrolids2000_1
      0292018.csv,
      Access Permissions=-rw-rw-r--, Number of Links=1,
      Owner Name=u071439, Group Name=devl,
      File Size=0, Last Modified=17:22:26 Oct 29 2018,
      Created=17:22:26 Oct 29 2018, Lrecl=60, Recfm=V

NOTE: 2 records were written to file
      '/rpscan/u071439/output/31DEC2015Enrolids2000_10292018/Neonates31DEC2015Enrolids2000_10292
      018.csv'
      The minimum record length was 17
      The maximum record length was 32
NOTE: 1 observations were read from "TEMP.NeoNates"
NOTE: The data step took :
      real time : 0.012
      cpu time  : 0.001


3191      FILENAME ##EXPOUT CLEAR;
3192      
3193      
3194      
3195      /*********************/
3196      /*** FINAL OUTPUT ***/
3197      /*********************/
3198      *** MERGE All the RULES from SPSS Modela and Janet's logic rules together ***;
101                                      The WPS System      16:10 Monday, October 29, 2018     

3199      proc sql;
3200      create table temp.AllRules as select
3201      	a.*,
3202      	put(a.PopClass,categories.) as PopClassDTModelDescription,
3203      	max(a.PopClass,b.PopClass) as PopClassFinal,
3204      	put(calculated PopClassFinal,categories.) as PopClassFinalDescription,
3205      	case when b.PopClass > a.PopCLass then 1 else 0 end as FlagOverwrite
3206      from
3207      	temp.DTModel as a
3208      left join
3209      	(select
3210      		enrolid,
3211      		max(PopClass) as PopClass
3212      	from
3213      		(select enrolid, PopClass from temp.TrNav union
3214      		 select enrolid, PopClass from temp.Surv union
3215      		 select enrolid, PopClass from temp.Rebalance union
3216      		 select enrolid, PopClass from temp.Neonates)
3217      	group by enrolid) as b
3218      on
3219      	a.enrolid=b.enrolid
3220      order by enrolid;
NOTE: View opening spill file for output observations.
NOTE: View opening spill file for output observations.
NOTE: Data set "TEMP.AllRules" has 1798 observation(s) and 68 variable(s)
3221      quit;
NOTE: Procedure sql step took :
      real time : 0.899
      cpu time  : 0.072


3222      proc export
3223      	data=temp.AllRules
3224      	outfile="&outpath./AllRules&version..csv"
3225      	replace;
3226      run;
NOTE: Procedure export step took :
      real time : 0.001
      cpu time  : 0.000


3227      data _null_;
3228        file '/rpscan/u071439/output/31DEC2015Enrolids2000_10292018/AllRules31DEC2015Enrolid
3228    ! s2000_10292018.csv' delimiter=',' DSD DROPOVER LRECL=1280;
3229        format ENROLID BEST12.;
3230        format AssignmentFinal $1.;
3231        format Count3mOV BEST12.;
3232        format Count12mOV BEST12.;
3233        format Count3mOVChronic BEST12.;
3234        format Count6mOVChronic BEST12.;
3235        format Count3mOVChronicSpecialist BEST12.;
3236        format Count6mOVChronicSpecialist BEST12.;
3237        format Count3mOVSpecialties BEST12.;
102                                      The WPS System      16:10 Monday, October 29, 2018     

3238        format Count3mOVChronicSpecialties BEST12.;
3239        format Count3mER BEST12.;
3240        format Count12mER BEST12.;
3241        format Count3mERChronic BEST12.;
3242        format Count6mERChronic BEST12.;
3243        format DaysER BEST12.;
3244        format DaysMajorER BEST12.;
3245        format DaysHH BEST12.;
3246        format DaysMajorSurg BEST12.;
3247        format DaysOxygen BEST12.;
3248        format Days3mLTC BEST12.;
3249        format flag3mLTC BEST12.;
3250        format CountAdm3mAll BEST12.;
3251        format CountAdm3mChronic BEST12.;
3252        format CountAdm6mAll BEST12.;
3253        format CountAdm6mChronic BEST12.;
3254        format SumLOS3mAll BEST12.;
3255        format DaysAnyAdm BEST12.;
3256        format DaysChronicAdm BEST12.;
3257        format DaysSurgAdm BEST12.;
3258        format DaysMedicalAdm BEST12.;
3259        format DaysMtrntyAdm BEST12.;
3260        format DaysMHSAAdm BEST12.;
3261        format FlagChronicRx BEST12.;
3262        format FlagNewChronicRx BEST12.;
3263        format CountDaysSupp3m BEST12.;
3264        format CountDaysSupp6m BEST12.;
3265        format CountDaysSuppChronic3m BEST12.;
3266        format CountDaysSuppChronic6m BEST12.;
3267        format CountDaysSuppOpiates3m BEST12.;
3268        format CountDaysSuppOpiates6m BEST12.;
3269        format CountTherClass3m BEST12.;
3270        format CountTherClass6m BEST12.;
3271        format CountTherClassChronic3m BEST12.;
3272        format CountTherClassChronic6m BEST12.;
3273        format flag12mMHSA BEST12.;
3274        format flag3mGYN BEST12.;
3275        format Count3mAcuteStage3 BEST12.;
3276        format Count3mChronicStage3 BEST12.;
3277        format Count6mChronicStage3 BEST12.;
3278        format Count3mAcuteSign BEST12.;
3279        format Count3mChronicSign BEST12.;
3280        format Count6mChronicSign BEST12.;
3281        format Count12mChronicSign BEST12.;
3282        format Count3mAcute BEST12.;
3283        format Count6mAcute BEST12.;
3284        format Count3mChronic BEST12.;
3285        format Count12mChronic BEST12.;
3286        format Count3mBody BEST12.;
3287        format Count3mBodySign BEST12.;
3288        format flag3mNewChronicSign BEST12.;
3289        format Days3mStage3 BEST12.;
3290        format PopClass BEST12.;
103                                      The WPS System      16:10 Monday, October 29, 2018     

3291        format Rule BEST12.;
3292        format RuleConfidence BEST12.;
3293        format PopClassDTModelDescription $20.;
3294        format PopClassFinal BEST12.;
3295        format PopClassFinalDescription $20.;
3296        format FlagOverwrite BEST12.;
3297        if _n_=1 then do;
3298            put
3299               'ENROLID'        ','
3300               'AssignmentFinal'        ','
3301               'Count3mOV'        ','
3302               'Count12mOV'        ','
3303               'Count3mOVChronic'        ','
3304               'Count6mOVChronic'        ','
3305               'Count3mOVChronicSpecialist'        ','
3306               'Count6mOVChronicSpecialist'        ','
3307               'Count3mOVSpecialties'        ','
3308               'Count3mOVChronicSpecialties'        ','
3309               'Count3mER'        ','
3310               'Count12mER'        ','
3311               'Count3mERChronic'        ','
3312               'Count6mERChronic'        ','
3313               'DaysER'        ','
3314               'DaysMajorER'        ','
3315               'DaysHH'        ','
3316               'DaysMajorSurg'        ','
3317               'DaysOxygen'        ','
3318               'Days3mLTC'        ','
3319               'flag3mLTC'        ','
3320               'CountAdm3mAll'        ','
3321               'CountAdm3mChronic'        ','
3322               'CountAdm6mAll'        ','
3323               'CountAdm6mChronic'        ','
3324               'SumLOS3mAll'        ','
3325               'DaysAnyAdm'        ','
3326               'DaysChronicAdm'        ','
3327               'DaysSurgAdm'        ','
3328               'DaysMedicalAdm'        ','
3329               'DaysMtrntyAdm'        ','
3330               'DaysMHSAAdm'        ','
3331               'FlagChronicRx'        ','
3332               'FlagNewChronicRx'        ','
3333               'CountDaysSupp3m'        ','
3334               'CountDaysSupp6m'        ','
3335               'CountDaysSuppChronic3m'        ','
3336               'CountDaysSuppChronic6m'        ','
3337               'CountDaysSuppOpiates3m'        ','
3338               'CountDaysSuppOpiates6m'        ','
3339               'CountTherClass3m'        ','
3340               'CountTherClass6m'        ','
3341               'CountTherClassChronic3m'        ','
3342               'CountTherClassChronic6m'        ','
3343               'flag12mMHSA'        ','
104                                      The WPS System      16:10 Monday, October 29, 2018     

3344               'flag3mGYN'        ','
3345               'Count3mAcuteStage3'        ','
3346               'Count3mChronicStage3'        ','
3347               'Count6mChronicStage3'        ','
3348               'Count3mAcuteSign'        ','
3349               'Count3mChronicSign'        ','
3350               'Count6mChronicSign'        ','
3351               'Count12mChronicSign'        ','
3352               'Count3mAcute'        ','
3353               'Count6mAcute'        ','
3354               'Count3mChronic'        ','
3355               'Count12mChronic'        ','
3356               'Count3mBody'        ','
3357               'Count3mBodySign'        ','
3358               'flag3mNewChronicSign'        ','
3359               'Days3mStage3'        ','
3360               'PopClass'        ','
3361               'Rule'        ','
3362               'RuleConfidence'        ','
3363               'PopClassDTModelDescription'        ','
3364               'PopClassFinal'        ','
3365               'PopClassFinalDescription'        ','
3366               'FlagOverwrite';
3367          end;
3368        set temp.AllRules;
3369        put ENROLID @;
3370        put AssignmentFinal @;
3371        put Count3mOV @;
3372        put Count12mOV @;
3373        put Count3mOVChronic @;
3374        put Count6mOVChronic @;
3375        put Count3mOVChronicSpecialist @;
3376        put Count6mOVChronicSpecialist @;
3377        put Count3mOVSpecialties @;
3378        put Count3mOVChronicSpecialties @;
3379        put Count3mER @;
3380        put Count12mER @;
3381        put Count3mERChronic @;
3382        put Count6mERChronic @;
3383        put DaysER @;
3384        put DaysMajorER @;
3385        put DaysHH @;
3386        put DaysMajorSurg @;
3387        put DaysOxygen @;
3388        put Days3mLTC @;
3389        put flag3mLTC @;
3390        put CountAdm3mAll @;
3391        put CountAdm3mChronic @;
3392        put CountAdm6mAll @;
3393        put CountAdm6mChronic @;
3394        put SumLOS3mAll @;
3395        put DaysAnyAdm @;
3396        put DaysChronicAdm @;
105                                      The WPS System      16:10 Monday, October 29, 2018     

3397        put DaysSurgAdm @;
3398        put DaysMedicalAdm @;
3399        put DaysMtrntyAdm @;
3400        put DaysMHSAAdm @;
3401        put FlagChronicRx @;
3402        put FlagNewChronicRx @;
3403        put CountDaysSupp3m @;
3404        put CountDaysSupp6m @;
3405        put CountDaysSuppChronic3m @;
3406        put CountDaysSuppChronic6m @;
3407        put CountDaysSuppOpiates3m @;
3408        put CountDaysSuppOpiates6m @;
3409        put CountTherClass3m @;
3410        put CountTherClass6m @;
3411        put CountTherClassChronic3m @;
3412        put CountTherClassChronic6m @;
3413        put flag12mMHSA @;
3414        put flag3mGYN @;
3415        put Count3mAcuteStage3 @;
3416        put Count3mChronicStage3 @;
3417        put Count6mChronicStage3 @;
3418        put Count3mAcuteSign @;
3419        put Count3mChronicSign @;
3420        put Count6mChronicSign @;
3421        put Count12mChronicSign @;
3422        put Count3mAcute @;
3423        put Count6mAcute @;
3424        put Count3mChronic @;
3425        put Count12mChronic @;
3426        put Count3mBody @;
3427        put Count3mBodySign @;
3428        put flag3mNewChronicSign @;
3429        put Days3mStage3 @;
3430        put PopClass @;
3431        put Rule @;
3432        put RuleConfidence @;
3433        put PopClassDTModelDescription @;
3434        put PopClassFinal @;
3435        put PopClassFinalDescription @;
3436        put FlagOverwrite;
3437      run;

NOTE: The file
      '/rpscan/u071439/output/31DEC2015Enrolids2000_10292018/AllRules31DEC2015Enrolids2000_10292
      018.csv' is:
      File
      Name=/rpscan/u071439/output/31DEC2015Enrolids2000_10292018/AllRules31DEC2015Enrolids2000_1
      0292018.csv,
      Access Permissions=-rw-rw-r--, Number of Links=1,
      Owner Name=u071439, Group Name=devl,
      File Size=0, Last Modified=17:22:27 Oct 29 2018,
      Created=17:22:27 Oct 29 2018, Lrecl=1280, Recfm=V

106                                      The WPS System      16:10 Monday, October 29, 2018     

NOTE: 1799 records were written to file
      '/rpscan/u071439/output/31DEC2015Enrolids2000_10292018/AllRules31DEC2015Enrolids2000_10292
      018.csv'
      The minimum record length was 179
      The maximum record length was 1085
NOTE: 1798 observations were read from "TEMP.AllRules"
NOTE: The data step took :
      real time : 0.093
      cpu time  : 0.036


3438      FILENAME ##EXPOUT CLEAR;

NOTE: Submitted statements took :
      real time : 1:12:20.243
      cpu time  : 0:12:51.045
